## 1.场景资产规范检查
### 命名规范检查
检查场景组件文件目录命名规范

按照下文将编辑器与项目文件夹中的资产按照规范整理，

[https://snh48group.yuque.com/dpatt3/eb0114/bx31uxxcgl29typ1](https://snh48group.yuque.com/dpatt3/eb0114/bx31uxxcgl29typ1)



### 检查场景资源引用关系
选中需要提交的场景所在文件夹，右键导出

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717663663245-f78485f7-eeeb-4716-a7c0-d487bd214b01.png)

在导出文件列表中检查该文件夹是否有其他文件夹的引用（Public文件夹除外）

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717663850677-aaaa79f0-0553-4b5a-87c5-fe9da725fac2.png)

确认非法引用文件位置并进行清理（Scene文件夹中只能出现检查的文件夹本身与Scene_Public文件夹，其余文件均为非法引用）

（可有可无或者使用了没生效的文件可直接删除，利用率很低的专用资源可选择复制一份到自己的文件夹，利用率很高的文件商议后可酌情移动到公用文件夹）



### 检查场景贴图是否超过规定
选择需要提交的场景文件，右键导出

在导出文件列表检查贴图数量是否超过规定

如果超过了规定的贴图数量，需要对场景内文件进行以下几步优化

1.检查场景内贴图是否存在冗余、在场景中但是隐藏了未使用的情况，如果有的话，需要进行清理

2.检查是否有利用率很低的贴图，能清理的清理掉，能用近似的替换的替换掉

3.纯色贴图把贴图去掉，用参数调出效果

4.中远景看不见的小细节去掉



### 场景中是否有废弃的资源存放
场景中隐藏的、不需要被程序调用动态显示的文件，清理掉



### 场景灯光是否分级
动态灯光需要分低中高三个等级

低级尽量只留主光源，中级+低级保证在5盏以内，低级+中级+高级不能超过10盏



### 场景灯光是否排除掉角色灯光
场景灯光只保留和场景相关的层级



### 场景灯光数量是否在合理范围内（实时灯光10展以内）
动态灯光不能超过10盏



### 后期是否在post层
后期、lightsettingvolume、Environmentvolume的layer层级在postprocess_01



### LOD设置规范
LOD要保持屏占比为LOD0：50%、LOD1：30%、LOD2：10%



## 2.导致AB打包失败的DEBUG检查
### MISS丢失检查
检查ForwardPlus组件是否有丢失

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717664216706-d4238b6e-86e7-4620-9a94-9c349bfb4460.png)

看到如上图的报错后，通过log提示找到对应的文件位置

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665443337-50a0d4c5-cd42-4e4f-a3de-98a4c1a2bef1.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665450183-e50cea87-57fb-4611-9283-c0503c448419.png)

如上图显示missing prefab with guid的文件为已在文件夹中删除，场景中没有清楚掉的文件，需要核对一下是否为误删，误删的文件需要找回，弃用的文件需要在场景内清理掉



### forward脚本丢失检查
![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665557303-f73f7b58-cf02-4502-988b-a632b531dce4.png)

看到如上图的报错后，通过log提示找到对应的场景

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665580847-775ebe69-86b1-4ec2-a6e7-c208fd046fac.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665593280-1d570109-5c8c-45ea-aca8-4777dfbbf3d6.png)



## 3.AB包循环引用检查
使用工具检查AB包循环引用

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665650808-de000cfb-541d-4663-845a-2bb4f624c45a.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717665658390-3aa79227-e7b8-45bf-b6b8-a953a5f6eb26.png)

出现上图的报错时，通过log提示找到对应的文件位置

然后参考第一步中的导出文件的检查方式将互相引用的资源清理掉



## 4.AB包循环引用规则与注意事项
### 什么是AB包循环引用
简单的说就是两个场景都互相使用了对方的场景资源库文件

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666261559-21a4c238-dd3b-4479-8a23-fd60a2c62e96.png)

### 什么导致了资源循环引用
在制作过程中的不正规的操作，（例如直接拖取其他场景资源，不修改该资源的源文件路径）

### 如何排查资源循环引用
1.通过检查场景美术资源库资源是否存放规范

2.在确保第一条没有问题的前提下，使用程序插件检查

3.通过AB包网页打包机制检查(最好在前两步骤把问题解决掉)

### 几种检查AB包循环引用方法
• 通过美术资源库规范检查

• 无循环引用案例

拿UI_Culture为例

1.检查UI_Culture场景的美术资源库。

2.可以看到UI_Culture用到了其他4个场景的美术资源。

3.检查另外4个场景是否使用了UI_Culture资源库的资源，观察发现其他四个场景未使用 UI_Culture资源库的资源。

通过右图可以看出UI_Culture 和其他场景没有存在资源循环引用的问题

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666408050-fcb314e4-e461-4667-a4bd-aca9dc821ffc.png)

有循环引用案例

拿UI_Culture为例

1.检查UI_Culture场景的美术资源库。

2.可以看到UI_Culture用到了其他4个场景的美术资源。

3.检查Scene_GameTown场景使用了UI_Culture资源库的资源。

通过右图可以看出UI_Culture 和Scene_GameTown场景存在资源循环引用的问题

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666427635-b6f49e2c-22fd-42ce-b8de-8613f05a482e.png)

使用程序插件检查

1.将需要检查的场景进行AB包打包

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666446488-b8d1739e-efea-4378-8846-bfc17c5e36a9.png)

2.然后使用程序插件进行检查是否有循环引用

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666462892-8c62c038-58f7-40d7-b6b8-bce6ea134f32.png)

程序插件检查循环引用的详细操作可查看下文连接，有详细介绍 https://thoughts.teambition.com/workspaces/5df8bf6497d77a00134e3c27/docs/60ae399d41cef60001dfe8b1/

使用网页打AB包检查

1.使用网页打AB包首先要通过检查场景美术资源库资源是否存放规范

2.检查无误后，将需要提交的美术资源上传。（注意这一步不要上传到主干分支，因为可能会存在循环引用，上传后会导致主干分支无法正常游戏运行）

3.确保上面正常操作后，打开 http://192.168.51.222:8080/view/FA%E5%BC%80%E5%8F%91/

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666552467-e54e518e-060d-4c96-8920-9271a4ec2361.png)

1.第一步选中FA开发，到FA-客户端-AB包

2.然后会弹到第二步的网页，选择Build with Parameters,在弹框上复制要打AB包的分支名字，开始构建

3.开始构建后返回上一页就可以看到在进行打包，等到打AB包结束后，即可启动游戏测试。

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666571673-b2f60764-6a84-4550-ad69-373c2349f1ef.png)

在测试时，请打开Console属性栏，如果有循环引用，就会出现报错，如下图

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666588468-774178b9-016c-435c-a84f-cb0b843ceaca.png)

### 如何解决AB包循环引用
解除环中的任意一个依赖就可以解决循环引用的问题将循环引用的文件复制一份，存放到对应的文件夹中，然后指向新位置的文件。拿Scene_GameTown与UI_Culture循环引用来举例

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666614880-33b739a3-698a-4e93-9f0e-17a8f195a330.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666619430-f3a6eebd-4c3f-4a3b-9d4d-35ed62804f62.png)

上图是Scene_GameTown与UI_Culture循环引用，找到了互相引用了的资源，只要将其中的一个的循环引用文件

复制一份，存放到对应的文件夹中，然后指向新位置的文件。

(可以将Scene_GameTown引用UI_Culture的FBX文件拷贝到Scene_GameTown的资源库，找到场景引用的文件从新指认。

也可以将UI_Culture引用Scene_GameTown的反射探针资源拷贝到UI_Culture的资源库从新指认。)

### AB包循环引用特例
如果有遇到使用贴图或者材质球出现的循环引用问题时，可能会出现即便复制文件放到正确的文件夹也从新指认了，再次检查的时候还是会出现循环引用的报错。

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666693097-ada75336-7ae7-4c77-a800-1e04999f55f4.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666725564-fb7813d0-7396-491a-86c3-b39ef26218bf.png)

按照上图的两个操作去清理掉，材质的历史信息记录，然后上传即可。

## 5.贴图压缩规范
贴图大小一般不能超过 1024*1024

贴图引擎压缩格式常用的为：

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666831859-7dfe428e-9c8c-4bf6-b324-320f0afcdade.png)

贴图压缩大小

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666849585-99882aea-64ad-4f29-b4f4-ce8c59404b98.png)

## 6.场景美术效果检查
将Game视口调整为1624*750分辨率，并且将RenderScale调整为0.72后观察场景是否有渲染问题（例如屏幕上有摩尔纹等）

调整视口分辨率

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666915890-a37204fd-90c7-429c-a7d1-3e49dd641139.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666922587-e2b54026-20f4-40e1-908e-9a126439b108.png)

修改RenderScale

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666957254-27596fa0-950f-457e-8896-c2867362e295.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44842280/1717666965855-4ef95f5d-a9a1-43e4-bf64-3af01ef6abc1.png)

### 穿帮问题检查
战场中心长20米宽25米内是否有高出50公分的物体

战斗地图地面高度是否在零点

开场镜头是否正确

MVP效果是否正确

TAA的设置是否合理是否影响到了角色效果

后期的设置是否影响到了角色的效果

### 优化检查
场景低于20公分的模型是否有去掉投影

去掉投影场景同屏面数是否低于7W

体积雾是否可以替换成高度雾

## 7.资源提交记录检查-模板
| **类型** | **核查人（姓名****+****日期）** | **出错记录（日期****+****问题）** |
| --- | --- | --- |
| 战场中心长20米宽25米内是否有高出50公分的物体 |  |  |
| 战斗地图地面高度是否在零点 |  |  |
| 场景低于20公分的模型是否有去掉投影 |  |  |
| 战斗场景贴图是否高于10套 |  |  |
| 开场镜头是否正确 |  |  |
| MVP效果是否正确 |  |  |
| 去掉投影场景同屏面数是否低于7W |  |  |
| 体积雾是否可以替换成高度雾 |  |  |
| TAA的设置是否合理是否影响到了角色效果 |  |  |
| 后期的设置是否影响到了角色的效果 |  |  |
| 场景中是否有废弃的资源存放 |  |  |
|  |  |  |
| 场景灯光是否分级 |  |  |
| 场景灯光是否排除掉角色灯光 |  |  |
| 场景灯光数量是否在合理范围内（实时灯光10展以内） |  |  |
| 后期是否在post层 |  |  |
|  |  |  |
| 新加的资源分类是否规范 |  |  |
| 贴图、质命名规范 |  |  |
| 模型尺寸是否规范 |  |  |
| 模型是否在坐标中心点导入 |  |  |
| 物体的LOD设置是否符合50% 30% 10%的规范 |  |  |
| 材质球TAA是否改为OFF |  |  |
| 高度20公以下的模型去掉投影 |  |  |
| 高于20公分的模型需要做假投影 |  |  |


