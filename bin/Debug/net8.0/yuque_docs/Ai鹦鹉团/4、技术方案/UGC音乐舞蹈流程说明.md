一、基本流程说明

1、流程图

![](https://cdn.nlark.com/yuque/0/2024/png/43385223/1720075270567-2c5a967e-eca0-4142-a0a8-b6dfa12f990e.png)

1）上传MP3

可以使用官方提供的mp3或者玩家自己上传本地mp3

2）选择歌曲难度

玩家选择歌曲难度，可以多选

3）调用AI

从AI获取两个信息： a.歌曲bpm

    b.舞蹈动作序列

4）生成谱面信息

根据bpm，结合玩家选择的难度，从策划配表中获取每小节的按键个数信息。

5）设置歌曲信息

包括歌名，演唱者，语种，bpm，时长，封面。能自动获取的自动填写

6）生成唯一标识ID

[https://www.cnblogs.com/QunShan/p/16829939.html](https://www.cnblogs.com/QunShan/p/16829939.html)

7）上传数据至腾讯云

上传音源文件，封面图片，按键配置文件，舞步序列文件

为了节省cdn空间，防止同一个文件多次上传，音源文件和图片用md5码作为文件名。

8）封装data信息

将腾讯云文件路径和歌曲信息，连带唯一标识ID，用base64封装成Data数据

9）上传data信息

获取下载链接，生成二维码



二、其他相关

1、作者唯一性

后期编辑器需要用集团统一账号登录，账号openid需要记录到data信息中



