# **下落式玩法编辑器PC版策划案**
| **<font style="color:rgb(46,117,181);">日期</font>** | **<font style="color:rgb(46,117,181);">内容</font>** | **<font style="color:rgb(46,117,181);">撰写者</font>** |
| :---: | :---: | :---: |
| <font style="color:rgb(46,117,181);">2024/09/26</font> | <font style="color:rgb(46,117,181);">初版</font> | <font style="color:rgb(46,117,181);">朱梅迪</font> |
| <font style="color:rgb(46,117,181);"></font> | <font style="color:rgb(46,117,181);"></font> | <font style="color:rgb(46,117,181);"></font> |
| <font style="color:rgb(46,117,181);"></font> | <font style="color:#D22D8D;"></font> | <font style="color:rgb(46,117,181);"></font> |


<font style="color:rgb(0,0,0);">请选择【视图】-【Web版式】，并勾选导航窗格阅读</font>

<font style="color:#601BDE;">紫色字体表示有数值需求</font> <font style="color:#DF2A3F;"> 红色字体表示特别注意</font>  

<font style="color:#74B602;">绿色字体表示飘字及系统公告文字</font>  <font style="color:#ED740C;">橙色字体表示动画或者特效表现</font>



## 一、**设计目的**
### （一）**编辑器定位**
        通过提供可视化的工具和界面，让能帮助音乐制作人、音乐爱好者等用户够直观地设计和调整下落式玩法的按键、动作等功能，使其更加高效、便捷地创建和编辑游戏谱面；



### （二）**预期体验**
        提供强大的编辑功能高效简便的乐谱制作、舞步制作、镜头踢调整，灵活的谱面编辑与定制；



## 二、**玩法概述**
### （一）**玩法简介**
    玩家使用该编辑器，可以根据所选歌曲的音乐节拍，对按键、动作、镜头进行编辑调整，并预览自己的调整结果。

![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1727403777151-6aa990af-69fc-466f-88b2-a6f9b7af10ce.png)



### （二）**竞品参考**
《Malody V》 编辑功能

《PatternDIY-editor》

## 三、**玩法详情**
### （一）**玩法开启**
#### 1. 开启条件
~~随鹦鹉工坊功能一同开启~~



#### 2. 功能入口
##### ~~ ①. 玩家版入口：~~
~~鹦鹉工坊生成下落式模式作品页面，增加按钮【高级编辑】操作按钮后进入下落式玩法玩家向编辑器功能。~~

~~ ~~

##### <font style="color:#D22D8D;">②.内部单机版入口 </font>
<font style="color:#D22D8D;">    点击单机版，弹出下图弹窗，选择模式（默认下落式模式）后点击⑤处创建，创建对应模式的空白谱面。或者可以点击读取按钮打开open弹窗，读取本地已有的谱面数据。</font>

![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728373248539-d8211f6c-cca9-4086-93b8-6c9f2f3bc476.png)









### （二）**界面跳转逻辑**
![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728547081387-8ff4b386-bd17-4c83-9ccf-8c7cb72f535a.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728547089852-457165b2-4c62-4ea7-9fc8-b3f02a053eb1.png)

1. -控件名称：按钮【返回】

    -操作效果：

        * 当玩家进入高级编辑至单击返回按钮时间段<font style="color:#DF2A3F;">有任意修改时</font>，弹出<u>通用提示弹窗</u>：您有修改未保存，是否保存？   玩家单击是，则保存玩家当前的修改，返回至作品页面；玩家单击否，则不保存玩家的修改，返回至作品页面。
        * 当玩家进入高级编辑至单击返回按钮时间段<font style="color:#DF2A3F;">没有任何修改时</font>，单击返回按钮后直接返回作品页面。

    - 控件状态：单一状态



2. -控件名称：切换按钮【舞美编辑】/ 【按键编辑】

    - 操作效果：单击自动保存当前改动，并切换至舞美编辑页面/按键编辑页面。

    -控件状态：单一状态



<font style="color:#000000;">3.-控件名称：按钮【暂存】</font>

<font style="color:#000000;">     - 操作效果：单击暂存玩家当前的修改。</font>

<font style="color:#000000;">     -控件状态：单一状态</font>

<font style="color:#000000;"></font>

<font style="color:#000000;">4.-控件名称：按钮【撤销】和【恢复】</font>

<font style="color:#000000;">     - 操作效果：单击【撤销】：回到上一步；单击【恢复】：撤回撤销效果。</font>

<font style="color:#000000;">     -控件状态：有可点击/不可点击 两种状态</font>

<font style="color:#000000;">                        当玩家进入界面没有任何操作时：撤销按钮不可点击；当玩家未使用撤销时，恢复按钮不可点击；恢复按钮仅在玩家撤销后，操作任意步骤之前可点击</font>



5. -控件名称：分区-歌曲信息 

    -操作效果：无。

     -控件状态：单一状态，显示歌曲名字、bpm、难度信息。



6.  -控件名称：分区-预览

     -操作效果：无。

     -控件状态：单一状态。



7.  -控件名称：按键-单音符

     -操作效果：点击选中/取消选中，选中后在 20.谱面编辑分区可进行对应按键的编辑（详见控件20.处规则）。

     -控件状态：有选中/未选中两种状态。



8.  -控件名称：按键-长音符

     -操作效果：点击选中/取消选中，选中后在 20.谱面编辑分区可进行对应按键的编辑（详见控件20.处规则）。

     -控件状态：有选中/未选中两种状态。



9.  -控件名称：按键-选中多个

     -操作效果：点击选中/取消选中，选中后在 20.谱面编辑分区可进行对应按键的编辑（详见控件20.处规则）。

     -控件状态：有选中/未选中两种状态。



10.-控件名称：选择控件-播放速度

      -操作效果：点击展开选择框：支持播放速度：0.5、0.6、0.7、0.8、0.9、1.0、1.1、1.2、1.3、1.4、1.5 ，共11种选择。

                               

      -控件状态：展开/收起两种状态

      -其他规则：进入时默认播放速度为1.0



11. -控件名称：选择控件-小节分割线划分

      -操作效果：点击展开选择框：支持选择每小节分割：1/2、1/3、1/4、1/6、1/8、1/12、1/16、1/24

                               ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728537087759-8349b082-fdfa-4f85-a837-cc46f86b495f.png)

      -控件状态：展开/收起两种状态 

      -其他规则：进入时默认选择分割为1/4；2、3、4、6分割线有独自的颜色（同传统颜色相同即可）；



12. -控件名称：按钮-高级设置

      -操作效果：点击展开/收起高级设置内容（展开显示详见24.-27.）

      -控件状态：有展开/收起两种状态；



13. -控件名称：控件-进度条

    -操作效果：按住拖动后松开至对应进度，上方预览跳转至对应进度进行播放。

    -控件状态：单一状态



14. -控件名称：控件-当前预览时间显示

    -操作效果：无

    -控件状态：单位：秒，精确到秒小数点后两位



15. -控件名称：按钮-全屏

     -操作效果：单点该按钮，打开<font style="color:#DF2A3F;"> 全屏预览页面</font><font style="color:#000000;">（见下图）</font>

     -控件状态：点击有通用点击效果

      ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728544812944-0c7a5caa-b111-4c13-8425-3a77a0024084.png)



16. -控件名称：按钮-回到开始

      -操作效果：单点该按钮，回到最开始并且自动从最开头播放

      -控件状态：点击有通用点击效果



17. -控件名称：按钮-倒退一小节

      -操作效果：单点该按钮，往前倒退一个节拍并自动播放

      -控件状态：点击有通用点击效果，需要支持短时间单击多次



18. -控件名称：按钮-暂停/继续

      -操作效果：单点该按钮，切换播放状态至暂停播放/继续播放

      -控件状态：有暂停/继续两种状态，单点切换



19. -控件名称：按钮-前进一小节

      -操作效果：单点该按钮，往前倒退一个节拍并自动播放

      -控件状态：点击有通用点击效果，需要支持短时间单击多次



20. -控件名称：分区-谱面编辑分区

      -操作效果：

        * 基础操作规则：
            + 用户编辑按键时，需要先在左侧选择按键类型，再放置在此处对应小节线的上方；



            + 0小节以下会显示对应负小节及负时间线，但按键无法放置在负数小节上，若玩家点击放置，<font style="color:#74B602;">则飘窗提示：无法放置在此位置；</font>



            + 按键放置在小节线时，若玩家勾选了24.对齐至格线时，以为鼠标放置时位置为准，未勾选时以放置时鼠标所在小节下方的小节线为准以鼠标点击位置为准（见下图）；

                              ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728543338301-4ba4f643-088f-4fb0-a883-3242a0c69594.png)



            + 用户选择【长音符】时，鼠标左键首次点击为按键起始音符，后续鼠标左键点击音符为长音符轨道，长音符仅能自下而上点击放置，无法自上而下放置。若玩家后续点击为相对为下方的位置，<font style="color:#74B602;">则飘窗提示：无法放置在此位置；</font>



            + <font style="color:#000000;">用户选择【选中多个】时，再按住鼠标左键不松，滚动鼠标滚轮直至将所需选择的按键全部框进去；</font>



            + **<u><font style="color:#DF2A3F;">同</font></u>**<font style="color:#DF2A3F;">一时间</font>**<font style="color:#DF2A3F;"> </font>****<u><font style="color:#DF2A3F;">同</font></u>**<font style="color:#DF2A3F;">一轨道 </font>**<u><font style="color:#DF2A3F;">不能</font></u>**<font style="color:#DF2A3F;">放置多个音符；</font> **<u><font style="color:#DF2A3F;">不同</font></u>**<font style="color:#DF2A3F;">时间</font>** ****<u><font style="color:#DF2A3F;">同</font></u>**<font style="color:#DF2A3F;">一轨道 </font>**<u><font style="color:#DF2A3F;">可以</font></u>**<font style="color:#DF2A3F;">放置多个音符；</font>（界面显示上为：放置的音符显示上完全重叠，但可以部分重叠）  

                               ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728539786677-4b8616c5-c602-4f19-97e6-c3a134e3ec95.png)  ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728539793992-a090094e-be34-4f5f-b6ef-66f714b38521.png)

                               ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728539873263-333004f6-ca11-4a35-9225-863291e7b02d.png)  ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728541064593-8b946884-c9fc-46b8-b0d2-5a8fcc921646.png)



            + <font style="color:#DF2A3F;">单音符、长音符的大小不随小节线增加/减少而改变；</font><font style="color:#000000;">（参考下图）</font>

                           ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728553368282-927bfe0a-b8d0-4815-89a7-b899bd430e2c.png)![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728553374223-76dfa649-c64a-4ec4-a58e-cdaca479a00b.png)![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728553386656-1e8c0b9d-2391-4898-843d-c9805239b60f.png)

<font style="color:#DF2A3F;">                </font>          

        * 快捷键操
            + 鼠标左键：单音符点击一次直接放置，长音符点击多次依次放置长音符开始、中间节点、结束点；
            + 鼠标中键：单点一次：确认结束长键；双击中键：长键模式下双击鼠标中键，可选中长键进行编辑；
            + 鼠标右键：单音符点击一次直接删除，长音符点击一次依次从音符结束点开始往音符开始点删除各阶段（如下图长音符，按照54321顺序依次删除）；

                            ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728528012539-03c227a9-017e-45b4-9960-519dbd4a1dab.png)

            + 鼠标滚轮：上下滑动轨道，滚轮每滚一格，轨道对应滑动一格；
            + 键盘空格：播放/暂停音乐；
            + 键盘+/-：调整节拍线，每按一次+或-，小节线对应增加或减少1档；
            + 键盘↑/↓：调整播放速度，每按一次↑或↓，播放速度对应加快或减少1档；
            + 键盘Q ： 切换至选中多个，对应控件9切换为选中状态；
            + 键盘W：切换至单音符，对应控件7切换为选中状态；
            + 键盘E：切换至长音符，对应控件8切换为选中状态；
            + 键盘ctrl+c ：复制选中音符；
            + 键盘ctrl+x： 剪切选中音符；
            + 键盘ctrl+v ：粘贴选中音符；
            + 键盘ctrl+z ：撤销上一步操作；
            + 键盘ctrl+y ：恢复撤销操作（前一步使用撤销后有效）；



   -控件状态：

        * 单音符 ：有放置成功状态和选中多个两种状态，放置状态为正常样式，选中状态为使用选中多个后显示样式，可为半透明样式；

                           ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728551831677-5c4b68ee-2b5f-4634-ab5e-bd3a411d9415.png)



        * 长音符：有放置中、放置成功、选中多个三种状态，放置中状态为正常样式的异色款，放置成功为正常样式，选中多个样式可谓半透明的正常状态；

                           ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728552030431-727118a1-50f4-4b11-8b61-f9d8d7126a0f.png)![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728552067760-6948f4d2-19bc-42b6-9c38-0266c707b736.png)



        * 选中多个：鼠标框选区域有蒙版效果（参考下图）

                           ![](https://cdn.nlark.com/yuque/0/2024/png/44683805/1728551721834-9e0fb000-d5c9-4026-9e37-4b33f49733bd.png)



21. -控件名称：显示-小节线

      -操作效果：无

      -控件状态：根据12.处选择的小节线数量进行对应线显示（显示规则同传统编辑器一致），其中：<font style="color:#DF2A3F;">红色判定线位置固定</font>，显示在编辑区下方约四分之一处，为当前时间，（注：当进度条拉到最底部时候，此线卡在0小节（即0秒）处，下方小节线与秒数对应位负）。小节线左侧显示小节数，右侧显示对应时间（单位秒，显示到小数点后两位）



22. -控件名称：控件-进度条

      -操作效果：按住拖动后松开至对应进度，左侧预览进度也跳转至对应时间

      -控件状态：单一状态。



23. -控件名称：按钮-tips

      -操作效果：点击后弹出文字弹窗，显示快捷操作相关文本

      -控件状态：单一状态。

      -文本内容：

        * 标题：流星玩法谱面操作简介
        * 内容：
            + 鼠标左键：单音符点击一次直接放置，长音符点击多次依次放置长音符开始、中间节点、结束点；
            + 鼠标中键：单点一次：确认结束长键；双击中键：长键模式下双击鼠标中键，可选中长键进行编辑；
            + 鼠标右键：单音符点击一次直接删除，长音符点击一次依次从音符结束点开始往音符开始点删除各阶段（如下图长音符，按照54321顺序依次删除）；
            + 鼠标滚轮：上下滑动轨道，滚轮每滚一格，轨道对应滑动一格；
            + 键盘空格：播放/暂停音乐；
            + 键盘+/-：调整节拍线，每按一次+或-，小节线对应增加或减少1档；
            + 键盘↑/↓：调整播放速度，每按一次↑或↓，播放速度对应加快或减少1档；
            + 键盘Q ： 切换至选中多个，对应控件9切换为选中状态；
            + 键盘W：切换至单音符，对应控件7切换为选中状态；
            + 键盘E：切换至长音符，对应控件8切换为选中状态；
            + 键盘ctrl+c ：复制选中音符；
            + 键盘ctrl+x： 剪切选中音符；
            + 键盘ctrl+v ：粘贴选中音符；
            + 键盘ctrl+z ：撤销上一步操作；
            + 键盘ctrl+y ：恢复撤销操作（前一步使用撤销后有效）；



24. -控件名称：勾选框-对齐至格线

      -操作效果：点击后勾选/取消勾选；勾选后按键放置时候以为鼠标放置时位置为准，未勾选时以放置时鼠标所在小节下方的小节线为准；

      -控件状态：勾选/未选中两种状态



25. -控件名称：控件-谱面偏移

      -操作效果：可点击中间数字，使用键盘自由输入数字调整偏移；也可使用左右箭头调，在当前偏移基础上调整对应单位的偏移量（使用左右箭头调整时，点击一次，调整的偏移量为26处输入的偏移单位量；

      -控件状态：输入/未输入两种状态



26. -控件名称：控件-偏移单位

      -操作效果：点击中间数字，使用键盘自由输入数字调整偏移；

      -控件状态：输入/未输入两种状态



27.  -控件名称：按钮-加大间距/减少间距

      -操作效果：点击一次，对应加大/缩小小节之间的间距（仅调整间距，不改变小节数量）

      -控件状态：有通用按钮点击效果，需支持连续点击



### （三）**配置表**
待后续补充

### （四）**邮件**
无





## 四、**红点提示逻辑**
无



## 五、**埋点检测需求**
无



## 六、**美术需求**
待后续补充



## 七、**数值需求**
待后续补充



## 八、功能需求清单
[【待开发】【特性】下落式（即流星）玩家向编辑器@朱梅迪](https://snh48group.yuque.com/qim4en/cqb2hd/ukrapheaoxy4yygp)





