# 一、概述
## 1.1 文档说明
## 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | --- | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/8/26</font> | | 王亚婷 | <font style="color:black;">文档创建</font> |


## 1.3 设计思路
## 1.4 系统流程图
# 二、功能说明
## 2.1好友
### 2.1.1加好友规则
+ <font style="color:#000000;">添加好友为双向操作，一方发出好友申请后需要对方同意后，双方才能成为好友 。</font>
+ <font style="color:#000000;">好友列表显示上限100人，默认排序规则为：在线 -> 好感度 ->离线时间（即在线的好友在前，离线好友在后；在线与离线的好友按好感度从高到低排序；好感度相同的好友离线时间最近的在前）。</font>
+ <font style="color:#000000;">玩家可以切换排序方式，将排序方式切换为按好感度排序，切换后好友列表将按好感度从高到低进行排序。</font>
+ <font style="color:#000000;">向对方发出添加好友申请后，若对方在线且不在游戏内则将收到弹窗：XXXXXX请求添加您为好友，是否同意？点击确定即可添加对方为好友，同时飘字提示：添加好友成功；点击拒绝按钮可拒绝玩家的好友申请，点击右上角的关闭按钮可忽略玩家的好友申请，此时好友功能按钮右上角显示红点标识玩家可前往进行处理。</font>
+ <font style="color:#000000;">若玩家正处于游戏对局内，则将在对局结束后收到好友申请弹窗。</font>
+ <font style="color:#000000;">若玩家当前不在线，则好友功能按钮右上角显示红点标识，点击进入好友功能界面后，“好友申请“页签右上角显示红点标识，点击后可查看收到的好友申请。</font>
+ <font style="color:#000000;"> 若玩家B已经向玩家A发出好友申请，但玩家A还未进行处理，则玩家A此时在好友功能内或者B的个人资料等界面内点击添加好友按钮后将自动添加对方为好友同时飘字提示：添加好友成功。</font>

### 2.1.2<font style="color:#000000;">删除好友</font>
+ <font style="color:#000000;">删除好友为单向操作。点击删除好友按钮将出现确认弹窗：是否确认删除好友？点击确定按钮解除与对方的好友关系，点击取消按钮弹窗关闭。</font>
+ <font style="color:#000000;">A删除B的好友后，B将从A的“我的好友”列表内删除；同时A将自动从B的“我的好友”列表中被删除。</font>

### <font style="color:#000000;">2.1.3</font><font style="color:#000000;">好友交互</font>
+ 成为好友后，玩家可以在好友列表内为好友赠送金币，具体操作为在“我的好友”列表内点击好友信息栏右侧的赠送金币按钮即可为该好友赠送金币。
+ 每人每天只能给同一个玩家赠送1次金币，点击赠送金币按钮后按钮将变为已赠送态，不可点击，第二天凌晨按钮状态会刷新；每人每天可为50名不同玩家赠送金币，超出上限后再次点击赠送金币按钮将飘字提示：您今日赠送次数已用完。
+ 赠送成功后飘字提示：您已成功赠送对方10金币；金币赠送后对方需要点击一键收取并赠送按钮来获得所赠送的金币（赠送后好友列表排序不更新）。
+ 列表底部显示玩家拥有的金币数量和领取并回赠按钮，点击该按钮将领取当日好友赠送的金币并回赠给对方，不是当天赠送金币的可累计收获并为好友送出当天的金币。
+ 成为好友后还可以在游戏内其他场景进行交互，如下：
    - 创建等待室，邀请好友加入（详见[等待室策划案](https://snh48group.yuque.com/qim4en/xs9kb3/pb4q4q8n25ad9oew)）
    - 急速匹配，邀请好友加入（暂未开发）
    - 排行榜查看好友排行（详见[排行榜策划案](https://snh48group.yuque.com/qim4en/xs9kb3/znyg3frn40trgyox)）
    - 商城赠送好友礼物（详见[商城策划案](https://snh48group.yuque.com/qim4en/xs9kb3/fscv2kkf1wgcupas)）
    - 好友之间可培养好感度，增加好感度可以提升好感度等级。

## 2.2系统推荐
+ 玩家可以在好友功能界面中的“系统推荐“页签内查看系统推荐的玩家列表，从中选择自己感兴趣的玩家进行关注。
+ 考虑到数据量，系统推荐列表内将只推荐本服在线玩家或者最近一次登出时间在近7天内的玩家（e.g.当前时间是2024年7月8日16点，最近一次登出时间在7月1日16点后的玩家）；
+ 系统推荐将根据匹配要素计算推荐分进行排序，匹配要素包括：上次在线时间、性别、城市、年龄；
+ 推荐分=w1*在线分+w2*异性分+w3*同城分+w4*年龄分

（w1=0.5，w2=0.1，w3=0.2，w4=0.2，系数可根据后续情况调整）

| **最近一次离线时间距离当前时间间隔** | **推荐分** |
| :---: | :---: |
| 玩家在线 | 10 |
| 1小时内（含） | 8 |
| 12小时内（含） | 6 |
| 24小时内（含） | 4 |
| 3天内（含） | 2 |
| 7天内（含） | 1 |
| 以上 | 0 |


| **是否为异性** | **异性分** |
| :---: | :---: |
| 是 | 10 |
| 否 | 0 |


| **是否同城** | **同城分** |
| :---: | :---: |
| 是 | 10 |
| 否 | 0 |


| **与当前玩家年龄差** | **年龄分** |
| :---: | :---: |
| 同年 | 10 |
| 一年之内 | 8 |
| 三年之内 | 6 |
| 五年之内 | 4 |
| 五年之十年 | 2 |
| 十年以上 | 1 |


+  显示规则
    - 如果已经是关注对象、屏蔽、被屏蔽、好友关系，不出现在推荐列表；
    - 根据筛选条件获取推荐列表；筛选条件为性别和是否同城；
    - 每次推荐人数上限1000人，考虑到服务器压力，分批获取，每次获取10名玩家；
    - 打开推荐列表状态，无需同步更新计算推荐分。在进入推荐列表页面，如果玩家更新了个人资料标签，影响了匹配度，或者玩家上下线，影响了在线值，无需动态更新；
    - 每次进入系统推荐或者更改筛选条件，客户端都需要重新从服务器获取当前状态的推荐列表；

## 2.3我的玩伴
+ 包括以下情况的玩家将会被加入到玩伴列表中
    - 私聊过对方，或者对方私聊过我；
    - 等待室内做过互动动作；
    - 等待室内一起跳过舞（包括局内旁边的人）；
    - 急速匹配一起组队跳舞过的玩家；
    - 我邀请进等待室的玩家，或者邀请我进等待室的玩家；
+ 玩伴人数上限100人，我的玩伴列表顺序默认按最近互动时间排序，即最近有过互动的排在最前面，超过100人后，隐藏互动时间最早的玩家。
+ 如果与同一玩家有多次互动，下次打开玩伴列表的时候更新玩伴列表排序，同一人的互动排序以最近互动的一次为准；
+ 被拉黑的玩家，不会出现在玩伴列表中；
+ 已经成为好友的玩家，不会出现在玩伴列表中；
+ 不能主动添加其他玩家为玩伴；
+ 玩伴可以主动从列表中删除或者拉黑；

## 2.4黑名单
+ 屏蔽和取消屏蔽均为单向操作，无需对方同意；
+ 点击屏蔽按钮将出现确认弹窗：是否将对方加入黑名单？点击确定可以将对方加入黑名单，点击取消弹窗关闭。
+ A屏蔽B成功，B进入A的黑名单列表，同时B不会知道A屏蔽了自己，不提供查看被屏蔽名单的功能；
+ 当A和B为好友关系时，屏蔽对方后，对方将被加入黑名单，同时从“我的好友“列表中自动删除；<font style="color:rgb(0,112,192);"> </font>
+ A屏蔽B后，B在游戏中会带来以下负面影响：
    - B所发送的信息将自动被玩家A屏蔽（包括各频道信息和私聊信息，喇叭信息将不被屏蔽）
    - 被加入黑名单的玩家B将不会出现在玩家A的“系统推荐“页签下
+ 在黑名单列表内点击取消屏蔽按钮将出现确认弹窗，再次确认后可将玩家从黑名单中移除，被移除黑名单的玩家B将重新出现在玩家A的“系统推荐”列表中。
+ A取消屏蔽B成功，B从A的屏蔽列表删除，同时上述负面影响立即全部取消。
+ 将玩家B移除黑名单后，玩家A将重新收到玩家B被移除黑名单之后发送的消息；在加入黑名单的时间段内玩家B所发送的消息将不被玩家A接收，玩家A的聊天记录中只显示将玩家B加入黑名单之前和将玩家B移除黑名单之后所发送的消息；而玩家B的聊天记录中显示所有聊天记录包括被加入黑名单的时间段内所发送的消息。
+ 黑名单上限100人，超出上限后继续屏蔽玩家将出现飘字提示：您的黑名单已满；玩家需要从黑名单中取消屏蔽一个玩家后才能继续将他人加入黑名单。
+ 黑名单的排列顺序为最近拉黑的排在最前面
+ 玩家A与被加入黑名单的玩家B之间的好感度数值不会被清零，若之后恢复好友关系好感度数值将在原来的基础上继续增加。

## 2.5养成
### <font style="color:#000000;">2.5.1</font><font style="color:#000000;">好感度</font>
#### 1) 好感度等级
+ 好友界面“我的好友”、“好友申请”列表中显示好感度等级和进度
+ ~~非好友仅能通过赠礼提高好感度~~
+ 好友之间可以通过每日赠送金币、~~互相赠送礼物~~、一起游戏等行为提高好感度。
+ 好感度等级需要配表控制，暂设最高等级为5级，具体数值需要数值策划进行配置和调试

| **<font style="color:rgb(0,0,0);">Level</font>** | **<font style="color:rgb(0,0,0);">Exp</font>** |
| :---: | :---: |
| <font style="color:rgb(0,0,0);">1</font> | <font style="color:rgb(0,0,0);">1</font> |
| <font style="color:rgb(0,0,0);">2</font> | <font style="color:rgb(0,0,0);">99</font> |
| <font style="color:rgb(0,0,0);">3</font> | <font style="color:rgb(0,0,0);">599</font> |
| <font style="color:rgb(0,0,0);">4</font> | <font style="color:rgb(0,0,0);">3599</font> |
| <font style="color:rgb(0,0,0);">5</font> | <font style="color:rgb(0,0,0);">21099</font> |


#### **2) 好感度获取**
+ 具体方式以及数值根据实际上线功能调整，目前设置的提升好感度方式有：
    1. ~~<font style="color:rgb(0,0,0);">给对方赠送友情礼物，根据礼物所带的好感度增加相应的数值</font>~~
    2. <font style="color:rgb(0,0,0);">休闲大厅一起进行游戏，增加10点好感度</font>
    3. <font style="color:rgb(0,0,0);">双方组队进行排位赛，增加10点好感度，获胜增加额外5点</font>
    4. <font style="color:rgb(0,0,0);">在好友列表界面点击赠送金币按钮，成功赠送金币增加2点好感度</font>
+ 以上2.3.4方式仅限好友之间
+ ~~某些高级礼物全服均可以看到送礼特效~~

#### **3)**** ****好感度标识**
+ 好感度累积到一定程度，会提高好感度等级
+ 不同的好感度等级会在玩家列表中显示不同的图标，如下表所示：

| **好感度等级** | **好感度标识** |
| :---: | :---: |
| 1 | ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612608001-ac4617fc-2015-4c22-be4f-add8087f1ff9.png) |
| 2 | ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612637447-658a8100-571f-4596-af24-77d11cf66a36.png) |
| 3 | ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612644163-a9b9e986-5b38-4870-a717-75e2f2af8f58.png) |
| 4 | ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612649092-72e89b27-eb8f-4441-a7f5-54d08ad2cb38.png) |
| 5 | ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612654809-495bf1e2-e6ff-491f-b8c0-c210e0b7162d.png) |


+ 等级进度通过图标内的颜色填充进行区别![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612724121-39de7da3-f05b-42bb-a582-200e53a497a6.png)→ ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612729626-412d60a2-33b0-4949-bd48-62b46a0b9600.png)→![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725612734645-585ace7c-3a91-4f30-8fc7-19b8ad40bcdb.png)
+ 不同的好感度数值对应图标上不同的进度，进度以高度的百分比计算

### ~~<font style="color:#000000;">2.5.2</font>~~~~<font style="color:#000000;">送礼</font>~~
+ ~~礼物可以赠送给除自己之外的所有玩家~~
+ ~~赠送礼物可增加该玩家人气值以及双方的好感度~~
+ ~~礼物对应的好感度以及人气值数值由配表控制~~
+ ~~赠送礼物双方都可以看到送礼特效~~
+ ~~礼物赠送后若被赠送方在线且不在对局中则可以看到屏幕中央出现礼物特效（离线状态的玩家无法看到，对局中的玩家将在对局结束后开始从头播放礼物特效）。~~
+ ~~赠送方在送出礼物时即可看到礼物播放的特效~~
+ ~~当玩家同时收到多个礼物时，将根据收到礼物的先后顺序依次播放礼物效果，直到播放结束~~
+ ~~当玩家一次性送出多个相同的礼物时，礼物特效将根据送出的礼物数量重复播放多次~~
+ ~~礼物特效播放时右上角显示“x”按钮，点击后可随时关闭~~

# 三、界面说明
## 3.1界面入口
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725613155750-8e5f8f99-770b-4ea5-bf12-2f31f8b4535a.png)

## 3.2主界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725872681262-ddb44b66-27d2-4f3d-a79a-d147e6ba51b9.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734078401813-ebcc5761-d8d9-4544-9dd9-1ed3873fe4e5.png)

| **<font style="color:rgb(0,0,0);">编号</font>** | **<font style="color:rgb(0,0,0);">控件名称</font>** | **<font style="color:rgb(0,0,0);">点击效果</font>** | **<font style="color:rgb(0,0,0);">控件状态</font>** |
| :---: | --- | --- | --- |
| ① | 好友页签 | 点击切换页签显示内容 | 内容：我的好友（默认）、我的玩伴、系统推荐、好友申请、黑名单 |
| ② | 好感度等级 | 无 | 内容：玩家与当前选中玩家的好感度等级、等级经验进度、经验条 |
| ③ | 玩家状态 | 若有追房按钮点击即可进入玩家所在房间，若房间人满了则进入旁观席位。 | 三种状态：<br/>1.在线但不在房间内<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725876859039-84649440-33f3-480a-8276-f57b25a8dcd7.png)<br/>2.在线且在房间内<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725877041955-3589d9dc-a24d-4368-8f40-c3e8a8527709.png)<br/>3.离线<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725877013841-a591d86c-5b43-43f7-98ca-57741f4501cf.png)<br/>+ 时间小于1分钟，表示为“刚刚”；大于1分钟小于1小时，表示为“xx分钟前”；大于1小时小于24小时，表示为“xx小时前”；大于24小时，表示为“xx天前”；大于7天统一显示“7天前”） |
| ④ | 玩家标签 | 无 | 显示玩家个性标签，见[个人信息策划案](https://snh48group.yuque.com/qim4en/xs9kb3/vfqzwnahyz4y59bf)，玩家未设置个性标签则显示暂未设置标签。<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725870834223-85e4e5fd-52b6-4578-8d5e-6c02efd16deb.png) |
| ⑤ | 好友列表 | 1.上下滑动翻阅，右侧显示滚动条，滚动条只作界面进度显示，不可拖动，点击切换当前选中好友。<br/>2.点击备注按钮弹出修改备注弹窗：<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725865612459-58fa36e0-2495-4cef-9dc4-4cb6b287b6df.png)<br/>+ 操作、审核方式与[个人信息策划案](https://snh48group.yuque.com/qim4en/xs9kb3/vfqzwnahyz4y59bf)修改昵称一致。<br/>+ 点击确定后好友列表中改好友昵称位置显示此备注。<br/>3.点击个人信息按钮进入该玩家个人主页，点击返回回到好友界面。<br/>4.点击私聊按钮打开与该玩家的私聊聊天框[聊天策划案](https://snh48group.yuque.com/qim4en/xs9kb3/lel217v70zcyl68i)，若没有则新建聊天框，关闭聊天框后回到该界面。<br/>5.点击赠送金币按钮赠送对方10金币，同时按钮变为已赠送态![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725866939268-7b4af616-83f0-439a-836c-67bd64096684.png)，不可再次点击（详细功能见2.1.3好友交互）。<br/>~~6.点击送礼按钮弹出赠礼弹窗：~~![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1724830622550-1aa1a602-d9f4-4af4-bb2a-0f5e421370cd.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1237%2Climit_0)<br/>7.点击好感度标识弹出好感度获取途径弹窗。 | 内容：头像（头像框）、等级、在线情况、性别、昵称、备注按钮、亲密度等级标识、个人信息按钮、私聊按钮、赠送金币按钮、~~送礼按钮~~。<br/>在线情况：在线是显示“在线”，不在线时显示上次在线时间（时间小于1分钟，表示为“刚刚”；大于1分钟小于1小时，表示为“xx分钟前”；大于1小时小于24小时，表示为“xx小时前”；大于24小时，表示为“xx天前”；大于7天统一显示“7天前”）<br/>亲密度等级标识：显示规则见2.5.1好感度标识。 |
| ⑥ | 搜索控件 | 1.点击调出玩家输入进行搜索，控件变为如下输入态，⑤好友列表显示实时搜索结果。<br/>![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1720074727234-6739401c-1762-4b76-9eea-37616bd35cd8.png)<br/>2.点击右侧关闭按钮，控件恢复默认状态，⑤好友列表恢复默认显示。 | 1.常规态/输入态<br/>2. 无搜索结果时⑤歌曲列表显示为空即可。 |
| ⑦ | 排序控件 | 点击打开下拉列表，可切换排序方式。 | 选项：默认排序、亲密度排序<br/>默认排序：见2.1好友<br/>亲密度排序：按照亲密度降序排序。 |
| ⑧ | 金币数量 | 无 | 内容：金币图标、玩家自己当前持有金币数量 |
| ⑨ | 按钮：领取并回赠 | 点击效果见2.1.3好友交互 | 常规态/按下态 |
| ⑩ | 按钮：删除好友 | 点击后出现确认弹窗，再次确认后可删除对方，同时对方从我的好友内移除，具体见2.1.2删除好友 | 常规态/按下态 |
| ⑪ | 按钮：拉黑好友 | 点击后出现确认弹窗，再次确认后可将对方加入黑名单，同时从我的好友列表内移除，具体见2.4黑名单 | 常规态/按下态 |


## 3.3我的玩伴
## ![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725872836901-9724bc23-4475-41f4-b19b-05cff6cd8080.png)
+ 玩伴人数上限100人，我的玩伴列表顺序默认按最近互动时间排序，即最近有过互动的排在最前面，超过100人后，隐藏互动时间最早的玩家。具体见2.3我的玩伴。
+ 我的玩伴列表信息内容包括：私聊、访问主页、加好友、~~送礼~~，具体功能与主界面一致。
+ 列表最上方显示搜索框和筛选项，搜索框功能与我的好友页签一致，筛选项勾选后，列表中将只保留符合筛选条件的玩家列表，默认勾选男女两个选项。
+ 列表左下角显示拉黑按钮，功能与主界面一致，此处不再赘述。

## 3.4系统推荐
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725872711501-3c99a505-18c6-4cb1-b870-f4a1c685003c.png)

+ 系统推荐列表信息内容包括：私聊、访问主页、加好友、~~送礼~~，修改备注，具体功能与主界面一致。
+ 列表最上方显示搜索框和筛选项，搜索框功能与我的好友页签一致，筛选项勾选后，列表中将只保留符合筛选条件的玩家列表，默认勾选男女两个选项。
+ 列表左下角显示拉黑按钮，功能与主界面一致，此处不再赘述。

## 3.5好友申请
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725873006890-8c464af4-d617-4596-a924-fde856f3de0d.png)

+ 好友申请页签下显示所有向我发出好友申请但我还未进行处理的玩家列表。
+ 好友申请列表信息按钮包括：私聊、查看个人资料、拒绝和同意。
+ 其中私聊和查看个人资料功能与其他页签一致，拒绝和同意按钮点击后可做出相应反馈，点击拒绝按钮后该玩家信息条将从好友申请列表内消失；点击同意按钮后该玩家信息将从好友申请列表内消失同时加入我的好友页签内。
+ 列表最上方显示搜索框和筛选项，搜索框功能与我的好友页签一致，筛选项勾选后，列表中将只保留符合筛选条件的玩家列表，筛选项包括：男、女、同城，默认勾选男女两个选项，可多选。
+ 列表左下角显示拉黑、~~送礼按钮~~，功能与我的好友页签内的按钮功能一致，此处不再赘述。

## 3.5黑名单
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1725874975903-8a4fea9c-5737-49fd-a8d5-0f61ad735994.png)

+ 黑名单页签下显示被加入黑名单的玩家列表，被加入黑名单的玩家B所发送的信息将自动被玩家A屏蔽（包括各频道信息和私聊信息，喇叭信息将不被屏蔽）
+ 按添加黑名单从近到远的时间排序
+ 右侧列表最上方显示提示文字：黑名单内的玩家发送的消息将被自动屏蔽
+ 黑名单页签下的玩家信息列表显示玩家头像、等级、性别、昵称、在线情况， 以及右侧的查看个人资料按钮和取消屏蔽按钮。查看个人信息界面时，追房、私聊、加好友等按钮点击提示“对方已被您拉黑”。
+ 点击取消屏蔽按钮将出现确认弹窗，再次确认后可将玩家从黑名单中移除，被移除黑名单的玩家B将重新出现在玩家A的系统推荐列表中。

# 四、配置表说明
# 五、功能需求清单
# 六、美术需求清单
## 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | | |
| :---: | --- | --- | --- |
| <font style="color:black;">1</font> | <font style="color:black;">性别选择</font> | | |
| <font style="color:black;">2</font> | ~~捏脸~~ | | |
| <font style="color:black;">3</font> | 取昵称 | | |


## 6.2 动效需求
# 七、String需求
| **<font style="color:white;">类别</font>**    | **<font style="color:white;">目标操作</font>**    | **<font style="color:white;">触发条件</font>**    | **<font style="color:white;">提示形式</font>**    | **<font style="color:white;">提示string</font>**    | **<font style="color:white;">stringID</font>**    |
| --- | --- | --- | --- | --- | --- |
|     |     |     |     |     | |
|     |     |     |     |     | |
|     |     |     |     |     | |


若有收获，就点个赞吧



> 原始Excel文档
>
> [系统策划案范例.xlsx](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsx/45413786/1724834067379-b58a3758-86af-409f-b57c-ffbcf6eb5223.xlsx)
>

