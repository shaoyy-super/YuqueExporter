# 一、概述
### 1.1 文档说明
该文档详述了排位赛局内pvp竞技玩法的功能。

### 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/2/10</font> | | 王亚婷 | <font style="color:black;">文档创建</font> |


### 1.3 设计思路
+ 排位赛采用1v1或者2v2的对局方式。
+ 除了传统的计分系统，本pvp玩法新增血条机制，已方血条可受己方和对方的操作影响，增加或者减少；某一方的血条耗空或者音乐结束则对局结束。
+ 新增道具系统，道具可影响己方或对方的血量或分数，影响较小。

# 二、功能说明
### 2.1 整体玩法规则
+ 对局开始后：
    - 若在音乐结束前，有一方血条为空，则对局结束，血条为空的一方判负，另一方判胜。
    - 若音乐结束时，未有一方血条为空，则对局结束，根据双方的分数来判定胜负，分数高的一方获胜，分数低的一方判负。分数按照传统计分系统计算，不受血条机制影响。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739174435096-e180aeb9-a05c-42d5-824d-298d130ec0b1.png)

+ 在2v2对局中，同一方的两人共享分数和血条，分数为两人分数总和，血条会在2.2血条机制中详述。
+ 特殊情况：<font style="color:rgb(64, 64, 64);">若双方在同一操作帧内血条归零，按当前分数决胜负。</font>

### 2.2 血条机制
### 2.2.1 1v1对局血条机制
（下方数值仅为演示规则，具体数值见配置表）

+ 1v1玩法双方初始血量都为m，上限也为m。（m可配置）
+ 评定等级和扣血/回血规则：

| 判定等级 | 己方扣/回血规则 | 对方扣/回血规则 | 连击影响 |
| :---: | :---: | :---: | --- |
| Miss | 单次扣除**2%**血量 | 无 | 连续Miss时，每多**3**次额外扣**1%**（上限3层即最高单次扣**5%**） |
| Good | 单次扣除**1%**血量 | 无 | 触发/保留连击奖励 |
| Great | 单次回复**0.5%**血量 | 无 | 触发/保留连击奖励 |
| Perfect | 单次回复**2%**血量 | 对方扣除**2%**血量 | 触发/保留连击奖励和攻击强化（见下文） |


+ **<font style="color:rgb(64, 64, 64);">连击奖励</font>**
    - <font style="color:rgb(64, 64, 64);">每累计</font>**<font style="color:rgb(64, 64, 64);">20连击</font>**<font style="color:rgb(64, 64, 64);">，回复</font>**<font style="color:rgb(64, 64, 64);">2%</font>**<font style="color:rgb(64, 64, 64);">血量</font>
    - <font style="color:rgb(64, 64, 64);">每连续打出</font>**<font style="color:rgb(64, 64, 64);">5次perfect</font>**<font style="color:rgb(64, 64, 64);">，额外回复</font>**<font style="color:rgb(64, 64, 64);">2%</font>**<font style="color:rgb(64, 64, 64);">血量</font>
+ **攻击强化**
    - <font style="color:rgb(64, 64, 64);">连续打出</font>**<font style="color:rgb(64, 64, 64);">5次Perfect</font>**<font style="color:rgb(64, 64, 64);">，触发 "</font>**<font style="color:rgb(64, 64, 64);">暴击</font>**<font style="color:rgb(64, 64, 64);">" 效果，下一次Perfect攻击额外扣除对方 </font>**<font style="color:rgb(64, 64, 64);">0.5%</font>**<font style="color:rgb(64, 64, 64);"> 血量。</font>
+ **攻击抵消**
    - <font style="color:rgb(64, 64, 64);">若双方在同一个note均打出Perfect，攻击效果互相抵消（双方均不扣血）。</font>

### 2.2.2 2v2对局血条机制
+ 2v2对局中，对局一方两人共享血条，初始血量为n，上限也为n。（n可配置）
+ 扣血/回血规则和1v1基本一致，同一方两人的操作分开判定，共同影响血条，最终血条变化量为双方四人对血条的变化量叠加。

举例：下表为同一个note，AB双方四名玩家对血条的影响，则此note后A方的血条变化量为+x1-x2-x3-x4		B方血条变化量为-y1+y3+y4。

|  | A方血条 | B方血条 |
| :---: | :---: | :---: |
| 玩家1（A方） | +x1 | -y1 |
| 玩家2（A方） | -x2 | - |
| 玩家3（B方） | -x3 | +y3 |
| 玩家4（B方） | -x4 | +y4 |


+ 在**攻击抵消**规则中，只有双方四人均为perfect才会抵消攻击效果。

### 2.3 道具系统
+ 此道具系统包含生存、攻击、干扰三类道具，道具在排位对局内可影响对局双方的血量和分数。
+ 排位赛主界面新增道具装备入口，玩家可以点击打开道具装配界面选择需要带进对局的道具，每场对局最多可带3个道具（不同种），对局结束未使用的道具会返还（手动使用道具）。在此界面玩家可直接跳转商城对局界面购买，此外道具还会投放在通行证、活动、月卡等各处。
+ 道具汇总：

| 道具名称 | 道具类型 | 自动/手动触发 | 道具效果 |
| :---: | :---: | :---: | --- |
| Miss消除剂 | 生存类 |  | 抵消n次miss判断，改为good |
|  | 生存类 |  | 血量低于x%时自动回复10%血量 |
|  | 生存类 |  | 开局时增加10%血量上限 |
|  | 生存类 |  | 使用后，后续10个note受到的伤害减免40% |
| 逆袭图腾 | 生存类 |  | 血量首次低于对方25%，己方Miss扣血减少至2%，每20连击额外回复1%血量，直至血量反超或对局结束 |
| 共振屏障 | 攻击类 |  | 对方发动Perfect攻击强化时，抵消本次伤害，并将50%伤害反弹给对手 |
| 致命节拍 | 攻击类 |  | 连续打出n次Perfect后，下一次Perfect攻击造成3倍扣血 |
|  | 攻击类 |  | 将n个great修改为perfect |
| 幻影音符 | 干扰类 | 手动 | 使用后在对手谱面中生成3个特殊干扰Note（不影响实际判定），干扰Note命中不扣血，但误击会打断对手连击计数 |
| 血色狂欢 | 干扰类 |  | 使用后在对手谱面中生成血色闪烁的特殊Note，命中立即扣除n%血量 |


+ **防御机制**
    - 当玩家血量 ≤** 30%** 时，触发 "**防御姿态**"：对方攻击扣血量减少** 20%**（如Perfect攻击从 **2%** 降至 **1.6%**）。
+ **血量差距保护**
    - <font style="color:rgb(64, 64, 64);">当一方血量低于对方 </font>**<font style="color:rgb(64, 64, 64);">20%</font>**<font style="color:rgb(64, 64, 64);"> 时，触发 </font>**<font style="color:rgb(64, 64, 64);">"劣势保护"</font>**<font style="color:rgb(64, 64, 64);">：</font>
        * <font style="color:rgb(64, 64, 64);">己方Miss扣血量减少 </font>**<font style="color:rgb(64, 64, 64);">20%</font>**<font style="color:rgb(64, 64, 64);">（如Miss从 </font>**<font style="color:rgb(64, 64, 64);">3%</font>**<font style="color:rgb(64, 64, 64);"> 降至 </font>**<font style="color:rgb(64, 64, 64);">2.4%</font>**<font style="color:rgb(64, 64, 64);">）；</font>
        * <font style="color:rgb(64, 64, 64);">对方Perfect攻击额外减少 </font>**<font style="color:rgb(64, 64, 64);">0.5%</font>**<font style="color:rgb(64, 64, 64);"> 扣血（如Perfect攻击从 </font>**<font style="color:rgb(64, 64, 64);">2%</font>**<font style="color:rgb(64, 64, 64);"> 降至 </font>**<font style="color:rgb(64, 64, 64);">1.5%</font>**<font style="color:rgb(64, 64, 64);">）。</font>

### 2.3 数值养成
随着玩家等级的提升，在排位赛玩法的血条系统和道具系统中会有一些养成体验：

| 玩家等级 | 血量上限 | 道具槽位 |
| :---: | :---: | :---: |
| 1~10 | 100 | 2 |
| 10~20 | 105 | 3 |
| 20~30 | 110 | 3 |
| 30~40 | 115 | 4 |
| 40~50 | 120 | 4 |
| 50~60 | 125 | 5 |


# 三、界面说明
完整排位赛界面说明部分见[【玩法】排位赛策划案](https://snh48group.yuque.com/qim4en/xs9kb3/bbheu5tk0y3sv6as)，本文仅描述变更以及新增界面部分。

## 3.1道具
### 3.1.1入口
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740453646941-1d79ab45-4e7c-46e1-88dc-7b6b8ca2b50d.png)

+ 排位赛主界面新增道具槽位，槽位数量随着玩家等级的提升为2~5个不等。
+ 已配置道具槽位显示道具图标，鼠标悬停在图标上显示该道具详情卡片，道具卡片在通用卡片的基础上新增主动/被动标签，需要ui另外设计。鼠标移开卡片消失。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740453217914-e46f23ee-13f7-4c28-a609-257c5f6f82be.png)

+ 拖动已配置道具图标可将道具移到其他槽位，若该槽位已有道具则将交换两个道具的位置，对局内道具的顺序与此处顺序保持一致。
+ 点击槽位任意位置打开3.1.2道具配置弹窗。
+ 注意：某场对局结束后，若装配道具数量不为0，该道具仍装备在原槽位；若装配道具数量为0，则从该槽位上移除。

### 3.1.2道具配置
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740468188160-bf7a352f-c6d5-4181-b48d-a1d5779366c1.png)

1. **【页签】道具类型页签**
+ 内容：包括四个页签，分别为全部、生存、攻击、干扰，全部页签显示全部道具，后三个页签则只显示对应类型道具。默认显示全部页签。
+ 状态：选中态/未选中态。
+ 交互：点击切换不同页签，以及对应显示内容。
2. **【控件】道具库**
+ 内容：道具库内每个道具显示信息与背包物品一致，包含道具名、道具图标、道具数量、道具品质；道具排序：拥有情况>道具品质>道具id（所有道具玩家当前拥有排在前，当前未拥有排在后；拥有和未拥有的道具都按照品质从高到低排序；同品质道具按照策划配表顺序排序即可。）
+ 状态：当前拥有状态/当前未拥有状态（置灰），当前选中状态（打勾）。
+ 交互：
    - 鼠标悬停（移动端为长按）所有道具上都弹出详情卡片，卡片在通用卡片的基础上新增主动/被动标签。
    - 点击当前拥有道具可切换选择状态，选中道具会装备在下方道具栏中（按空槽位顺序填充，比如1、3槽位为空，则填充在1槽位中），若下方道具栏已满玩家点击当前未选中道具则飘窗提示“道具栏已满”。注：点击未拥有道具，即置灰道具，无反应。
3. **【控件】道具栏**
+ 内容：槽位个数随着玩家等级的提升为2~5个不等，显示已装备道具的图标。
+ 状态：已装配道具状态/空槽位状态
+ 交互：
    - 同样鼠标悬停（移动端为长按）道具图标弹出详情卡片。
    - 点击道具图标可将该道具从栏位移除，同时取消该道具在道具库中的选中状态；点击空槽位无反应。
    - 拖动已配置道具图标可将道具移到其他槽位，若该槽位已有道具则将交换两个道具的位置，对局内道具的顺序与此处顺序保持一致。
4. **【按钮】确定**
+ 内容：确定
+ 状态：常规态/按下态
+ 交互：点击确定保存当前选择，并关闭弹窗。
5. **【按钮】关闭**
+ 内容：确定
+ 状态：常规态/按下态保存
+ 交互：点击关闭弹窗，不保存此次操作。

## 3.21v1对局
### 3.2.1对局展示
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740547265470-11007d60-7b8e-4f59-abc2-772aee949c38.png)

1. **【控件】对局信息**
+ 内容：对局双方玩家信息：玩家头像、性别、昵称、等级、玩家段位图标、段位名、玩家本次对局携带的道具图标；对局玩法名称；红队/蓝队信息（玩家看自己始终在左边，即蓝色方，对方在红色方）。
+ 状态：单一状态
+ 交互：鼠标悬停（移动端为长按）道具图标上弹出详情卡片，己方和对方的道具详情玩家都能看到。 <font style="color:#ECAA04;">这里在获取途径里前往如何反馈。</font>
2. **【特效】VS**
+ 内容：时长约1.5秒，单次播放的动效
+ 交互：不可交互
+ 参考：[vs动效.mp4](https://snh48group.yuque.com/attachments/yuque/0/2025/mp4/45413786/1740552015931-8cdaafc0-5d46-49cb-849b-9ac7801a9888.mp4)
3. **【角色模型】双方角色展示**
+ 内容：双方角色模型 <font style="color:#ECAA04;">是否是固定动作？需不需要提特殊动作需求？</font>
+ 状态：单一状态
+ 交互：不可交互
4. **【控件】聊天入口**
+ 内容：接入等待大厅聊天入口即可
+ 状态：单一状态
+ 交互：点击打开聊天面板的当前页签，见[【基础】聊天系统策划案（传统）](https://snh48group.yuque.com/qim4en/xs9kb3/lel217v70zcyl68i)

此界面需要进场效果，参考[vs动效.mp4](https://snh48group.yuque.com/attachments/yuque/0/2025/mp4/45413786/1740552015931-8cdaafc0-5d46-49cb-849b-9ac7801a9888.mp4)，效果和VS动效播完等待1~2秒进入3.2.2ban歌界面。

### 3.2.2ban歌
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740556830222-9405321a-d643-4ba5-a5a9-abf021fbb431.png)

1. **【控件】对局玩法+倒计时**
+ 内容：本场对局的玩法名称以及10秒倒计时的实时秒数显示
+ 状态：单一状态
+ 交互：不可交互
2. **【文本】选择禁用歌曲**
+ 内容：“选择禁用歌曲”，需要显眼
+ 状态：单一状态
+ 交互：不可交互
3. **【控件】歌曲列表**
+ 内容：包含三首歌，每首歌的信息包括：歌曲名、歌手名、歌曲、歌曲时长、歌曲封面、谱面星级。
+ 状态：未选中状态/选中状态/禁用状态
+ 交互：点击切换歌曲选择，单选。
4. **【按钮】放弃禁用**
+ 内容：放弃禁用
+ 状态：常规态/按下态
+ 交互：点击跳转选择完毕界面且不保留玩家的歌曲选择，“放弃禁用”和“选择完毕”按钮消失，在此界面玩家可以看到对方的选择结果，若有歌曲被禁用需要显示禁用标识。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739867729213-521a3249-88de-4ae0-812b-7a62eee8db67.png)

5. **【按钮】选择完毕**
+ 内容：选择完毕
+ 状态：常规态/按下态
+ 交互：当玩家选中某一首歌之后，点击此按钮完成选择并跳转选择完毕界面，“放弃禁用”和“选择完毕”按钮消失，在此界面玩家可以看到对方的选择结果，若有歌曲被禁用需要显示禁用标识。若玩家未选中任何歌曲时点击此按钮，则提示“当前未进行歌曲选择”。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739867729213-521a3249-88de-4ae0-812b-7a62eee8db67.png)

若倒计时结束时玩家未选择“放弃禁用”和“选择完毕”，则视为玩家自动放弃禁用。

倒计时结束时在未被禁用的歌曲中随机一首歌曲作为对局歌曲，其他两首歌消失（需要动效），对局歌曲移到中间进行展示；此时界面上方倒计时控件开始倒计时五秒，且文本提示改为“即将开始对局”。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739867771343-ad3b7b1a-3111-4588-8ba4-b13ae5d28b42.png)

### 3.2.3打歌
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740714468099-2299ee82-5eb0-494b-a3e3-e72e4d59dd8b.png)

1. **【控件】双方玩家信息**
+ 内容：玩家头像、携带道具以及使用情况、实时血条、实时分数
+ 状态：道具需要未使用/已使用两种状态（已使用状态置灰）；血条在血量低于n时需要特殊表示如变红。
+ 交互：同样鼠标悬停（移动端为长按）道具图标上弹出详情卡片
2. **【文本】歌曲信息**
+ 内容：歌曲封面、谱面星级、歌曲实时进度
+ 状态：封面周围的蓝边需要能实时显示歌曲当前播放的进度
+ 交互：不可交互
3. **【控件】道具栏**
+ 内容：道具图标（pc端需要显示道具快捷键，默认为1、2、3、4、5），道具栏位置需供玩家自己调整（可后续开发），初始默认位置可商榷再定。
+ 状态：未装备/已装备未使用/已装备已使用
+ 交互：
    - 主动道具点击生效，被动道具点击无反应
    - 道具生效时需要文字提示，文字提示需要ui设计表现，位置常驻，玩家对技能栏的位置调整不影响文字提示位置。

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740714569664-0f9abcc3-fe98-4a3b-be38-1d78b6133be9.png)

特殊道具生效时需要特殊表现效果：

| 道具名称 | 道具效果 | 表现效果 |
| :---: | --- | --- |
| Miss消除剂 | 抵消n次miss判断，改为good |  |
|  | 血量低于x%时自动回复10%血量 |  |
|  | 开局时增加10%血量上限 |  |
|  | 使用后，后续10个note受到的伤害减免40% |  |
| 逆袭图腾 | 血量首次低于对方25%，己方Miss扣血减少至2%，每20连击额外回复1%血量，直至血量反超或对局结束 |  |
| 共振屏障 | 对方发动Perfect攻击强化时，抵消本次伤害，并将50%伤害反弹给对手 |  |
| 致命节拍 | 连续打出n次Perfect后，下一次Perfect攻击造成3倍扣血 |  |
|  | 将n个great修改为perfect |  |
| 幻影音符 | 使用后在对手谱面中生成3个特殊干扰Note（不影响实际判定），干扰Note命中不扣血，但误击会打断对手连击计数 |  |
| 血色狂欢 | 使用后在对手谱面中生成血色闪烁的特殊Note，命中立即扣除n%血量 |  |


4. **【角色模型】双方玩家角色**
+ 内容：双方角色模型，动作调用配置的官方歌曲舞蹈动作即可。
+ 状态：单一状态
+ 交互：无

谱面ui此处未绘制，根据不同玩法模式显示不同谱面ui即可。

### 3.2.4结算
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740723940524-e49af7ed-08ad-4343-81cf-1beba1a92141.png)

1. **【控件】对局结算**
+ 内容：中间控件上的文本变为“对局结算”
+ 状态：单一
+ 交互：无
2. **【控件】道具**
+ 内容：这里显示此对局玩家携带的道具图标，以及使用情况，已使用的道具图标置灰。
+ 状态：单一
+ 交互：同样鼠标悬停（移动端为长按）道具图标上弹出详情卡片
3. **【角色模型】双方角色**
+ 内容：胜利方和失败方的角色要播对应动作。<font style="background-color:#FBDE28;">（需提动作需求）</font>
+ 状态：单一
+ 交互：无
4. **【文本】胜利/失败**
+ 内容：胜利和失败文本需要在表现效果如字色上作区分
+ 状态：单一
+ 交互：无
5. **【控件】分数**
+ 内容：玩家本局分数、本局评价、添加好友按钮（玩家本人和玩家好友分数后不需要显示此按钮）
+ 状态：单一
+ 交互：同样鼠标悬停（移动端为长按）道具图标上弹出详情卡片
6. **【角色模型】双方角色**
+ 内容：胜利方和失败方的角色要播对应动作。<font style="background-color:#FBDE28;">（需提动作需求）</font>
+ 状态：单一
+ 交互：无



## 3.3 2V2对局
### 3.3.1组队
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739933981286-c0538640-cfe7-40e5-ab43-fbeb7c27784c.png)

### 3.3.2对局展示
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739936961467-731883ed-52ef-4d72-a7a4-bd9595dbb5fe.png)

### 3.3.3ban歌
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739936980019-497fbad9-a9ca-4bd2-be96-e5bc0c5aaa48.png)

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739936998243-f4c91024-9f8c-49bf-a0cc-71e26f5eeac2.png)

### 3.3.4打歌
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1740031155048-fb5674fa-fa45-4ba6-a6cb-fb7b8dff41f4.png)

### 3.3.4结算
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1739953839870-af7d12c8-080e-4157-aefa-fbd48c1bb283.png)

# 五、配置表说明
# 六、功能需求清单
# 七、美术需求清单




