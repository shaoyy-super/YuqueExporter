# 一、概述
### 1.1 文档说明
该文档详述了排位赛系统策划案，目的是给予玩家完全公平的pvp打歌体验和良好的社交体验。

### 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/11/25</font> | | 王亚婷 | <font style="color:black;">文档创建</font> |


### 1.3 设计思路
+ 排位赛设计通过公平竞技的方式，提供给玩家不断提升自我打歌水平的途径。
+ 局外采用赛季制的形式，并通过<font style="color:rgb(51,51,51);">不同赛季包装，提供给玩家不同的赛季感受及奖励追求。</font>
+ <font style="color:rgb(51,51,51);">局内增加了血条机制，给予玩家更加紧张刺激的游戏对局体验。</font>
+ <font style="color:rgb(51,51,51);">全程提供很多玩家与其他参赛者的社交互动机会，给予玩家更好的社交体验。</font>

# 二、功能说明
### 2.1 局外
#### 2.1.1赛季
1. **赛季主题**
+ <font style="color:rgb(51,51,51);">以赛季为周期开放，每个赛季有单独的主题。</font>
+ <font style="color:rgb(51,51,51);">本次针对测试，赛季主题名称“先锋S1测试”。</font>
2. **<font style="color:rgb(51,51,51);">赛季开启和关闭</font>**
+ <font style="color:rgb(51,51,51);">开启等级限制暂定10级，需可配置，可设置为1级，即可设置为默认开启；需支持单人匹配和组队匹配分别配置调控开启限制。</font>
    - <font style="color:rgb(51,51,51);">若配置了等级限制，且玩家未达到指定等级，则玩家点击入口后，弹出提示信息，告知玩家解锁等级要求。</font>
    - <font style="color:rgb(51,51,51);">若配置了等级限制，玩家达到指定等级，则玩家点击入口后，可直接进入功能主界面。</font>
+ <font style="color:rgb(51,51,51);">赛季周期：整个赛季包括比赛时间和领奖时间</font>
+ <font style="color:rgb(51,51,51);">开启时间限制：赛季有开启时间限制</font>
    - <font style="color:rgb(51,51,51);">赛季整体时间：由配置确定，配置需要精确到秒，举例：2024年6月22日08时00分00秒~2024年9月22日23时59分59秒</font>
    - <font style="color:rgb(51,51,51);">在赛季整体时间之外的时间，界面在显示赛季时间的位置显示“赛季未开启”，点击匹配按钮时提示“赛季未开启”，点击战绩、排行榜、商店、冲段均显示截至上赛季为止的内容。界面段位徽章显示玩家上赛季结算信息。</font>
    - <font style="color:rgb(51,51,51);">每日开启时间：由配置确定，配置需要精确到秒，暂定时间为每日：09时00分00秒~24时00分00秒</font>
    - <font style="color:rgb(51,51,51);">在赛季整体时间中，但在每日开启之间之外时，界面在显示赛季时间的位置正常显示赛季时间，点击匹配按钮时提示“</font>当前排位赛未开启，请在开启时间内进行匹配<font style="color:rgb(51,51,51);">”。点击战绩、排行榜、商店、冲段均正常显示。界面段位徽章正常显示。</font>
    - <font style="color:rgb(51,51,51);"> 具体开启和关闭的介绍见下表：</font>

| 阶段 | 说明 | 功能 |
| --- | --- | --- |
| 未解锁 | 玩家十级之前 | 入口锁定状态，无法点击进入；<br/>商城中显示兑换页签，页签下商品空  |
| 未开启<br/> | 游戏出错 | 点击排位赛入口，跳出提示：“暂未开启”；<br/>商城中显示兑换页签，页签下商品空 |
| 跳舞阶段 | 赛季日期和时刻内 | 赛季时间位置正常显示赛季时间；<br/>排位赛说明弹窗可正常点开；<br/>兑换、排行、战绩正常点入；<br/>冲段可点入，显示本赛季领取记录；<br/>段位徽章显示为实时段位；<br/>段位歌曲说明弹窗的问号图标显示，可点开歌曲弹窗；<br/>匹配按钮正常显示和匹配 |
| 休赛期 | 赛季日期内，比赛时刻外 | 赛季时间位置正常显示赛季时间；<br/>排位赛说明弹窗可正常点开；<br/>兑换、排行、战绩正常点入；<br/>冲段可点入，显示本赛季领取记录；<br/>段位徽章显示为实时段位；<br/>段位歌曲说明弹窗的问号图标显示，可点开歌曲弹窗；<br/>匹配按钮正常显示，但是点击后提示“当前不在匹配时间段” |
| 发奖阶段（二测） | 本次测试的最后一天 | 赛季时间位置显示“休赛期”；<br/>排位赛说明弹窗可正常点开；<br/>兑换、排行、战绩正常点入，显示对应赛季内容；<br/>冲段可点入，显示本赛季领取记录；<br/>段位徽章显示为赛季最后的段位；<br/>段位歌曲说明弹窗的问号图标显示，可点开歌曲弹窗；<br/>匹配按钮变灰 |


+ <font style="color:rgb(51,51,51);">系统广播</font>
    - <font style="color:rgb(51,51,51);">排位赛开启期间需要每隔N小时广播一次，N可配置</font>
    - <font style="color:rgb(51,51,51);">展示方式使用系统广播默认格式即可，需要支持特殊字体强调显示</font>
    - <font style="color:rgb(51,51,51);">广播格式包括：</font>
        * <font style="color:rgb(51,51,51);">开启期间，系统广播内容需要覆盖开启时间</font>
        * <font style="color:rgb(51,51,51);">临近结束（即，赛季末，具体提前多少目前没想好，可以是配置一个广播更换时间）广播内增加赛季即将结束的内容</font>
+ <font style="color:rgb(51,51,51);">赛季结束特殊处理：若玩家在赛季结束时间时，仍在排位赛局内</font>
    - <font style="color:rgb(51,51,51);">则玩家完成本次对局且正常结算后，提示告知赛季结束</font>
    - <font style="color:rgb(51,51,51);">且本局得分不会计入本赛季内，不累计到新赛季内</font>

#### 2.1.2段位
+ 总共9个大段位
+ 每个大段位对应若干小段位，每个小段位对应若干星级数。排位赛获胜获得积分，积分达到上限升星，多余积分可以累积到下一个星。星数达到小段星数上限，提升小段。小段达到上限，提升大段。达到传奇段位不再设定小段，不停的累计星数，无上限。传奇段位30星，达成不朽段位。

| 段位名称 | 小段 | 每小段星数 | 每颗星积分 |
| :---: | :---: | :---: | :---: |
| 青铜练习生 | Ⅲ | 1 | 10 |
| 青铜练习生 | Ⅱ | 1 | 10 |
| 青铜练习生 | Ⅰ | 1 | 20 |
| 白银偶像 | Ⅲ | 2 | 30 |
| 白银偶像 | Ⅱ | 2 | 30 |
| 白银偶像 | Ⅰ | 2 | 30 |
| 黄金之星 | Ⅲ | 3 | 30 |
| 黄金之星 | Ⅱ | 3 | 30 |
| 黄金之星 | Ⅰ | 3 | 30 |
| 流行铂金 | Ⅲ | 3 | 30 |
| 流行铂金 | Ⅱ | 3 | 30 |
| 流行铂金 | Ⅰ | 3 | 30 |
| 久远钻石 | Ⅴ | 4 | 30 |
| 久远钻石 | Ⅳ | 4 | 30 |
| 久远钻石 | Ⅲ | 4 | 30 |
| 久远钻石 | Ⅱ | 4 | 30 |
| 久远钻石 | Ⅰ | 4 | 30 |
| 音舞大师 | Ⅴ | 4 | 40 |
| 音舞大师 | Ⅳ | 4 | 40 |
| 音舞大师 | Ⅲ | 4 | 40 |
| 音舞大师 | Ⅱ | 4 | 40 |
| 音舞大师 | Ⅰ | 4 | 40 |
| 乐坛王者 | Ⅴ | 5 | 40 |
| 乐坛王者 | Ⅳ | 5 | 40 |
| 乐坛王者 | Ⅲ | 5 | 40 |
| 乐坛王者 | Ⅱ | 5 | 40 |
| 乐坛王者 | Ⅰ | 5 | 40 |
| 永恒传奇 | 不显示小段 | 不限星数 | 50 |
| 不朽巅峰 | 不显示小段 | 传奇30星达成不朽 | 50 |




#### 2.1.3奖励
+ 奖励包括赛季任务和冲段奖励两个部分
+ 赛季任务为通行证+任务的形式，玩家通过完成每周任务和本期任务获取通行证经验代币从而提升通行证等级，每提升一级通行证可获取相应的奖励。
+ 冲段奖励即玩家本赛季首次达到某个小段位即可获取对应的奖励，若玩家继承了上个赛季的段位，则一次可解锁玩家当前段位以下的多个奖励。

#### 2.1.4排行榜
+ 分为本服排行和好友排行两个榜。
+ 根据玩家段位积分进行排序，本服榜显示前100名。
+ 排行榜除了显示段位数据还需要显示星级数。
+ 玩家本人排名若在1000名以后则显示未上榜。
+ 当玩家未解锁排位赛，积分默认为0，不显示段位徽章；当玩家已解锁排位赛，积分即使为0，段位也是青铜起。

#### 2.1.5兑换商店
+ 排位赛对局或者达成段位奖励可以获得竞技币
+ 竞技币可以在商城的兑换页签兑换特殊道具

#### 2.1.6排位赛玩法
+ 排位赛分单人赛和组队赛两种玩法，单人赛为四人对局的普通模式，组队赛为2v2的组队模式。
+ 两种玩法使用同一个排位赛积分。
+ 组队赛可以邀请自己的好友、玩伴或者任意统一频道的大厅其他在线的玩家，组队加入匹配。也可以自己单人加入组队匹配，系统会自动匹配队友。

#### 2.1.7继承和重置
+ 以下内容下赛季会部分继承
    - 玩家段位会部分继承
    - 玩家熟练度会部分继承
+ 继承表现
    - 玩家在新赛季点入排位赛界面，继承段位弹出居中放大显示，并显示文字“您上赛季结算段位为xx，本赛季继承xx段位”
    - 点击空白位置关闭，排位赛主界面徽章上方显示“进行任意一场排位赛激活本赛季”。
    - 玩家以继承段位进行排位，排位赛结算后，正常计算积分增减和进行晋级/降级赛的赛事并进行升降段。
    - 退出对局后，跳出继承段位弹窗和继承段位前的所有升段奖励。弹窗显示“您已激活赛季“赛季主题”，请收下奖励。”
    - 点击关闭继承段位弹窗，如果玩家在之前段位上升至新段位，则按顺序跳出新段位升段提示弹窗和奖励。如果玩家在之前段位不变或降段，界面无特殊显示。

### 2.2 局内
#### 2.2.1玩法
+ 每个赛季支持的玩法由配置控制，需要支持当前全部的玩法，且后续新增玩法也可拓展
+ 暂支持太鼓、流星、传统三个玩法。
+ 玩家需选择一个玩法进行匹配。选择玩法数量需设置为可配置，方便后续调整。
+ 需要有容错处理：若配置错误导致玩法识别失败，或未配置等情况，需要支持一个默认玩法，保证主流程顺畅

#### 2.2.2歌曲
+ 曲库筛选：赛季歌曲曲库的筛选需要契合主题，涵盖各个难度星级。
+ 曲库划分：不同段位对应匹配歌曲的难度星级区间不同（需数值进一步设计）

| 段位 | 最低难度歌曲 | 最高难度歌曲 |
| :---: | :---: | :---: |
| 青铜 | 1 | 3 |
| 白银 | 2 | 4 |
| 黄金 | 3 | 6 |
| 白金 | 4 | 7 |
| 钻石 | 5 | 8 |
| 大师 | 6 | 9 |
| 王者 | 7 | 10 |
| 传奇 | 8 | 10 |
| 不朽 | 8 | 10 |


#### 2.2.3熟练度
+ 玩家增加熟练度Proficiency属性。
    - Proficiency初始值为1300，可配置
    - 最小值为0，不会出现负数
    - 最大值为无上限，可配置
+ 熟练度等级
    - 不同的熟练度对应不同的熟练度等级

| 等级 | 熟练度下限 | 熟练度上限 | K值 |
| :---: | :---: | :---: | :---: |
| 1 | 0 | 1300 | 32 |
| 2 | 1301 | 1400 | 32 |
| 3 | 1401 | 1600 | 32 |
| 4 | 1601 | 1700 | 32 |
| 5 | 1701 | 1800 | 32 |
| 6 | 1801 | 1900 | 32 |
| 7 | 1901 | 2000 | 32 |
| 8 | 2001 | 2100 | 32 |
| 9 | 2101 | 2200 | 32 |
| 10 | 2201 | 2400 | 32 |
| 11 | 2400 | 9999999 | 32 |


+ 熟练度计算公式
    - 玩家A结算后的熟练度Proficiency=Pa + k（s-（1/（1+10^（（Pb-Pa）/400））））
    - Pa：玩家A的对局前的值
    - Pb：根据Pa玩家的对局排名按照下表选择PB的值。	

| Pa=第1名的赛前熟练度Proficiency | Pb=第4名的赛前熟练度Proficiency |
| :--- | :--- |
| Pa=第2名的赛前熟练度Proficiency | Pb=第3名的赛前熟练度Proficiency |
| Pa=第3名的赛前熟练度Proficiency | Pb=第2名的赛前熟练度Proficiency |
| Pa=第4名的赛前熟练度Proficiency | Pb=第1名的赛前熟练度Proficiency |


    - K：K为Pa所在PROFICIENCY阶段配置表中的K值。
    - S为胜负参数，胜=1，负=0。
        * 玩家胜利时熟练度Proficiency最少增加1。
        * 玩家失败时熟练度Proficiency最少减少1。
        * 熟练度Proficiency出现小数时四舍五入。
    - 对局结算时，单人排位排名1-3名算胜，4-5名算负；组队排位时1-2队算胜、3队算负。
    - 该胜负只做Proficiency公式中的S值时使用，不需要进行储存和显示。

#### 2.2.4匹配机制
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736144359542-55333f41-c2de-4351-aff2-a0eb7f7b562d.png)

+ 按玩家打歌熟练度进行匹配
+ 未参加过排位赛的玩家熟练度以基础值计
+ 玩家可邀请所有段位，以及未参加过排位赛的关注一起进行匹配，匹配对应的对手以及歌曲则以玩家邀请的队伍整体熟练度平均值进行计算
+ 当玩家点击匹配时优先匹配与自己熟练度Proficiency上下一定范围内的玩家。
+ 当玩家匹配时间超过扩展时间时，需要向上下熟练度数值进行扩展。扩展频率和幅度可配置。
+ 匹配到熟练度相同区间的玩家，再匹配玩家的歌曲上下限是否有重合。
+ 10s后匹配不到，自动加入NPC与玩家匹配，时间可自由配置
+ 匹配中屏蔽其他系统提示框的弹出
    - 弹框有弹出队列，若允许情况下，根据弹出优先级在结束排位赛或取消匹配后依次弹出。
    - 若为邀请类处理，则统一在后台进行倒计时，若在倒计时结束按照超时处理。若超时前结束排位赛或取消匹配，正常弹出。
+ 匹配成功直接进入对局
+ 匹配失败弹出匹配超时弹框，并将玩家从排位赛匹配队列剔除
+ 歌曲和玩法选择 
    - <font style="background-color:#FBDE28;">玩家进入匹配后，系统自动在所有玩家选择的玩法的交集中随机出本局的玩法（存疑）</font>
    - 此随机阶段为系统后台操作，不进行显示
+ 玩法确定后，进入选歌环节
    - 显示本局对局玩法
    - 显示歌曲数量为5首。
    - 选歌环节有倒计时，玩家可在倒计时时间内选任意一首歌ban掉，点击提交确认歌曲
    - 玩家提交歌曲前，无法看到其他玩家的选择；玩家提交歌曲后，可看到其他玩家的选择。
+ 四名玩家均完成选歌后，自动进入下一环节
+ 选歌倒计时时间结束后，无论玩家是否选择，都将进入下一环节
+ 选歌结束后，备选歌曲为为亮态。系统在所选歌曲中随机一首作为本场对局歌曲
+ 如果没有任何玩家选择歌曲，则系统在全部五首歌中随机
+ 随机完成后，需对本局最终选定歌曲进行展示。

#### 2.2.5机器人
+ 事先配置好一批NPC机器人，供玩家匹配
+ 机器人的外观属性包括以下
    - 昵称：事先配置好的昵称
    - 头像：系统随机在网络头像图片库中进行选取
    - 外观：事先配置好的服饰
    - 段位：在保证玩家体验感受的前提下，随机到的机器人设定段位为接近玩家的段位。
+ 局内表现
    - 机器人的操作判定由四个参数控制：击中按键概率，击中按键中打中SP的概率，打中P的概率和打中Greate的概率。
    - 根据玩家当前赛季胜率判定，匹配到的机器人能力，若玩家胜率较低，则匹配到的机器人较弱；若玩家胜率处于中间水平，则匹配到的机器人能力适中较大；若玩家胜率较高，则匹配到的机器人能力较强。通过配置来控制以上四种的数值
+ 在没有段位玩家操作平均水平统计的情况下，按照较弱机器人的能力来匹配，保证玩家前期体验
+ 历史战绩查看信息特殊处理：
    - 由于是机器人，故玩家点击机器人进行信息查看时，提示该玩家非同服，无法查看，名次结算界面的加好友选项的位置无加好友按钮，显示“不同大区”字样。

#### 2.2.6结算
+ 结算规则
    - 基础积分：玩家每局排位对局结束后可以获得相应的积分，积分名称需结合游戏和排位赛世界观具体设计。
+ 每个阶段各个排名的积分增减数值不同，由配置确定，可动态调控。
+ 单人排位各段位名次对应分数变化：

| 段位 | 第一名 | 第二名 | 第三名 | 第四名 |
| :---: | :---: | :---: | :---: | :---: |
| A | 10 | 5 | 3 | 0 |
| B | 10 | 5 | 2 | -2 |
| C | 10 | 5 | 1 | -6 |
| …… | 10 | 5 | 1 | -8 |


+ 组队排位各段位名次对应分数变化：

| 段位 | 胜利 | 失败 |
| :---: | :---: | :---: |
| A | 10 | 5 |
| B | 10 | 3 |
| C | 10 | 2 |
| …… | 10 | 1 |


+ 若平分，则几方排名一致，取较高的名次，积分也按此排名计算。
+ 每局根据玩家不同表现，玩家会获得额外奖励积分。不同奖励对应积分值不同，由配置确定，可动态调控

| 条件 | 积分 |
| :---: | :---: |
| 连胜3场 | 1 |
| 连胜5场 | 1 |
| 连胜10场 | 2 |
| 战胜3名段位高于自己的玩家 | 1 |


+ 积分数值上限为：999999999，达到上限后不再累计数值
+ 段位结算
    - 升级/星：
        * 当玩家一场游戏结束后，玩家积分累计达到上限时，玩家的段位等级提升，
        * 升级后玩家溢出的积分会继续增加。
    - 降级/星：
        * 当玩家一场游戏结束后，扣掉积分后，低于当前段位等级要求时，则玩家段位降低。
        * 黄金及以下段位不扣积分
        * 玩家背包里有积分保护卡，不扣分，自动扣除一个积分保护卡
        * 积分则不会扣至0以下。
        * 降级时溢出的积分会继续降低。
        * 例，玩家A当前等级为青铜1，积分为10，青铜2升青铜1需要100积分，本次游戏后积分扣除20，则玩家结算后状态为青铜2，积分90
    - 根据玩家积分变更，计算玩家段位变化
+ 名次结算
    - 歌曲信息展示
        * 展示歌曲名、歌手名、歌曲难度星级、歌曲模式
+ 3D形象展示
    - 单人排位，界面显示玩家自己的3D形象
    - 2v2排位，界面显示玩家和队友2人的3d形象
    - 根据玩家胜负显示不同的动作，需要区分男女性别设计动作



+ 玩家名次排序（单人）：
    - 按照得分从高到低降序排列
        * 相同得分名次一致，排名位置上下按照先后到达当前得分的顺序降序
        * 若2或2名以上玩家单局0分或得分顺序一致，则按照玩家昵称字母顺序排列上下位置
    - 名次信息包含内容：本局名次+玩家信息+段位图标+歌曲AC/AP+积分增加或扣除结果+加好友
    - 玩家本人的信息需进行特殊设计
+ 玩家胜负排名（2v2v2）：
    - 按照队伍两人分数总和降序排序
    - 平分按照先后到达当前得分的顺序降序，多个零分则按昵称字母顺序排序。
    - 队内按玩家分数排序。如果分数相同，则同理按玩家达成此分数的时间顺序及玩家昵称字母顺序进行排名。
+ 名次信息包含内容：本局名次+玩家信息+段位图标+歌曲AC/AP+加好友
+ 玩家本人的信息需进行特殊设计

#### 2.2.7掉线处理
+ 角色表现：玩家掉线后，在局内仍然显示玩家形象
    - 掉线玩家没有托管机制，即由于玩家无任何操作，后续全部判定都为miss
+ 本局得分处理：玩家在当局未结算时，得分停留在掉线前的数据
+ 掉线重连：
    - 若玩家在本次对局结束后，登录游戏
        * 玩家进入游戏后所有排位赛相关数据都会进行刷新
        * 玩家重新进入排位赛主界面，将直接显示最新的段位情况。无任何特殊表现。如果玩家掉线重连后段位上升，正常弹出新段位动画和正常领取奖励。
    - <font style="background-color:#FCE75A;">玩家若在本次对局结束前，登录游戏（存疑）</font>
        * <font style="background-color:#FCE75A;">无法继续进入当前对局</font>
        * <font style="background-color:#FCE75A;">本局正常结束后，允许重新进入排位赛匹配流程</font>

### 2.3 新增道具
| **道具名** | **道具类型** | **获取方式** | **消耗方式** |
| :---: | :---: | :---: | :---: |
| 竞技币 | 货币 | 排位赛奖励 | 在兑换商店兑换物品 |
| 积分保护卡 | 计数道具 | 商城兑换 | 在需要扣除积分的时候，自动扣除保护卡，积分不扣除 |


### 2.4 称号需求
| **称号名称** | **称号类型** | **称号门槛** | **称号描述** |
| :---: | :---: | :---: | :---: |
| 段位称号 | 永久 | 结算达到铂金段位 | 舞台新星闪耀 |
| 段位称号 | 永久 | 结算达到传奇段位 | 传奇巨星的诞生 |
| 段位称号 | 永久 | 结算达到不朽段位 | 永恒闪耀的不朽 |
| 排名称号 | 永久 | 结算排名第1 | 先锋舞台王者 |
| 排名称号 | 永久 | 结算排名第2 | 闪耀先锋舞台 |
| 排名称号 | 永久 | 结算排名第3 | 星动先锋舞台 |
| 排名称号 | 永久 | 结算排名第4-10 | 登上先锋舞台 |
| 连胜 | 永久 | 连胜3场 | 火力全开排位赛 |
| 连胜 | 永久 | 连胜10场 | 常胜排位赛 |
| 连败 | 永久 | 连败3场 | 等我换个舞台 |


### 2.5 周边功能设计
#### **<font style="color:rgb(26,26,26);">2.5.1奖惩</font>**
+ 惩罚类型
    - 挂机
        * 需要根据玩法区分，挂机超过整首歌曲N%后将视为玩家不活跃，当局无法获得积分。百分比数值可根据玩法单独配置
        * 未操作定义：玩家未进行该玩法的按键行为。（按错算有操作）
        * 从小节开始时候计算该玩家是否进行操作。
        * 未操作计算方式：百分比=未操作的小节数/本歌曲所有小节数
    - 开挂
        * 若系统检测出使用外挂，需要立刻将玩家踢出对局，并对玩家进行惩罚
        * 提示内容为“由于你在对局中的数据异常，已将你请出对局，请稍后重试”
+ 惩罚措施：
    - 禁言：限制玩家在游戏内发言，由于排位赛不当言论导致禁言的时间可叠加，可与其他原因禁言时间叠加
        * 玩家在禁言期间限制一切主动发言行为，包括不限于：聊天框发言、发送喇叭、发送邮件。
    - 挂机禁赛：限制玩家参与排位赛，时间精确到秒，时间可配置，支持动态修改
        * 每日第一次挂机状态禁赛5分钟。
        * 每日第二次挂机状态禁赛10分钟。
        * 每日第三次挂机状态禁赛30分钟。
        * 每日三次以上挂机状态时禁赛30分钟。
        * 计次每日0点重置。
        * 次数和禁赛时间需要<font style="background-color:#FBDE28;">可配置</font>。
    - 外挂禁赛：限制玩家参与排位赛，时间精确到秒。
        * 根据玩家检测出在排位赛中使用外挂的次数，对玩家进行不同时间的禁赛。<font style="background-color:#FBDE28;"></font>
        * 禁赛时间从检测出外挂时开始计算。
        * 次数和禁赛时间需要<font style="background-color:#FBDE28;">可配置</font>。
        * 禁赛时间为自然时间。
        * 禁赛时间不会根据赛季结束重置。玩家在排位赛系统尝试匹配时，检测玩家是否禁赛，若禁赛，则弹出禁赛弹框告知玩家。
        * 需要支持外部命令对指定玩家进行禁赛特定时长操作。
        * 要支持外部命令对指定玩家进行禁赛解除操作。

#### **<font style="color:rgb(26,26,26);">2.5.2举报</font>**
+ 结算界面和排名界面增加举报按钮，点击后可对其他玩家进行举报
+ 举报成功、单日举报次数达到上限均有提示反馈
+ 玩家每个自然日最多可以举报其他玩家N次，超过次数本日不可继续举报，并弹窗提示。次数可动态调控
+ 举报后记录以下数据：
    - 举报玩家信息：玩家用户平台、id
    - 被举报玩家信息：玩家用户平台、id、对局信息（排名、得分、对局数据）
    - 被举报对局信息：对局单独的记录（ID或者是什么），被举报时间
+ 举报反馈：通过邮件形式反馈
    - 举报结果反馈（举报者本人、被举报人、本局其他玩家）
        * 举报成功反馈，包含处罚措施周知
        * 举报核实未成功反馈，仅告知举报者
+ 系统检测反馈：当局立即提示+通过邮件形式反馈
    - 若一次对局内，检测到当局有玩家使用外挂被踢出对局，则在对局内聊天框广播
    - 同时对局结束后，向当局其他玩家发送踢出检测反馈邮件
    - 邮件标题、内容模板、显示方式、待定

# 三、界面说明
## 3.1入口
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734573997207-5b1d1978-612b-4dfc-8010-61c48eecba0b.png)

## 3.2主界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734935754538-34beacf0-f94b-4dfc-8e0f-39f26117e328.png)

1. **赛季信息**
+ 显示内容包括赛季名和赛季时间，赛季时间精确到年月日。
+ 主界面背景图需与本次赛季相关联。
2. **段位信息**
+ 显示内容包括玩家当前赛季段位名、<font style="background-color:#FBDE28;">段位图标</font>、段位星级、段位分数进度。
+ 需设计一套段位图标，需求会提在文档最后美术需求表中。
3. **按钮【单人】**

点击进入3.3单人排位流程

4. **按钮【组队】**

点击进入3.4组队排位流程

5. **歌曲匹配**

点击打开本赛季匹配歌曲歌单

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734920779527-187397c3-d722-4eea-8ae5-ca09198f0ecd.png)

    - 一级页签：【传统】、【流星】、【太鼓】
    - 二级页签：【当前段位】、【全部】
    - 歌曲信息：歌名、星级、bpm、时长
6. **战绩**

点击进入3.5战绩界面。

7. **排行榜**

点击打开排行榜系统中的排位榜页签

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734923321811-6365b86a-ecb6-46c7-be65-48dc830e22f3.png)

    - 排名数据为玩家的段位和段位分数，显示信息包含段位图标、段位名、段位分数。
    - 其他内容与[【基础】排行榜策划案（传统）](https://snh48group.yuque.com/qim4en/xs9kb3/znyg3frn40trgyox)一致。
8. **商店**

点击打开商店系统中的兑换-排位页签

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734925429314-703d8406-1daf-4eb4-abe2-04fe18b6abc9.png)

    - 此页签右上角资源位区域只显示排位代币数量，所有商品都用排位代币购买。
    - 此界面交互逻辑与[【玩法】背包系统一期策划案](https://snh48group.yuque.com/qim4en/xs9kb3/zdg4l0krexu0maxz)一致。
9. **奖励**

点击进入3.6奖励界面。

## 3.3单人排位流程
### 3.3.1选模式界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734664441372-7cfa9e32-c75a-4005-b164-ac6d67ddf85c.png)

+ 文本【单人排位赛】
+ 文本【xx段位至少需要选择n个玩法】：段位和对应的最少选择个数由策划配表。
+ 玩法选择控件：需包含玩法名和对应<font style="background-color:#FBDE28;">玩法图标</font>，目前是传统、流星、太鼓三种玩法，后续可能会有新增；需中和未选中两种状态，玩家可多选，最少选择个数需符合当前段位的条件。
+ 按钮【开始匹配】：P点击进入2.匹配中界面；若玩家选择的个数不足，则飘窗提示“您选择的玩法个数不足~”
+ 按钮【关闭】：点击关闭此界面，回到3.2主界面。

### 3.3.2匹配中界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734672967231-105a7aa3-8270-4552-91b2-3ead986c39ab.png)

+ 文本+动效【匹配中】
+ 文本【xx:xx】：当前匹配时间xx分xx秒
+ 按钮【取消匹配】：在匹配成功之前玩家点击该按钮可以取消排位，回到主界面。
+ 匹配成功进入3.匹配成功界面

### 3.3.3匹配成功界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734674913575-91cb15e6-ef9d-4728-a8ab-6ed3f8e7b11b.png)

+ 文本+动效【匹配成功】
+ 此界面目的为提示玩家，不可交互，停留1.5秒即可。
+ 停留1.5秒后进加载页（加载页讨论需不需要根据不同玩家制作不同的加载页），加载完成进4.选歌界面。

### 3.3.4选歌界面   [排位赛pvp玩法策划案](https://snh48group.yuque.com/qim4en/xs9kb3/wcb9qycg88g3k4ga)
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735267568131-157c915c-7756-43ea-9ad6-7e44d2c348f0.png)

+ 文本【参赛者】
+ 玩家列表：包含五个参赛玩家的信息，每个玩家显示的信息包括玩家头像、玩家等级、玩家昵称、玩家性别标识、玩家段位图标、玩家段位名称，不可交互；玩家客户端本人需特殊表示（可用字体颜色区分）。
+ 文本【XX玩法】：显示该局排位赛的玩法名字，如何确定本局玩法见第二章功能说明，单一状态不可交互。
+ 文本【去掉一首你不喜欢的歌】：文本提示，单一状态不可交互。
+ 歌曲列表：包含<font style="color:#DF2A3F;">六首歌曲</font>的信息，如何确定哪六首见二章功能说明，每首歌曲显示的信息包括歌名、歌手、星级、歌曲时长；点击每首歌曲可将其选中，再次点击可将其取消选中，点击其他歌曲可切换选择，为单项选择；需要选中状态。
+ 文本【倒计时：xx】：显示当前的倒计时秒数，从10秒开始倒计时。
+ 按钮【提交】：点击后玩家选择的歌曲变为如下图所示被ban的状态，在倒计时结束前的时间，玩家也可看到其他玩家当前的选择结果；若玩家点击此按钮时未选择任意歌曲，则视为空ban；点击过此按钮的客户端隐藏此按钮。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1734942762516-a16493bc-ec0c-47a2-b6b9-a340d42521a7.png)

+ 聊天入口：匹配成功后会给该局匹配的几个玩家自动创建一个聊天频道，匹配解散时自动销毁该频道，玩家点击此聊天入口即可打开该聊天频道，即聊天框的“当前”页签。这里可以直接接等待室的聊天入口，功能一样。[【基础】聊天系统策划案（传统）](https://snh48group.yuque.com/qim4en/xs9kb3/lel217v70zcyl68i)

玩家发送在当前频道的消息会在玩家列表旁显示气泡：

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735184669985-53b369b4-ed14-4fae-83ad-88f1110df640.png)



所有玩家都完成选择或倒计时结束时，所有客户端隐藏【提交】按钮和【倒计时：xx】文本，公示所有选择并在剩下的歌曲中随机出一首，随机效果参考[歌曲随机效果参考.mp4](https://snh48group.yuque.com/attachments/yuque/0/2024/mp4/45413786/1735007523589-39fa3c3a-78e4-4613-9e63-cc761c02a3a4.mp4)

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735006791393-d5455661-b1b7-4ca1-aeda-0c738c0099ce.png)



选出歌曲后需要五秒的展示时间，倒计时结束后开始加载打歌界面。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735267712760-4c3a65aa-9598-4b9b-8764-29e0defa8129.png)

### 3.3.5打歌界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735098822229-e1a6005d-2c8f-4bd9-88fd-8ea4289c3a58.png)

+ 打歌界面在pve打歌的基础上增加了玩家列表和聊天相关ui。
+ 左上显示玩家列表，列表信息包括玩家名次、玩家头像、玩家昵称、玩家段位图标、玩家本局实时分数，表示玩家名次的数字第一名需用颜色和其他名次分开；列表排列顺序为实时分数从高到底排序，会随着玩家分数的变化而变化；玩家本人需特殊表示（可用字体颜色区分）。
+ 左下角显示聊天界面入口，点击打开当前聊天频道。[【基础】聊天系统策划案（传统）](https://snh48group.yuque.com/qim4en/xs9kb3/lel217v70zcyl68i)
+ 右侧快捷聊天按钮，点击弹出快捷聊天窗口，快捷聊天窗口含四条快捷语句，玩家点击某条快捷聊天语即可发送该条消息到当前频道并自动关闭窗口，直接点击空白处也可关闭此窗口。快捷聊天语句和聊天系统的快捷聊天语句分开，策划单独配置四个默认语句，此外玩家可从设置里编辑该语句。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735103865865-6c1a4543-3dcc-48ee-8144-adace788fb93.png)

+ 右侧表情按钮，点击弹出表情发送窗口，玩家点击某个表情即可发送到当前频道并自动关闭窗口，直接点击空白处也可关闭此窗口。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735105171832-cf37334e-ce96-4068-a342-914f761c74a5.png)

对局中玩家发送的当前频道的消息除了显示在当前聊天窗口中，还需显示在玩家列表右侧，消息弹2秒然后消失，若弹出期间该玩家发送其他消息，则会将该条消息顶掉并重新开始计时。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735105307739-71437c1a-ab24-4dbe-8a50-ecfaff4edbb6.png)

注意：对局期间自动关闭所有玩家的麦克风和扬声器，对局结束进入结算界面时恢复玩家原始设置状态。

### 3.3.6个人结算弹窗
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735108684857-2f692843-3586-4ea8-96db-d6042074e8c4.png)

+ 文本【第n名】：显示玩家此对局的最终名次。
+ 文本【第n名 -4】【得分达到S +1】：显示玩家该局段位分数加减细则，具体的加分/减分行为和数值见第二章功能说明
+ 对局掉落奖励：奖励道具图标、奖励道具名称、奖励道具数量，自动领取。
+ 玩家段位信息：内容包括段位图标、段位星级、段位名称、段位积分条和数值、该局的总分数变化。

这里需要用动效标识玩家该局段位分数的上涨or下降，共有如下几种情况：

    - 仅有积分上涨：段位积分条内容增加
    - 积分上涨&升星级：段位结算积分条内容增加，积分条满后积分槽清空，同时上方星级点亮新的星星。然后按实际积分数字在新的积分槽中提升到正确积分内容。
    - 积分上涨&升星&提升小段位：n 段位结算积分条内容增加，积分条满后积分槽清空，同时上方最后一颗星星落到段位数字上的动画，段位数字变为新的数字，同时段位星级变为新的星级。然后按实际积分数字在新的积分槽中提升到正确积分内容。
    - 积分上涨&升星&升大段位：n 段位结算积分条内容增加，然后弹升段弹窗。升段弹窗信息包括文本【恭喜升段】、段位图标、段位奖励（自动领取，只有玩家在此赛季首次升到该段位有）、按钮【炫耀一下】（功能暂不开发）；玩家点击空白处跳转3.3.7结算界面。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735115400106-25aa2f1c-dea2-4d85-98c3-6dff7e1ac005.png)

    - 仅有积分下降：段位结算积分条内容减少
    - 积分下降，并且降星：段位结算积分条内容减少，积分条清空后积分槽恢复满槽状态，同时上方星级灭一颗星星。然后按实际积分数字在新的积分槽中减少到正确积分内容。
    - 积分下降、降星、小段位下降：段位结算积分条内容减少，积分条清空后积分槽恢复满槽状态，同时上方星星和数字直接变化为新的段位和星级。然后按实际积分数字在新的积分槽中减少到正确积分内容。
    - 积分下降、降星、小段位下降、大段位下降：段位结算积分条内容减少，积分条清空后积分槽恢复满槽状态，同时上方段位直接变化为新的段位和星级。然后按实际积分数字在新的积分槽中减少到正确积分内容。
+ 玩家点击界面任意处，会跳转到3.3.7结算界面。

### 3.3.7结算界面
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736824860960-0217f381-5c85-4223-bcd6-6628423a1fae.png)

+ 歌曲信息：歌曲名、歌手名、谱面星级，点击无效果。
+ 角色模型：玩家本人角色模型。（讨论需不需要做几组胜利或失败动作）
+ 结算详情：
    - 文本【XX玩法】
    - 玩家列表（五个）：包含信息有玩家名次、玩家头像、玩家性别、玩家昵称、玩家当前段位（算上该局分数后）、AC/AP、该局得分、对局评价、该局段位积分、加好友按钮（他人）（点击效果可参考好友系统）；玩家本人需有特殊标识。

![对局评价](https://cdn.nlark.com/yuque/0/2024/png/44683805/1719386695771-ff470a49-b7a4-4383-bc6b-11c8f60d6687.png)

    - 按钮【详情】：点击打开详情，改变玩家列表显示信息，显示基础玩家信息和分数详情，具体可见[【通用】鹦鹉团demo版策划案](https://snh48group.yuque.com/qim4en/xs9kb3/nzamhu22ty0xbydu)结算界面；再次点击关闭详情，恢复原状态。

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735118317456-da249ec7-47e6-4212-9bab-eb3906c2bab1.png)

+ 按钮【举报】：点击弹出举报弹窗，该界面会显示另外四个玩家的基本信息，有昵称、头像、性别，玩家点击可切换选中状态，默认非选中状态，可多选；下方有输入框供玩家输入举报理由，限制50个中文字符，可允许输入为空；点击确认举报弹窗消失飘窗提示“您已举报成功，感谢配合！”。  
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735118530183-0801cd23-6275-44ec-bbee-544602df436d.png)
+ 按钮【分享】：暂不开发。
+ 按钮【再来一局】：点击直接跳过选模式环节重新匹配一局。

## 3.4组队排位流程
### 3.4.1组队界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735268046834-d178408a-d7ee-4138-b940-a0e8972011de.png)

+ 按钮【返回】：点击返回3.2主界面
+ 队伍角色模型：左边显示玩家自己的角色模型，右边默认显示空位，若有玩家进房间则显示该玩家角色模型。
+ 邀请列表： 邀请列表分为三个页签分别为好友（默认）、在线、玩伴，列表信息有玩家头像、玩家等级、玩家性别、玩家昵称、玩家段位图标、玩家段位名称、邀请状态。

邀请状态有四种：可邀请（显示邀请按钮）、已邀请、对局中、离线，玩家点击邀请则邀请按钮变为【已		发送】，过30秒后可恢复，玩家可再次点击邀请，30秒需要可配置。

被邀请玩家若不在局内则客户端收到邀请弹窗：

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735198073674-87bb5280-3b19-4e6e-b12c-b6b6a48f8931.png)

    - 弹窗界面显示邀请玩家的基本信息以及来源，来源有好友、玩伴、舞团、陌生人，若同时符合好友和舞团成员，则好友优先级更高。
    - 若玩家未处理邀请时收到其他邀请，则会在左侧页签显示，新邀请会顶在最上方。
    - 玩家点击接受则会跳转排位房间，同时视为拒绝其他邀请；若点击接受时该房间已满则飘窗提示“队伍已满”，房间最多两人。
    - 若玩家点击拒绝和关闭按钮则视为拒绝当前玩家组队，此时其他玩家的邀请还会存在。
+ 列表排序：
    - 好友：总体按照在线>>离线排序，其中在线好友按照可邀请>>对局中排序，都为可邀请和对局中好友按照亲密度从高到低排序；离线好友按照好感度从高到低排序，好感动相同的按照好友离线时间最近的在前。
    - 在线：玩家当前所在大厅同一频道的其他在线的玩家，排序按照玩家昵称首字母排序即可。
    - 玩伴：接过好友系统的玩伴列表即可，顺序参照好友系统。
+ 聊天功能与3.3.3界面的一致，玩家在当前频道发消息同样需要在角色旁显示气泡。
+ 按钮【开始】：队伍内为单人或双人时玩家都可以点击开始，点击后即进入3.3.2选模式界面。

### 3.4.2选模式界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735180755681-7e34a317-9715-4b84-9a46-38eb62388e7f.png)

与单人排位选模式界面仅有上方文本不一样：【组队排位赛】

### 3.4.3匹配中/匹配成功界面
界面与单人匹配完全一致，不赘述。

### 3.4.4选歌界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735527027907-760a251a-d401-4020-91ad-868b3c001f95.png)

+ 选歌界面和单人排位只有参赛者列表不同。
+ 组队排位为2v2v2，参赛者列表分为三组显示分别为红队、蓝队、绿队，需用底图颜色区分，玩家自己同样需要特殊表示。
+ 注意：由于组队排位参赛者有六人，界面右侧歌曲列表需要显示七首歌。

### 3.4.5打歌界面
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735536302240-92785b49-910c-4125-be2d-0becf94d90c9.png)

+ 打歌界面和单人排位只有参赛者列表不同。
+ 局内同组队员并排显示，展示信息仅有头像、段位图标、队伍总分数即可，同样需要三种颜色的底框区分。
+ 注意区分该节目同队伍玩家发消息的气泡设计，要能区分是谁发的。

### 3.4.6个人结算界面
界面与单人匹配完全一致，不赘述。

### 3.4.7结算界面
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736824959623-23d07e51-9e28-4c82-989c-30fccb7a5123.png)

+ 结算界面和单人排位只有玩家列表和角色模型不同。
+ 结算列表按照队伍123名次来排序，其余信息展示和单人一样，玩家本人需要特殊表示。
+ 角色模型需要同时展示本人和队伍成员的角色模型。

## 3.5战绩
![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1735541131823-8967276b-791c-4f73-bde2-01e486bd9385.png)

+ 战绩界面包含三个页签，分别为单人排位、组队排位、对局记录。
+ 单人排位：
    - 右侧为玩家赛季段位信息和单人排位数据信息，赛季段位信息包括段位图标、段位名称、文本【赛季时间：xx/xx-xx/xx】，单人排位数据信息包括玩家本赛季的对战次数、胜场、胜率、最高连胜、AC数、AP数。
    - 左侧为玩家赛季目前各个玩法的排位数据，目前有传统、流星、太鼓三个玩法的数据，数据包括：对战次数、胜场数、胜率。
+ 组队排位：界面与单人排位一致，只是所有数据都为玩家本赛季组队排位的数据。
+ 对局记录：

![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736825338666-8a4f9b9b-1c76-4581-826d-19cec2e503a2.png)

    - 左侧为玩家最近对局列表，显示内容包括：玩家名次、胜利/失败、对局时间【xx/xx xx:xx】、段位积分变化、对局模式、排位方式（单人排位/组队排位）；列表按照对局时间从近到远排序，显示数量待定。
    - 右侧为当前选中对局的详细数据，与结算界面信息一致，可参考3.3.7，注意需要设计两种排位的数据显示，单人排位显示5名玩家的数据，组队排位显示三组即六名玩家的数据。
    - 点击左侧对局可切换右侧详情的显示，左侧列表需要选中状态。

## 3.5奖励
### 3.5.1赛季任务
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736230961153-50a7be34-313e-4d5f-a222-e9f8951711b3.png)

+ 通行证：
    - 显示信息包括当前通行证等级、当前等级经验进度、每个等级对应奖励、等级进度条，奖励需要不可领取状态、待领取状态、已领取状态三个状态。点击待领取状态奖励可直接一次领取该小段位所有奖励，点击其他状态奖励则弹出通用道具名片。
    - 每次玩家完成任务获得经验代币，则增加玩家通行证等级经验，通行证等级经验到达对应等级即可获取对应奖励。
    - 这里后期会做商业化，部分奖励需购买通行证才可获得，一期不用开发。
+ 任务列表：
    - 任务列表分为每周任务和本期任务。
    - 列表信息包括任务名、任务进度、任务描述、任务奖励，奖励大部分情况只有经验代币道具，偶尔会有其他道具奖励，预留两个道具空位即可。点击奖励道具可弹出通用的道具名片，点击空白关闭。
    - 赛季任务有三种状态：

1.未完成成就，显示【前往】按钮，点击跳转对应界面；

2.已完成未领取任务，显示【领取】按钮，点击播放经验代币<font style="background-color:#FBDE28;">动效</font>，有其他奖励则弹出通用恭喜获取弹窗，同时上方通行证等级经验随之变化，等级进度也随之变化；

3.已完成领取任务不显示按钮，显示完成日期和完成标识，且整个控件置灰。

    - 任务排序：整体按照已完成未领取任务>>未完成任务>>已完成并领取任务排序，三类任务中具体排序与策划配表一致，玩家领取奖励后任务划进已完成并领取任务中，排到下方去。
+ 一键领取按钮：点击一键领取每周任务和本期任务内的所有可领取奖励，领取效果与单个领取一致，所有获得奖励道具一起弹窗即可。

### 3.5.2冲段奖励
![](https://cdn.nlark.com/yuque/0/2025/png/45413786/1736232091557-0310399d-4128-44c4-96cb-6582f174fb15.png)

+ 玩家本赛季首次到达某段位即可获得该段位的冲段奖励。
+ 段位信息包括段位名、段位图标、小段位。
+ 奖励位需预留三个奖励位，奖励需要不可领取状态、待领取状态、已领取状态三个状态，点击待领取状态奖励可直接一次领取该小段位所有奖励，点击其他状态奖励则弹出通用道具名片。

# 五、配置表说明
# 六、功能需求清单
# 七、美术需求清单




