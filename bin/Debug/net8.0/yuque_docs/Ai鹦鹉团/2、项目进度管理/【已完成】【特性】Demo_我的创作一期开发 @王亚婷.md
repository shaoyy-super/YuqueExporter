## 一、策划案链接：
[【通用】鹦鹉团demo版策划案](https://snh48group.yuque.com/qim4en/xs9kb3/nzamhu22ty0xbydu#qwZ58)



**对应流程：**

![](https://cdn.nlark.com/yuque/0/2024/png/45413786/1720420830076-7787276e-f28a-446a-bccb-d4ba516f6d14.png?x-oss-process=image%2Fformat%2Cwebp)

## 二、特性时间线：@PM
TB链接：[https://www.teambition.com/task/667136f4c3e550e6d475e6a4](https://www.teambition.com/task/667136f4c3e550e6d475e6a4) 



![](https://cdn.nlark.com/yuque/0/2024/png/12926950/1720766967584-aa88bff3-7767-4d12-9aab-a115bdd53213.png)

**变更记录：**

+ **0725 【前端】作品设置界面功能【3D】****<font style="color:#DF2A3F;">增加1D</font>**
    - <font style="color:rgb(38, 38, 38);">谱面生成规则比预想的要复杂，还要拼接成json文件。 </font>
    - <font style="color:rgb(38, 38, 38);">调用北京AI接口获取的数据与当前项目数据不匹配，需要进行二次处理，比预想的要麻烦。</font>

## 三、详细开发内容 @程序：周晓峰 @策划：王亚婷  @UI
### 技术方案
<font style="color:#DF2A3F;">待补充 @前端@后端</font>

### 功能需求清单@程序  @策划：王亚婷 
#### 前端功能清单：
| 编号 | 分类 | 优先级 | 需求描述 | 程序自检 | 策划验收 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 主界面入口 | 1 | 主界面"我的创作"入口，按钮功能(btn)+文本描述(label) | ✔ | ✔ |  |
| 2 | "我的创作"总界面 | 1 | 步骤信息(img)，步骤1(img)代表"音乐选择"，步骤2(img)代表"作品设置"。 | ✔ | ✔ |  |
| 3 | 音乐选择界面 | 1 | 界面标题文本(label)。<br/>界面关闭按钮(btn)，点击关闭界面并清理所有缓存的信息。<br/>搜索曲目输入栏(intPut)，能够实时显示搜索条目，关闭后进入默认条目显示。<br/>页签按钮(btn)，包括了"曲库选择"和"本地导入"。<br/>确认选择按钮(btn)，点击进入作品设置界面。<br/>需要添加主界面播放背景音乐的接口。 | ✔ | ✔ |  |
| 4 | 音乐选择页签-曲库选择 | 1 | <font style="background-color:#FBDE28;">官方歌曲预览背景(img)。</font><br/>单个歌曲条目【包含了歌曲名文本(label)，歌手名文本(lable)，播放中的标识(img)，时长文本(label)，BPM文本(label)】，单个歌曲条目选中框(img)。<br/>默认选择第一首歌，如玩家选择后再次切回来需要播放之前选择过的歌曲，并且居中显示。<br/>需要调用获取官方曲库的接口，并解析返回参数。 | ✔ | ✔ | 当前曲库数据来自表格。 |
| 5 | 音乐选择页签-本地导入 | 1 | <font style="background-color:#FBDE28;">本地导入的歌曲预览背景(img)。</font><br/>单个歌曲条目【包含了歌曲名文本(label)，歌手名文本(lable)，播放中的标识(img)，时长文本(label)，BPM文本(label)】，单个歌曲条目选中框(img)。<br/>对所有歌曲条目进行按照时间排序。<br/>如玩家选择过条目再次切回来则需要播放之前选择过的歌曲，并且居中显示，如未选择过则不处理。<br/>点击导入本地音乐的按钮(btn)，需要调用选择本地音乐文件接口，确认后判断是否重复，<font style="background-color:#FBDE28;">提交到服务器</font>或者本地存储，并且置顶显示刚刚导入的本地音乐，选中且播放。<br/>需要调用获取历史本地上传过的曲库接口，并解析返回参数。 | ✔ | ✔ | <br/>没有ai接口，当前本地音乐无法自动识别歌曲名，歌手名，BMP。 |
| 6 | 作品设置界面<br/><br/> | 1 | 界面标题文本(label)。<br/>界面关闭按钮(btn)，点击关闭界面并清理所有缓存的信息。<br/>按钮提示(btn)，需要弹出二级弹窗(暂时非公用)。<br/>生成作品按钮(btn)，点击进入loading界面后，需调用Ai接口，获取bmp，舞步数据，根据选择的星级，难度以及规则结合表格生成谱面，然后进入作品预览界面。 | ✔ | ✔ |  |
| 7 | | 1 | 玩法选择：<br/>页签切换按钮(包括"传统玩法"，"流星玩法"等)。 | ✔ | ✔ |  |
| 8 | | 1 | 难度选择：<br/>预设玩法难度("简单","一般","困难","大师") | ✔ | ✔ |  |
| 9 | | 1 | 高级设置:<br/>星级设置(label+img+slider)，表示难度。<br/>键数范围(label+img+slider)，表示玩法按键。<br/>星级说明二级弹窗<br/>键数范围二级弹窗 | ✔ | ✔ |  |
| 10 | loading界面 | 2 | 进入作品预览的通用loading界面(img) | ✔ | ✔ |  |
| 11 | 作品预览界面 | 1 | 2D界面模块：<br/>退出按钮(btn)，退出到主界面，需弹出二级确认弹窗。<br/>上传作品按钮(btn)，进入上传作品界面。<br/>暂停播放按钮(btn)。<br/>设置按钮(btn)。<br/>试玩按钮(btn），点击进入试玩模式。 | ✔ | ✔ |  |
| 12 | | 1 | 3D模块：<br/>玩家自身3D角色。<br/>判断轨道。<br/>谱面轨道。 | ✔ | ✔ |  |
| 13 | 试玩界面 | 1 | 2D界面模块：<br/>和传统玩法游玩2D界面一致。 |  | ✔ | 试玩过程右上角退出退回到作品预览 |
| 14 | | 1 | 3D模块：<br/>和传统玩法3D展示一致。 | ✔ | ✔ |  |
| 15 | 试玩结算界面 | 1 | 2D界面模块：<br/>退出试玩按钮(btn)，点击回退到作品预览界面。<br/>作品信息描述【包含作品名称(label)，作品歌手名称(label)，玩法说明(label)，星级(img)】。<br/>试玩分数栏【包含连击数(label)，评级(img)，按键信息(label)。<br/>返回按钮(btn)，点击返回或计时结束返回作品预览界面。 | ✔ | ✔ |  |
| 16 | | 1 | 3D模块：<br/>和传统玩法3D展示一致。 | ✔ | ✔ |  |
| 17 | 作品上传 | 1 | 本地图片选择按钮(btn+img)，点击需要调用获取本地照片/图片的接口，限制2M大小，并且可以对当前图片进行裁剪。<br/>输入的歌名控件(intput)，默认显示为识别的歌曲名字。<br/>输入的歌手名空间(intput)，默认显示识别的歌手名。<br/>关闭按钮(btn)，点击回退到作品预览界面。<br/>确认上传按钮(btn)，点击后需要调用唯一标识、歌曲文件、歌曲图片、作者信息、谱面信息、舞步信息等打包数据Data接口，并且上传到腾讯云，同时获取需要分享的二维码信息，并进入loading界面，上传完成后进入二维码分享界面。 | ✔ | ✔ | 当前本地音乐无法自动识别歌曲名，歌手名 |
| 18 | 二维码分享界面 | 1 | 返回按钮(btn)，点击返回到主界面-歌曲选择页签-自制页签，并且该作品显示在自制作品最上方。<br/>作品封面(img)为作品上传获取的本地相册图片。<br/>歌曲名(label)。歌手名(label)。游戏logo(img)。<br/>作者信息【包括作者头像(img)，作者昵称(label)】。<br/>分享文本(label)。<br/>使用教程(label)。<br/>需要分享的二维码图片(img)。<br/>下载二维码按钮(btn)，点击将分享的卡片保存到玩家本地相册，需要调用图片保存到本地相册的接口。 | ✔ | ✔ |  |


#### 后端功能清单： <font style="color:#DF2A3F;"></font>
| 编号 | 分类 | 优先级 | 需求描述 | 程序自检 | 策划验收 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 作品上传 | 1 | 调试上传接口 |  | | |


#### 工时评估：
##### <font style="color:#DF2A3F;">前端：</font>
:::success
+ **技术文档（2D）**
+ **功能表格信息梳理（0.5D）**
+ **确认加载音乐资源本地存放配置（0.5D）**
+ **音乐选择界面功能（2.5D）**

       1.音乐选择界面搭建

       2.音乐搜索，加载官方，加载历史本地功能

+ **作品设置界面功能（3D） ****<font style="color:#DF2A3F;">可以验证歌曲导入后返回舞步数据的流程 （人跳舞）</font>**

1.调研使用AI接口生成的舞步信息，节拍和BPM

2.根据策划规则，生成谱面逻辑

3.处理相关返回资源与数据，生成进入传统玩法入口的需求数据

+ **作品预览界面功能（1.5D）  ****<font style="color:#DF2A3F;">在传统玩法中再次验证 ，策划验收</font>**

1.需结合传统玩法功能调用与调试。

**<font style="color:#DF2A3F;">第一阶段开发周期 预留1D（策划配合进行验收）</font>**

+ **试玩界面预览（1.5D）**

1.需结合传统玩法功能调用与调试。

+ **调研需求（4D）**

1.调研唤起并载入本地音乐文件接口，补全音乐选择功能（1）

2.调研唤起本地相册生成封面的接口（1）

3.调研打包个数据进入一个Data文件，且提交到腾讯云的接口，并获取二维码接口（1）

4.调研保存图片至本地相册接口接口（1）

+ **试玩结算（1D）**
+ **作品上传（1D）**
+ **二维码分享（1D）**

**<font style="color:#DF2A3F;">第二阶段开发周期7.5D  策划配合验收</font>**

+ **阶段1正式UI拼接2D**

**<font style="color:#DF2A3F;">整体预留3D</font>**

:::

##### 后端：
:::success
上传接口调试(1D)

:::

##### UI：
:::success
  3天出图 1天细化 1天切图  

:::



### UIchecklist@程序 @策划：王亚婷  @UI
checklist说明：

**已检查：**✔

**已知问题暂不修改：╱（需特殊说明备注）**

**（需截图）：****需要截图已检查效果**

**（需描述）：****需要备注情况**

| **类型** | **检查事项** | **程序** | **策划&美术** |
| --- | --- | --- | --- |
| | | | |
| **文字** | **界面上所有文字，是否都是读取配置表，没有代码里写文字的情况** | | |
| | **多语言检查****多语言自动机翻工具说明****（需截图）** | | |
| **按钮** | **按钮大小、按钮颜色是否和美术效果图一致** | | |
| | **按钮状态：常态、点击态、选中态（如果有的话）效果是否同美术效果图一致** | | |
| | **按钮的触碰区域是否做到比较容易点击，需要制定通用的标准** | | |
| **界面元素** | **界面元素的灰态是否同美术效果图一致：材质灰态、叠加灰色图片、替换灰色资源素材，使用的是3种中的哪一种** | | |
| | **检查界面的所有状态是否齐全****（需截图）** | | |
| | **是否按照UI示意图拼接界面元素（颜色，透明度，Sprite，位置，缩放等）** | | |
| **层级** | **检查呼出通用Tips界面（确认框、提示信息框）后层级显示是否正常** | | |
| **适配** | **在游戏视窗内设置4种Aspect，确认在4:3,18:9,21:9.7,21:9，四种比例下界面是否显示正常（其中18:9&21:9.7需要与美术示意图保持一致)****（需截图）** | | |
| **功能** | **界面加载响应速度是否过长，加载时界面的初始状态是否正常****（需描述）** | | |
| | **检查通用元素是否使用了通用预制体****（需描述）** | | |






