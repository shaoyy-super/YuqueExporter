# 一、概述
## 1.1 文档说明
本文档详细说明地产房的定义和棋盘上的规则，收取租金玩法的规则。

## 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/6/12</font> | | 陆晓笛 | <font style="color:black;">文档创建</font> |


## 1.3 设计思路
+ 玩家通过升级建筑，获得地产房，地产房随机放置在棋盘的地产格上，若对应地产格的地产房越多，收取租金越高。
+ 棋盘上放置好友或其他玩家，玩家走到对应地产格时，可以获取对应玩家租金X倍率的货币。

# 二、功能说明
## 2.1 地产房
### 2.1.1 绿房子
#### 获取方式：
+ 每次升级建筑会获得1个绿房子。

#### 棋盘上规则：
+ 每次升级建筑结束，返回主界面后，获得的绿房子会随机放置在所有没有红房子的地产格上，每个格子达到5个绿房子会自动合成1个红房子。
+ 当棋盘所有地产格都摆满红房子时，此时若需要再放置绿房子，则会随机选择一批同色地产格，将上面的红房子消耗，填充绿房子填充，以此类推至绿房子全部放置。
+ 当前城市所有建筑都升级完毕后，进入下个城市，会返回棋盘展示新棋盘场景，然后放置房子。

### 2.1.2 红房子
#### 棋盘上规则：
+ 每个地产格只会存在1个红房子，当同一组地产格都存在红房子时，并且玩家此时走到对应地产格上时，消耗红房子并触发特定事件，事件后续待定。
+ 消耗完红房子后，此时该地产格房子数量默认归零，并且消耗红房子的数量作为经验加给玩家。
+ 若此时红房子上存在可收租玩家，则优先按照红房子的倍率判定收租，然后再消耗红房子。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1717659755809-dcfd7692-b33b-41e4-8be1-f040632f0647.png)

### 2.1.3 支付租金事件
#### 收取租金数额
+ 地产格初始租金即为格子上显示的金额，根据该地产格拥有的房子数量乘上倍率，再乘上玩家当前骰子的倍率，获得总的租金收入。
+ 我方获得租金的同时，对应玩家会扣除相当于他方自身初始金额数量的货币，若对方身上货币数量不足，则扣除至0。
+ 当消耗完红房子后，此时该地产格收益变为初始收益。

#### 事件规则
+ 玩家走到存在玩家的地产格上，触发收取租金事件。
+ 支付完租金后，重新刷新一个新的玩家于棋盘之上。

#### 支付租金玩家
+ 系统选择固定数量的玩家置于棋盘的地产格之上，优先选择好友→玩家，即优先好友，若好友不足，再随机选择玩家，若玩家也不满足条件，最后再选择机器人。
+ 具体棋盘地产格上同时存在的数量由玩家经验决定，玩家经验每到特定的里程碑，增加一个玩家数量。
+  棋盘地产格上玩家生成时不能和护盾，活动点之类的这些重叠 。

**通知报告**

+ 被收取租金的玩家报告中会记录该事件，并且在棋盘报告中进行收录。

# 三、界面说明
## 地产房收取租金界面
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718256853230-445b63ab-c485-4778-91f8-f0f5713f6e8d.png)

# 四、配置表说明
[RentHouse.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43554293/1721616211168-189f1afc-9525-4061-9816-6110bce2a127.xlsm)

# 五、功能需求清单
| **<font style="color:white;">序号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">优先级</font>** | **<font style="color:white;">需求描述</font>** | **<font style="color:white;">自检</font>** | **<font style="color:white;">确认</font>** | **<font style="color:white;">备注</font>** |
| --- | --- | --- | --- | --- | :---: | :---: |
| 1 | 设置玩家 |  | 地产格放置玩家逻辑 |  | <font style="color:black;">0</font> | |
| 2 |  |  | 收取租金后新增玩家逻辑 |  | <font style="color:black;"></font> | |
| 3 | 地产格 |  | 地产格显示玩家头像 |  | <font style="color:black;"></font> | |
| 4 | 地产房 |  | 地产房获取和放置逻辑 |  | | |
| 5 | 土地租金 |  | 我方获取土地租金计算逻辑 | | | |
| 6 |  |  | 对方玩家支付货币逻辑 | | | |


# 六、美术需求清单
## 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | | |
| :---: | --- | --- | --- |
| <font style="color:black;">1</font> | <font style="color:black;">收取租金界面</font> | | |


## 6.2 动效需求
1、升级建筑后获取房子的动效

2、回到主界面放置房子的动效

3、绿房子合成为红房子的动效

4、同色地产格红房子合成变为经验的动效

## 6.3 参考视频
1、收租

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/pvd2rgg4dpwgl7sn#QNk8K)

2、获取和放置房子

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/pvd2rgg4dpwgl7sn#OLb5L)

3、清除红房子

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/pvd2rgg4dpwgl7sn#FAKHB)





