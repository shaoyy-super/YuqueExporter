# 概述
## 文档说明
**名词解释：**

+ 可用掷骰次数
+ 掷骰次数容量：掷骰次数随时间回复的上限
+ 掷骰次数单次重生数量i：每次随时间回复时，掷骰次数加i次
+ 掷骰次数回复时间t：掷骰次数加i次需要的时间

## 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | --- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/6/5</font> | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">文档创建</font> |
| | <font style="color:black;">2024/6/12</font> | | [@王敏涵](undefined/cookie-ylrqq) | 更新美术需求与功能需求清单 |
| | <font style="color:black;">2024/7/11</font> | | [@王敏涵](undefined/cookie-ylrqq) | 完善自动掷骰功能 |


# 功能说明
## 规则
### 掷骰
**掷骰与移动：**

+ 单次点击投出两个六面骰，两个骰子投掷的点数总和即为前进步数

**掷骰与奖励：**

+ 若本次掷骰两个骰子点数相同，获得一定金额奖励

**掷骰次数：**

+ 单次掷骰消耗骰子次数 = 奖励倍率（默认为1）
+ 掷骰次数随时间回复（一小时恢复i次）
    - 回复速度、单次回复的掷骰次数、掷骰次数容量可变
    - 随时间回复次数时不能超出掷骰次数容量
    - 回复时间从掷骰次数不足掷骰次数容量时开始计时
+ 掷骰次数不足时弹快捷购买资源弹窗

**掷骰时间间隔：**

+ 掷骰按钮需要在移动完之后再次亮起变为可交互状态

### 奖励倍率
+ 停留在格子上获取的所有奖励乘以相应奖励倍率，亏损额不变
+ 可选的最高奖励倍率不能超过当前掷骰次数
+ <font style="background-color:#FBDE28;">最高奖励倍率可变，随奖励倍率的特权等级与当前掷骰数量变化</font>

### 自动掷骰
+ 长按2s可切换为自动掷骰模式，再次点击切回手动
+ <font style="background-color:#E8F7CF;">掷骰次数不足时，自动恢复手动模式</font>
+ <font style="background-color:#E8F7CF;">自动掷骰模式下：</font>
    - <font style="background-color:#E8F7CF;">自动进行奖励收取、抽取机会卡、坐牢掷骰</font>
    - <font style="background-color:#E8F7CF;">只有停留到铁路格上触发攻击建筑、抢劫银行等操作时暂停，需要玩家手动操作</font>
        * <font style="background-color:#E8F7CF;">玩家手动操作完成之后回到主棋盘，恢复自动</font>

## 界面
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1717651975803-92c1f7b2-6a1b-4446-8484-25119a59e374.png)

## 表现
### 镜头
+ 掷骰时，镜头重置到画面中央
+ 棋子移动时，固定镜头，不可移动镜头

### 掷骰子
掷骰表现有两种，每次从两种表现形式中随机：

1. 骰子原地抖动抛出
2. 骰子从屏幕外（下方区域）丢到屏幕内，骰子落在棋盘内区域



> 掷骰表现录屏
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/hmenrlhg0qi3fesg#iuHG5)

### 棋子
+ 待机表现
+ 移动表现
    - 普通移动
    - 小跳移动
    - 大跳移动
    - 当终点是铁路格时，最后两格依次播小跳移动和大跳的动画

![](https://cdn.nlark.com/yuque/0/2024/gif/26927517/1717583597739-773d1399-cc7e-4083-9618-d1cd2f88262c.gif)

# 配置表
[Roll.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/26927517/1717659434306-6b8c2515-73a6-4694-a626-86eec8f6d310.xlsm)

# 功能需求清单
:::info
标<font style="background-color:#FBDE28;">黄色高亮</font>的为demo版本必需。

:::

| 编号 | 分类 | 优先级 | 需求描述 | 自检 | 确认 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 |  | 1 | 掷骰与移动逻辑 | | | |
| 2 | | 1 | 掷骰次数回复逻辑 | | | |
| 3 | | 2 | 自动掷骰功能 | | | |
| 4 | | 2 | 掷骰与奖励逻辑 | | | |
| 5 | | 2 | 奖励倍率逻辑 | | | |


# 美术需求
:::info
标<font style="background-color:#FBDE28;">黄色高亮</font>的为demo版本必需。标<font style="background-color:#8CCF17;">绿色</font>为已有。

:::

| 编号 | 优先级 | 需求名 | 需求类型 | 描述 | 参考 |
| --- | --- | --- | --- | --- | --- |
| 1 | 1 | 骰子模型 | 原画及模型 |  | |
| 2 | 1 | 棋子模型（偶像） | 原画及模型 | 用偶像的模型形象 | |
| 3 | 1 | 棋子待机表现 | 动画 |  | |
| 4 | 2 | 棋子移动表现x3 | 动画、特效 | + 普通：角色正常走格子移动<br/>+ 走到特殊的铁路格：结合世界观，表现加强 |  |
| 5 | 1 | 骰子按钮状态切换UI动效 | UI 动效：切换成自动掷骰状态时有一点闪光特效 | 见视频 |  |
| 6 | 1 | 掷骰子特效 | 特效 | 骰子落到棋盘上的特效，见视频 | [此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/hmenrlhg0qi3fesg#inse4)  |
| 7 | 2 | 奖励倍率点击UI动效 | UI动效 |  | ![](https://cdn.nlark.com/yuque/0/2024/gif/26927517/1718966631410-8bb0c887-ca69-4196-9ea6-f1774e5b2384.gif) |




