# 概述
## 文档说明
+ 异步社交玩法，鼓励玩家间相互攻击、复仇，配合少量经济产出。

## 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/6/6</font> | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">文档创建</font> |
| | 2024/6/13 | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">新增切换对手逻辑与机器人填充逻辑</font> |
| | 2024/6/21 | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">优化随机对手逻辑：好友优先</font> |
| | 2024/6/27 | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">优化随机对手逻辑：每日被随机到的同一个玩家的次数有上限</font> |
| | 2024/7/5 | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">优化切换对手【好友】页签展示逻辑</font> |
| | 2024/7/25 | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">优化【复仇】列表显示</font> |


## 设计思路
+ 旨在增加玩家间高频交互，抓住玩家竞争、复仇心理增加在线时长。

# 功能说明
> 玩法录屏演示：
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/qicpe8blgzco7hsx#YXhVy)

## 攻击建筑
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/26927517/1717737543813-9db505c7-7f84-4d9f-a065-447eb9f646b3.jpeg)

**规则：**

玩家走到铁路格时，有概率触发攻击建筑玩法

+ 随机进入一个有建筑的玩家的城市**【随机规则】**
    - 1. 优先随机好友，其次为本服陌生人，再次是机器人
    - 2. 玩家上次攻击对象从随机列表中剔除（即不会连续随机到同一个人）
    - 3. 每日被随机到的同一个玩家的次数有上限
+ 所有建筑为可攻击对象（包含已完成建筑和未完成建筑）
+ 每个建筑可攻击的次数为该建筑的等级，超过次数则无法攻击该建筑。
+ 玩家可选择该对手棋盘的任一建筑进行攻击
    - 若玩家有防护罩，赚取少量金额
    - 若玩家无防护罩，抢夺大量金额
+ 攻击成功则标记为该玩家占领该建筑，建筑上显示被占领标志
+ 玩家收取金额后返回自己的城市



对手玩家建造系统：

+ 被占领的建筑需要花费金钱修复



**断线重连处理：**

+ 玩家没执行攻击操作前断线重连，重新随机对手

**机器人填充：**

+ 每隔一定时间填充机器人对玩家进行攻击，机器人出现在战报中
+ 每次填充的机器人重新随机



**表现流程：**

1. 播切换场景动画，展示该玩家信息
2. 进入场景，高亮展示可攻击建筑
3. 点击建筑进行攻击
4. 播成功/失败动画，展示可收取金额
5. 点击收取获得金额，播动画切换回原场景



## 切换对手
+ 支持切换成曾攻击过自己的玩家（复仇）/好友
+ 切换次数不限
+ 记录的复仇玩家数有上限

<font style="background-color:#E8F7CF;">切换对手 - 【好友】页签优化：合并同一个好友的记录，展示近7天被好友攻击建筑的次数（无论攻击成功还是失败）</font>

+ <font style="background-color:#E8F7CF;">近期攻击过你{0}次</font>
+ <font style="background-color:#E8F7CF;">按次数由多到少排列</font>

<font style="background-color:#E8F7CF;"></font>

<font style="background-color:#E8F7CF;">切换对手 - 【复仇】页签优化：</font>

+ <font style="background-color:#E8F7CF;">若玩家对复仇列表里的玩家进行攻击（无论攻击成功还是失败），从复仇列表中剔除该玩家</font>

# 界面
## 攻击建筑界面
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1718162039438-38487b78-6c67-48c8-93c8-69242779124d.png)

 ![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1718162051744-b1747d3f-3d5d-49c1-8769-12fbd71da8aa.png)

## 切换对手界面
### 复仇
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719394512837-625ceb68-53d3-4a5e-bfca-05bf8fbc1124.png)

### 好友
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719394523307-191f6424-1b59-4465-9272-d0837894dc42.png)

# 配置表
[AttackBuilding.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/26927517/1719306307452-c592fe47-e4f6-4587-9a2c-b40a4cab9a9a.xlsm)

# 功能需求清单
:::info
标<font style="background-color:#FBDE28;">黄色高亮</font>的为demo版本必需。

:::

| 编号 | 分类 | 优先级 | 需求描述 | 自检 | 确认 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 |  | 1 | 随机选择玩家逻辑 | | | |
| 2 | | 1 | 玩家攻击、占领建筑逻辑 | | | |
| 3 | | 1 | 玩家获取奖励逻辑 | | | |
| 4 | | 1 | 被占领玩家扣除奖励逻辑 | | | |
| 5 | | 1 | 被占领建筑修复逻辑 | | | |
| 6 | | 2 | 切换对手逻辑 | | | |


# 美术需求
| 编号 | 优先级 | 需求名 | 需求类型 | 描述 | 参考 |
| --- | --- | --- | --- | --- | --- |
| 1 | 1 | 切换场景动画 | 动画、特效 | 怪盗在电话亭里穿越后进入新场景 | 找joy对 |
| 2 | 1 | 攻击成功表现 | 动画、特效 |  | 见参考视频-攻击成功 |
| 3 | 1 | 攻击失败表现 | 动画、特效 |  | 见参考视频-攻击失败 |
| 4 | 1 | 占领建筑表现 | 特效 | 攻击成功后在建筑顶部出现玩家头像表示占领 | ![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1718966914267-d65ad4d9-0bfa-4cdd-ab89-2608ec35e8fb.png) |
| 5 | 1 | 瞄准icon UI动效 | UI动效 | 攻击瞄准图标有节奏地放大缩小 | ![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1718966797054-ebfe52d8-82e8-45b2-8612-5ac543c40929.png) |
| 6 | 1 | 两个收取金额特效（大量、少量） | UI, 特效 | 界面出现大量钞票，做两种，一种是攻击成功获得大量钞票，一种是攻击失败获得少量钞票 | ![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1718966819638-b4ec4a9b-5399-4d9d-9940-a6f0a11df61e.png) |


# 参考
[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/qicpe8blgzco7hsx#amBuj)

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1717555718494-d0fd97e8-220d-4072-8f3c-5e20a30c4cb0.png)![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1717555718494-d0fd97e8-220d-4072-8f3c-5e20a30c4cb0.png)

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1717738766028-6a098f92-e736-4413-89e4-62e3f2073bc2.png)![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1717738766028-6a098f92-e736-4413-89e4-62e3f2073bc2.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43256847/1721899467075-cc7cca7f-74c5-44bf-8429-46cb9ae65d3e.png)

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/qicpe8blgzco7hsx#UQny7)

