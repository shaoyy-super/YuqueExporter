# 概述
## 文档说明
+ 本文档说明了格子玩法中银行打劫玩法的基础规则与玩法流程

## 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/6/25</font> | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">文档创建</font> |
| | <font style="color:black;">2024/7/24</font> | | [@王敏涵](undefined/cookie-ylrqq) | <font style="color:black;">优化随机玩家金额数量规则</font> |


## 设计思路
+ 玩家获取大量金钱的主要途径，出现概率较小，出现时带给玩家惊喜感。

# 功能说明
> 玩法录屏演示： 普通抢劫和超级抢劫
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/plha8ktu1sir7can#fTjff)

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/plha8ktu1sir7can#DNxMI)

## 玩法流程
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/26927517/1719487401311-241257e5-252f-4fd9-bbe1-e4919b34cc1d.jpeg)

## 小游戏玩法概述
+ 共有9张卡片，3种图案
+ 点击卡片对应卡片翻开，会随机出现1种图案
+ 同种图案累计出现3次则游戏结束，根据出现的图案类型进行结算

## 后端规则
**规则：**

玩家走到铁路格时，有概率触发银行打劫玩法。玩家身上有对应活动buff时普通打劫会升级为超级打劫玩法（奖励更多的银行打劫）。

**【随机玩家规则】**

+ 需要在未进入玩法前就进行随机，玩家会提前在主界面看到下一个打劫对象和金钱，打劫结束后重新随机
+ <font style="background-color:#E8F7CF;">随机选择一个玩家，玩家当前金钱数需要在指定数额区间（上下限 = 奖励金基础值 x 玩法奖励金系数 x 城市等级基础系数）【配置上下限的玩法奖励金系数】</font>
    - 1. 优先随机好友，其次为本服陌生人，再次是机器人
    - 2. 玩家上次打劫对象从随机列表中剔除（即不会连续随机到同一个人）
    - 3. 每日被随机到的同一个玩家的次数有上限

**【奖励规则】**

+ 进入小游戏时即根据中奖权重，决定最终游戏结果（大奖、中奖、小奖），由前端模拟小游戏过程
+ 玩家根据不同游戏结果获得对应奖励金额，奖励金额受奖励倍率影响
+ 被抢劫玩家失去对应奖励金额，不受奖励倍率影响

**【超级抢劫】**

+ 新加一档超级大奖奖励，超级大奖奖励金额=大奖奖励金额 x 超级大奖额外倍率

**断线重连处理：**

+ 玩家在小游戏过程中断线，重连后重新开始小游戏

**机器人填充：**

+ 每隔一定时间填充机器人对玩家进行抢劫，机器人出现在战报中
+ 每次填充的机器人重新随机
+ <font style="background-color:#E8F7CF;">机器人的被抢劫金额数在指定数额区间内随机（上下限 = 奖励金基础值 x 玩法奖励金系数 x 城市等级基础系数）【配置上下限的玩法奖励金系数】</font>

## 前端显示
**【主界面显示】**

+ 显示下一个打劫对象，显示金额不再动态变化

**【小游戏过程模拟】**

+ 根据后端的最终奖励模拟玩家每次点击的序列
+ 共有9张盖着的卡片，玩家点击卡片翻开，累计出现三个相同的图标即为游戏胜利，进入游戏结算
+ 如：最终奖励是中奖，前端可能模拟的过程：<font style="background-color:#E8F7CF;">小奖图标</font>、<font style="background-color:#C1E77E;">中奖图标</font>、<font style="background-color:#C1E77E;">中奖图标</font>、<font style="background-color:#8CCF17;">大奖图标</font>、<font style="background-color:#E8F7CF;">小奖图标</font>、<font style="background-color:#C1E77E;">中奖图标</font>

**【小游戏结算】**

+ 【破产】若玩家中了大奖/超级大奖，则判定为被抢劫玩家破产
+ 播结算动画，弹出收取奖励弹窗
+ 玩家收取奖励后，回到棋盘主界面场景

**【超级打劫】**

+ 卡片图案替换为：超级大奖图标、大奖图标、中奖图标
+ 对应奖励栏的奖励也替换为：超级大奖、大奖、中奖

# 界面
## 小游戏界面
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719381131911-aaffeb3e-1fdc-4420-8598-5373c3edcbe6.png)

## 小游戏结算
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719310728749-672bb852-593e-49c0-aac9-e9c88909039c.png)

 ![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719310769994-a356fa52-e417-444b-85c0-b2ca5e2fef50.png)

## 主界面显示
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1719310793364-32df82c0-9004-4192-991a-e8ae33bcd709.png)

# 配置表
[Steal.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/26927517/1719383898148-5b7c1c3a-0546-41ae-811e-58bf609447ba.xlsm)

# 功能需求清单
| 编号 | 任务人员 | 优先级 | 需求描述 | 自检 | 确认 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | [@李锐](undefined/lirui-rwgfy) | 1 | 【玩法界面】玩家翻牌逻辑 | | | |
| 2 | [@李锐](undefined/lirui-rwgfy) | 1 | 【玩法界面】翻牌进度展示逻辑 | | | |
| 3 | [@李锐](undefined/lirui-rwgfy) | 1 | 【玩法界面】打劫总结算展示逻辑 | | | |
| 4 | [@李锐](undefined/lirui-rwgfy) | 1 | 【主界面】打劫奖励tips显示 | | | |
| 5 | |  |  | | | |


