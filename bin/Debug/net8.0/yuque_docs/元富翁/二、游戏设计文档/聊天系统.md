# 一、概述
## 1.1 文档说明
+ 本文档说明了聊天系统的功能需求和界面设计。

## 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/06/20</font> | | 陆晓笛 | <font style="color:black;">文档创建</font> |


## 1.3 设计思路
+ 玩家可以在聊天系统与其他玩家聊天，并且接收系统通知。

# 二、功能说明
## 2.1 各频道说明
### 2.1.1 世界频道
主要为所有玩家的发言频道，跨服。

+ 展示发言玩家的名称、头像、玩家等级、发言时间、玩家的聊天内容。
+ 玩家可发送聊天内容。

#### 2.1.1.1 语种频道
+ 世界频道中单独划分多个语种频道组，玩家可以自行选择自己的语种。
+ 首次进入世界频道默认进入玩家设置的语言所对应的语种频道组，热门语种可分多个频道。

      同一个组按照频道顺序分配，每个频道设置分配上限，达到上限后下一个玩家则被分到下一个频道。

+ 玩家可自由切换频道进行聊天。

### 2.1.2 系统频道
仅作为系统推送信息的频道，推送一些预设好的信息内容，支持富文本，玩家无法发言。

### 2.1.3 私聊频道
和好友之间私聊。

+ 进入频道首先展示聊天过的好友列表。

      列表排序方式：在在线→离线的基础上，按照来消息的顺序进行排序。

+ 点击指定好友展开聊天栏，展示聊天内容，底部进行文本发送。再次点击好友则会收起聊天列表变会好友列表。

### 2.1.4 聊天发言规则说明
+ 发言内容：发言字数存在限制，不支持富文本。若发送表情，则支持图文混排，表情包只能单独发送。
+ 发言间隔：为了避免刷屏，玩家连续发言之间设置间隔，且重复聊天一定次数后进行提醒。
+ 禁言：玩家发表不当言论或者刷屏可进行禁言，设置禁言时间。
+ 内容存储：设置最大聊天存储数量。

### 2.1.5 自动翻译
+ 当收到的聊天非玩家当前语言时，文本旁出现翻译按钮，点击翻译，并在文本下显示翻译后的内容。

## 2.2 主界面聊天条
# 三、界面说明
## 3.1 入口
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718957544334-6409421b-efdc-4451-b2a0-14b8672c9ff4.png)主界面添加聊天条：

+ 最左边显示聊天图标按钮，点击收起聊天条，只保留图标。
+ 显示聊天频道，最近的一条聊天，包含发送人名称+聊天内容。

## 3.2 聊天界面说明
聊天界面整体和idolbox中的相同。

### 3.2.1 世界聊天
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1719292330634-b452fb78-ccad-4f4f-ad6a-e06606f1f1b1.png)

### 3.2.2 系统聊天
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718960157635-e052fc88-82da-4e5c-ad01-4bcb733ddabf.png)

### 3.2.3 私聊玩家列表![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1719816638033-def4586c-4713-4664-9865-444b67b636b6.png)
### 3.2.4 私聊聊天框
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718962231500-29f03d10-d749-4eb5-9608-4ab57d76bd3d.png)

# 四、配置表说明
[Chat.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43554293/1719298500373-dc9b7a3d-aa79-4d5e-bb9f-8946c10f342b.xlsm)

# 五、功能需求清单
| **<font style="color:white;">序号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">优先级</font>** | **<font style="color:white;">需求描述</font>** | **<font style="color:white;">自检</font>** | **<font style="color:white;">确认</font>** | **<font style="color:white;">备注</font>** |
| :---: | --- | --- | --- | --- | :---: | :---: |
| <font style="color:black;">1</font> | 聊天栏 |  | 主界面聊天栏展示 | <font style="color:black;"></font> | <font style="color:black;"></font> | |
| <font style="color:black;">2</font> | 频道 |  | 聊天频道划分 | | | |
| <font style="color:black;">3</font> | 聊天 |  | 聊天框内容、发送逻辑 |  | | |
| <font style="color:black;">4</font> |  |  | 表情发送逻辑 | | | |
| <font style="color:black;">5</font> | 私聊 |  | 私聊列表展示逻辑 | | | |


# 六、美术需求清单
## 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | | |
| :---: | --- | --- | --- |
| <font style="color:black;">1</font> | <font style="color:black;">世界频道&系统频道界面</font> | | |
| <font style="color:black;">2</font> | <font style="color:black;">私聊-玩家列表界面</font> | | |
| <font style="color:black;">3</font> | <font style="color:black;">私聊-聊天界面</font> | | |


## 6.2 动效需求
# 七、String需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** | **<font style="color:white;">stringID</font>** |
| :---: | --- | --- | --- | --- | :---: |
| <font style="color:black;"></font> |  |  |  |  | |
| <font style="color:black;"></font> |  |  |  |  | |
| <font style="color:black;"></font> |  |  |  |  | |


