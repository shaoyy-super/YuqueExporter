# 概述
## 文档说明
名词解释：

棋盘（Chassboard）：指游戏中核心玩法的3D场地，配合游戏主界面进行展示。

本文档主要讲述棋盘的基础框架需要支持的功能和后续会拓展的方向，不涉及具体的玩法。

## 文档维护
| 版本 | 时间 | 负责人 | 修改内容 |
| --- | --- | --- | --- |
| 1.0 | 2024/6/5 | 何佳蔚 | 文档创建 |
| | | | |


## 设计思路
需要一个从功能上和表现上都很通用的棋盘框架，便于美术去尝试风格和效果，以及后续的活动玩法中对棋盘进行拓展。

# 功能说明
## 格子
### 概念
每个玩家都有一个主棋盘，棋盘内有N个格子，玩家经过/停留在格子上时会触发格子的特殊效果。

### 逻辑
格子的个数和类型需要策划配置，格子总数一定是4或4的倍数，每个格子为矩形，所有格子按顺序链接，形成一个首位相连的环形。

每个格子的距离都为1，当玩家移动距离大于格子上限时，则超出部分从起始格子延续，首位格子连接形成循环。

## 相机
### 默认相机
玩家每次进入游戏时都会重置到默认相机，提供固定的相机<font style="color:#DF2A3F;">位移（相对于玩家位置）</font>、<font style="color:#2F8EF4;">高度</font>、俯仰角。

默认相机是挂在相对于玩家棋子的点上，永远能看到玩家当前棋子位置以及未来的几个格子。

### 玩家操作
玩家可以通过**<font style="color:#DF2A3F;">滑动</font>**修改相机**<font style="color:#DF2A3F;">位移</font>**，通过**<font style="color:#2F8EF4;">捏合</font>**修改相机的**<font style="color:#2F8EF4;">高度（非直上直下，为曲线）</font>**，无法修改相机的俯仰角。

需要策划/美术配置的参数：移动速度、缩放速度。

（预期在引擎内实时可视化配置，真机内通过GM指令呼出按钮和参数位置可视化配置，下同）

### 位移边界和高度边界
相机的位移边界和高度边界分为硬边界和软边界。

#### 硬边界
棋盘最外侧的一个矩形/圆形边界，相机无法位移或缩放超过硬边界。

需要策划/美术配置的参数：硬边界范围。（可视化框一块，或配置矩形的对角线2点的位置/圆心位置+半径）

#### 软边界
软边界是硬边界范围内的一个矩形/圆形边界，相机可以通过悬停操作的形式超过软边界，但停止悬停操作（松手）后，镜头会回弹至软边界范围内。

需要策划/美术配置的参数：软边界范围、回弹速度系数（需求同上）

### 相机重置
当玩家操作相机后移动至其他弹窗、界面时，需要保存下相机的位置和高度。

当玩家从弹窗返回主界面时，相机的位置和高度不变；

当玩家从其他界面返回主界面时，相机的高度不变，位置重置到默认相机的位置。

### 玩法
棋盘玩法详见[棋盘系统（格子玩法）](https://snh48group.yuque.com/zdlwma/kxyozs/ht7mflcg8qskqb2l?singleDoc#)



# 界面说明
详见[棋盘系统（格子玩法）](https://snh48group.yuque.com/zdlwma/kxyozs/ht7mflcg8qskqb2l?singleDoc#)



# 表设计
详见[棋盘系统（格子玩法）](https://snh48group.yuque.com/zdlwma/kxyozs/ht7mflcg8qskqb2l?singleDoc#)

[Chassboard.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43256847/1717488915887-d7ef9248-436e-42f6-88d1-3feb34c20ee0.xlsm)



# 功能需求清单
| 编号 | 分类 | 优先级 | 需求描述 | 策划验收 | 备注 |
| --- | --- | --- | --- | --- | --- |
| 1 | 棋盘 | 1 | 默认棋盘场景 | | |
| 2 | | 1 | 格子逻辑 | | |
| 3 | 相机 | 1 | 默认相机 | | |
| 4 | | 2 | 相机操作 | | |
| 5 | | 2 | 地图边界 | | |
| 6 | | 3 | 相机重置逻辑 | | |




# 美术需求清单
## 场景需求
| 所属系统 | 场景类型 | 场景名-美术 | 场景用途 | 描述 |
| --- | --- | --- | --- | --- |
| 棋盘 | 主界面场景 |  | 通用棋盘 | 由40个格子连接成的棋盘（包括棋盘中央的箱子和机会卡），格子上需要写字和类型的标志性icon，后续会放些实体的“盾牌”、“活动代币”等道具覆盖在格子上。<br/>所有的场景都会用这同一套通用棋盘，后续会根据节日活动等对棋盘整体进行换色/加装饰等设计。<br/>需要美术风格兼容性高，能放置在其他场景中不违和。 |
| 城市 | 主界面场景 | | 第一张地图<br/>（默认） | 游戏的第一张地图，用于主要的宣传展示和新手引导。<br/>需要高质量的写实风格的城市。<br/>城市本身中建筑数量和品质较低，玩家停留时间很短（10分钟） |
| 城市 | 主界面场景 | | 第二张地图 |  |




# 参考示意
![](https://cdn.nlark.com/yuque/0/2024/png/43256847/1717488978619-3e2bc3a3-b7c0-4d77-9279-61da27fed21a.png)![](https://cdn.nlark.com/yuque/0/2024/png/43256847/1717489007647-34c58397-ff84-45c5-906f-ac176b0ef349.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43256847/1717488924061-e0968945-0059-4585-911c-9d86c0d1fe4e.png)

