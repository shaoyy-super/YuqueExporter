# 一、概述
## 1.1 文档说明
本文档主要说明了游戏中建筑系统以及棋盘系统中的建筑玩法。

## 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/6/05</font> | | 陆晓笛 | <font style="color:black;">文档创建</font> |
| | | |  | |


## 1.3 设计思路
作为玩家产出和消耗的重要一环，玩家通过花费货币来升级建筑，解锁城市，提升等级，获得地产房，以此在棋盘上获取更好的收益，再将收益投入进建筑系统，以此来达成基础循环。

## 1.4 版本功能
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718159058868-f127ca77-789b-4d04-ba48-c53ad86f15de.png)

# 二、功能说明
## 2.1 名词设定
<font style="background-color:#FBDE28;">城市/City</font>

为建筑系统中的主要展示场景，承载建筑的展示功能。



<font style="background-color:#FBDE28;">建筑/Building</font>

每个城市场景中展示的地标建筑，可升级，并且升级时外观变化。



<font style="background-color:#FBDE28;">地产房/House</font>

建筑升级时可获得，置于棋盘上可提升收益。

## 2.2 玩法流程
+ 解锁城市→花费货币升级建筑→所有建筑升级完毕→解锁并前往下一个城市。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718076276123-767b2e2f-e945-4873-8459-42c96ab880e6.png)

## 2.3 规则说明
### 2.3.1 城市
#### 城市解锁
+ 城市类似于游戏中的章节，将该城市中所有建筑升级完毕，便解锁并进入下一个城市。
+ 解锁下一个城市之后，返回棋盘，展示新城市的棋盘场景。

#### 解锁奖励
+ 每次完成一个城市，会获得一定数量的资源奖励。

#### 建设流程
+ 所有建筑建设完成→弹出城市奖励→领取后自动解锁并进入下一个城市

#### 城市场景和建筑点位
+ 游戏设置多个城市，每个城市对应主界面棋盘中间的城市场景。

       前往下个城市后，城市场景变更。

+ 城市场景中设置固定的点位用于放置建筑，相同数量建筑的场景中，点位不会因为切换场景而发生变化。

### 2.3.2 建筑
#### 建筑数量
+ 每个城市中设置固定数量的建筑，数量暂定为5个。

#### 建筑升级
+ 建筑分为多个等级，需要花费货币进行多次升级才能建造完全。
+ 升级伴随着建筑外观变化，等级越高，外观越好。
+ 等级依照城市来定，前期等级较少，后期等级变多，暂定最多6级。

#### 建筑升级产出
+ 每次升级建筑，可以获得一栋绿色地产房并且提升1级财富等级。

       地产房：用于放置在棋盘地产格上，增加玩家收益。（对应收取租金玩法文档）

       财富等级：每到达一个财富等级里程碑，可以解锁特定功能，获得丰富的奖励。（对应财富等级文档）

#### 建筑攻击和修复
建筑攻击的玩法有单独文档，此处仅针对建筑系统中对应的规则。

+ 建筑被其他玩家攻击，外观破损，建筑变为已抵押状态，顶部显示攻击玩家头像，玩家花钱修复后外观复原。
+ 建筑被攻击后会丢失一个等级，并回收经验，玩家修复后补回等级和经验。
+ 当建筑在破损情况下被攻击时，顶部玩家头像变更为最近攻击的玩家。
+ 建筑可被多次攻击，修复花费不变。

#### 建造和修复支出
+ 建造支出=建筑升级比率*玩家获得金钱基础值
+ 修复支出=建筑修复比率*玩家获得金钱基础值

其中玩家获得金钱基础值= 基础固定值*城市等级系数

## 2.4 场景说明
### 2.4.1 场景和建筑外观
+ 每个城市涉及一个场景，对应建筑与之风格统一。
+ 未建造建筑时，建筑位置为空地展示。
+ 首次升级时视为建造，场景中空地建造建筑，之后每次升级外观变化直至升级至最终外观。
+ 建筑被攻击后，会有外观变化，玩家修复后复原。

### 2.4.2 相机和玩家操作
+ 进入场景时相机默认以固定角度和位置展示场景，玩家无法左右拖动场景。
+ 玩家可以通过双指操作调整相机高度进行场景缩放，缩放的位置以双指连线中心点为基准。

       玩家松手后，相机归位。玩家操作时ui隐藏。

+ 玩家玩家离开该界面，下次进入时相机重置。
+ 建筑升级时会首先拉进并焦距该建筑，播放完升级动画后，再归位。

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43554293/1717497454598-326be0ee-f39d-4718-8c6a-f8edebb21337.jpeg)![](https://cdn.nlark.com/yuque/0/2024/jpeg/43554293/1717497458416-cce5c5ff-3fbf-4bc0-9aec-0acd7c6e43b2.jpeg)

# 三、界面说明
## 3.1 入口
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718077386474-90ae4f6c-0f17-487c-ada5-d1289f5980b1.png)

+ 点击主界面底部的建筑入口,此时镜头拉进至中间城市部分。

## 3.2 建筑界面
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1718097535471-7cdedf70-96fe-4986-9e02-bdf3747d711c.png)

# 四、配置表说明
[City.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43554293/1718785544724-7f52aed4-ec98-44fb-bf16-c515ce3bb926.xlsm)

# 五、功能需求清单
| **<font style="color:white;">序号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">优先级</font>** | **<font style="color:white;">需求描述</font>** | **<font style="color:white;">自检</font>** | **<font style="color:white;">确认</font>** | **<font style="color:white;">备注</font>** |
| :---: | --- | :---: | --- | --- | :---: | :---: |
| <font style="color:black;">1</font> | 系统入口 | <font style="color:black;">1</font> | <font style="color:black;">主界面系统入口</font> | <font style="color:black;"></font> | <font style="color:black;">0</font> | |
| <font style="color:black;">2</font> | 城市场景 | <font style="color:black;">1</font> | <font style="color:black;">城市场景展示</font> | | | |
| <font style="color:black;">3</font> | 新城市解锁 | <font style="color:black;">1</font> | <font style="color:black;">城市完成奖励，城市解锁逻辑</font> |  | | |
| <font style="color:black;">4</font> | 建筑展示 | <font style="color:black;">1</font> | <font style="color:black;">建筑外观展示</font> | | | |
| <font style="color:black;">5</font> | 建筑升级 | <font style="color:black;">1</font> | <font style="color:black;">建筑升级逻辑，升级外观变化</font> | | | |
| <font style="color:black;">6</font> |  | <font style="color:black;">1</font> | <font style="color:black;">建筑升级奖励</font> | | | |
| <font style="color:black;">7</font> | 建筑被攻击 | <font style="color:black;">1</font> | <font style="color:black;">建筑抵押逻辑，建筑战损外观</font> | | | |
| <font style="color:black;">8</font> | 建筑修复 | <font style="color:black;">1</font> | <font style="color:black;">建筑修复逻辑</font> | | | |




# 六、美术需求清单
#### 一期
进入建造系统界面，展示城市场景。

城市中设置建筑点位，展示建筑。

#### 二期
建筑可进行升级，首次升级时建筑从无到有，每次升级时建筑外观更改。

建筑被攻击后使用盾牌抵挡，若无盾牌建筑进入抵押状态。

## 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | | | **<font style="color:white;">性质</font>** |
| :---: | --- | --- | --- | :---: |
| <font style="color:black;">1</font> | <font style="color:black;">建筑系统主界面</font> | | | <font style="color:black;">一级界面</font> |


## 6.2 动效需求
| 编号 | 优先级 | 需求名 | 需求类型 | 描述 | 参考 |
| --- | --- | --- | --- | --- | --- |
| 1 | 1 | 进入界面动效 |  |  |  |
| 2 | 1 | 建筑升级动效 |  | 通用动效，播放建筑升级动画和特效 |  |
| 3 | 1 | 建筑抵押状态 |  | 通用动效，播放建筑被攻击后损坏的动画和特效 |  |
| 4 | 1 | 建筑修复动效 |  | 通用动效，播放建筑修复动画和特效 |  |


## 6.3 场景&模型需求
| **<font style="color:white;">所属系统</font>** | **<font style="color:white;">类型</font>** | **<font style="color:white;">名称-美术</font>** | | **<font style="color:white;">用途</font>** | | | **<font style="color:white;">描述</font>** |
| --- | :---: | :---: | --- | :---: | --- | --- | :---: |
| <font style="color:black;">建筑</font> | <font style="color:black;">城市场景</font> | | | <font style="color:black;">展示城市，放置建筑，城市中预留5个固定点位用于摆放建筑</font> | | | <font style="color:black;">体现当前城市主题，需要制作大量的不同城市场景，具体按照后续规划</font> |
| 建筑 | <font style="color:black;">建筑模型</font> | | | <font style="color:black;">摆放在城市场景中的模型</font> | | | <font style="color:black;"></font> |


# 七、String需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** | **<font style="color:white;">stringID</font>** |
| :---: | --- | --- | :---: | --- | :---: |
| <font style="color:black;">建筑升级流程</font> | <font style="color:black;">点击建筑升级</font> | <font style="color:black;">金币不足</font> | <font style="color:black;">文字提示</font> | <font style="color:black;">金币不足，无法升级</font> | |
| | <font style="color:black;">点击建筑升级</font> | <font style="color:black;">建筑已满级</font> | <font style="color:black;">文字提示</font> | <font style="color:black;">当前建筑已满级，无法继续升级</font> | |




# 参考视频
建筑升级

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/ihnp3bxynqf2rweg#hLi5h)

建筑抵押

[此处为语雀卡片，点击链接查看](https://www.yuque.com/zdlwma/kxyozs/ihnp3bxynqf2rweg#UfiY4)

建筑修复





