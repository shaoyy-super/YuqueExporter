## 1.主要功能实现
（1）支持安卓设备调试后连接自动识别

（2）导入设备名称json文件，输入报告时读取自己设置的中文设备名称

（3）支持在安卓多台设备中批量运行所有后缀为air的测试脚本

（4）支持指定某个用例在某台设备或某几台设备中进行同时运行

（5）支持多脚本多设备运行完成后，生成一份汇总的测试报告，且点击汇总测试报告中具体的某一个用例，还能查看该用例详细的airtest报告





## 2.框架结构说明
![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712907468547-8e12907e-2b35-45f4-9a7a-d10a3bbcab8d.png)



## 3.框架搭建说明
![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712907493768-3d14d180-9c7a-4d0b-b75c-085797537144.png)

## 4.框架运行
（1）可以运行run.py来执行整个框架来运行设备和脚本

（2）写脚本或调试时，可以在AirtestIDE下来操作，编写完成后可以放入当前框架下的Airtest_Case目录下，调试完成后，再用run.py执行



## 5.报告展示
![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712908769165-f3fe436f-47a0-488e-a5bd-d3861358e5a9.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712908775250-1dbf3870-d9b7-46e3-9457-66848b0e0b7c.png)



## 6.脚本拓展
（1）需要多线程解决自动化集群对国产手机一些第三方安装未知应用需要手动输入账号、密码、点击确定等问题（基于Android层的poco可以通用解决）

（2）使用装饰器解决各个品牌游戏外的各种弹窗和异常情况，包括设备的系统升级提示弹窗、手机发烫过热弹出提示等，并对不同的的手机品牌都做了适配

如：小米手机高温提示可自动解决该弹窗并尝试重新开始自动化测试；三星手机高温提示20S内强制关闭游戏，自动关闭游戏后，可通过mLogcat过滤有效的Log信息

（以上基于Android层的poco可以通用解决，若出现新的问题，捕获异常后继续调试脚本）

（3）在自动化脚本里加入各种预判游戏内选项选择后的所有可能性，并对预期结果进行条件判断和处理，这样在经过高频率、多次数、多选择的多轮测试后，每次测试报告里都会有不同的测试条件和预期结果（单台手机的测试可能性、随机性远远不如自动化集群发现的问题基数、数量和随机性，即使进行多轮测试后，依旧可以发现潜在的新的问题）

（4）建立专属的自动化集群并定制交互脚本，模拟玩家行为后，导入更多python第三方库，每台机器都可以自主的随机生成测试数据，更深入的去发现一些同步角色信息的问题和玩家交互下的各种异常状态和显示，并可以通过大规模，多次数、多频率的测试结果，触发概率更小更难以发现的问题

（5）数值平衡性：

通过导入线上玩家的数据库，获取线上玩家的数据，以随机阵容和搭配来进行随机的pve、pvp和爬塔等战斗，并在战斗前截图并保存当前的阵容搭配、战力等，在战斗结束时，打开战报截图记录当前的战斗结果，并打印成测试报告。



## 7.打包成可视化工具
使用PyQT5写可视化界面，再用PyInstaller对整个项目进行打包

![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712910148484-1b9537af-3d7b-4a56-9dae-7cc486225433.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43256946/1712910165766-5fe64cb1-18b0-40fa-94a2-edd5d604da11.png)

## 8.遇到的问题
（1）脚本运行过程中，窗口会出现卡顿，假死

（2）脚本运行过程中点击其他按钮（譬如：刷新设备、下拉切换脚本等按钮），会干扰脚本运行，导致脚本运行失败

（3）切换pc设备，脚本运行失败

1和2参考一位大佬的教程，使用多线程和线程锁解决主线程阻塞，未响应、假死状态

[https://zhuanlan.zhihu.com/p/62988456](https://zhuanlan.zhihu.com/p/62988456)

3导入airtest模块后解决



## 9.环境说明
（1）运行环境为Python3

（2）点击文件夹下的《安装运行环境.bat》文件，装好运行环境

（3）将自己写好的后缀为.air的脚本放置在Aircase文件夹下

（4）启动run.exe查看是否有其他报错需要调试

