## 一、策划案链接： 
[战斗系统](https://snh48group.yuque.com/cod5mf/iwqppn/ds6eecnop09xnypg?singleDoc#)

## 二、特性时间线：@PM
![](https://cdn.nlark.com/yuque/0/2024/png/12926950/1719918474503-eaed2fa1-f5cd-401e-807d-9cc25583b923.png)

## 三、详细开发内容 @程序 @策划@UI
### 技术方案
<font style="color:#000000;">暂不需要</font>

### 功能需求清单@程序 @策划
#### 清单：清单说明，黑体说明等待需求，灰色说明非本版本需要完成的功能
| 编号 | 分类 |  | 优先级 | 需求描述 | 程序自检 | 策划验收 | 备注 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 手牌区 | 手牌信息 | 1 | 需要在卡牌上展示卡牌对应图片，对应icon大小（**等待需求）**，对应颜色**（等待需求）**，消耗能量，技能名称，主动被动，天赋还是其他**（CD中是否需要置灰，是否需要更改无法打出的牌的放置顺序，等待需求）**[@姚仕达](undefined/yaoshida) | 目前仅完成<font style="color:#2F4BDA;">卡牌名称</font>和<font style="color:#2F4BDA;">能量</font>显示 | 名称、能力显示正常 |  |
| 2 | | 手牌显示 | 1 | 手牌应该居中放置，最右边的卡牌为最上层，从右到左层级递减，弧形放置**（弧度大小待定，等待需求）** | 已完成 | 已完成 |  |
| 3 | | 手牌叠放 | 1 | 当手牌无法排满手牌区时，重合率为**(等待需求）**，可以放满以后，应在手牌区内均匀放置 | <font style="color:#2F4BDA;">等待卡牌具体美术效果需求</font> | <font style="color:#2F4BDA;">等待卡牌具体美术效果需求</font> |  |
| 4 | | 手牌点击 | 1 | 手牌被点击后应该在手牌区消失并在选牌区显示并扣除响应能量，如能量不足或者存在CD需要弹出弹窗提示玩家不能选中的原因并无效本次点击[@姚仕达](undefined/yaoshida)（补一下弹框） | 已完成 | 已完成 |  |
| 5 | | 手牌区显示 | 1 | 手牌区应该被放置在默认层，并被放置在屏幕右下角对应位置，应该在XXX时显示XXX时消失**（等待需求）**[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 6 | | 手牌区结束回合按钮功能 | 1 | 按下将包含选牌区确定键所有功能，并结束当前己方回合 | 已完成 | 已完成 | |
| 7 | | 结束回合按钮显示时机 | 2 | 出牌阶段，当玩家未选择任何卡牌时显示。[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 8 | 选牌区 | 选牌 | 1 | 需要在卡牌上展示卡牌对应图片，对应icon大小**（等待需求**），对应颜色**（等待需求）**，消耗能量，技能名称，主动被动，天赋还是其他，技能的详细描述，技能的数据 | 目前只显示<font style="color:#2F4BDA;">技能名称</font>，<font style="color:#2F4BDA;">能量消耗</font>和<font style="color:#2F4BDA;">技能描述</font> | 技能名称，能量消耗和技能描述显示正常 | |
| 9 | | 选牌显示 | 1 | 手牌应居中放置，最右边的卡牌为最上层，从右到左层级递减，水平放置。 | 已完成 | 已完成 | |
| 10 | | 选牌叠放 | 1 | 当手牌无法排满手牌区时，空格长度为**10**，可以放满以后，应在手牌区内均匀放置 | 已完成 | 已完成 | |
| 11 | | 选牌点击 | 1 | 手牌被点击后应该在手牌区消失并在选牌区显示并归还所耗能量 | 已完成 | 已完成 |  |
| 12 | | 选牌区显示 | 1 | 选牌区应该被放置在屏幕正中偏上的位置，存在选中牌的时候显示，不存在的时候消失，在UI层级中应该处于上层[@高岳雷](undefined/loading-mozdj) | 已完成 | 已完成 | |
| 13 | | 确认选牌 | 1 | 确认后选牌区和手牌区应该隐藏，按照打出顺序在小牌区显示对应小牌，应暂停回合计时 | 已完成 | 已完成 | |
| 14 | 小牌区 | 小牌 | 2 | 需要在卡牌上展示卡牌对应图片，对应icon大小（**等待需求）**，对应颜色**（等待需求）**，技能名称，消耗能量 | <font style="color:#2F4BDA;">目前只显示技能名称和消耗的能量</font> | 技能名称和消耗的能量显示正常 | |
| 15 | | 小牌显示 | 2 | 小牌应该居左放置，最左边的卡牌为最上层，从左到右层级递减，水平放置**** | 已完成 | 已完成 | |
| 16 | | 小牌叠放 | 2 | 小牌应全部叠放，在限定长度内均匀叠放 | 已完成 | 已完成 | |
| 17 | | 小牌区显示 | 2 | 应在选牌被确定后显示，在小牌被全部打出后消失，敌方也是这样，我方小牌区应在我放血条和手牌区中间，敌方小牌区应在敌方血条下和我放能量条上，小牌区应该属于默认层**（等待需求）**[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 18 | | 小牌区打出 | 2 | 将最上层的卡牌删除，在屏幕中央打出区显示 | 已完成 | 已完成 | |
| 19 | | 敌方小牌区 | 2 | 应该敌方对应时期执行与我方一致的操作 | 已完成 | 已完成 | |
| 20 | 打出区 | 打出牌 | 1 | 需要在卡牌上展示卡牌对应图片，对应icon大小**（等待需求**），对应颜色**（等待需求）**，消耗能量，技能名称，主动被动，天赋还是其他，技能的详细描述，技能的数据 | 目前只显示<font style="color:#2F4BDA;">技能名字</font>，<font style="color:#2F4BDA;">能量</font>和<font style="color:#2F4BDA;">技能描述</font> | 技能名字，能量和技能描述显示正常 | |
| 21 | | 打出牌显示 | 1 | 打出牌应居中放置，一次只展示一张 | 已完成 | 已完成 | |
| 22 | | 打出牌区显示 | 1 | 打出区应该在屏幕正中偏上显示，出现选牌后显示**（等待需求）**秒后消失[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 23 | 退出键 | 退出键 | 4 | 一个按钮**<font style="color:#8A8F8D;">（等待需求）</font>** | 已完成 | 已完成 | |
| 24 | 设置键 | 设置键 | 4 | 一个按钮**<font style="color:#8A8F8D;">（等待需求）</font>** | 已完成 | 已完成 | |
| 25 | 宠物头像 | 宠物头像显示 | 2 | 宠物头像部分应该显示双方未上场的两个宠物的头像，在头像的右上角或者左上角应该显示排列的顺序 | 已完成 | 已完成 | |
| 26 | | 宠物头像排列 | 2 | 下一个要出场的宠物应该被放在中间的位置，如果场上宠物死亡应该自动被排在最后，并且原本排在第二位的应排在中间的第一位                    | 已完成 | 已完成 | |
| 27 | | 宠物死亡以后的头像 | 2 | 宠物死亡后排列的顺序数字应该消失，并且宠物头像置灰 | 已完成 | 已完成 | |
| 28 | 计时区 | 回合数 | 1 | 回合数应该显示当前回合数 | 已完成 | 已完成 | |
| 29 | | 倒计时 | 1 | 倒计时应该显示当前选牌阶段剩余时间 | 已完成 | 已完成 | |
| 30 | | 计时区显示时机 | 1 | 我方操作的时候一直显示，不会隐藏 | 已完成 | 已完成 | |
| 31 | | 计时区重点提示 | 4 | <font style="color:#8A8F8D;">在剩余X秒时，应</font>**<font style="color:#8A8F8D;">（等待需求）</font>** | <font style="color:#2F4BDA;">暂无需求</font> | 等待美术方案 | |
| 32 | 宠物状态区 | 状态区显示 | 1 | 状态去在战斗中始终显示，被放置在默认层 | 已完成 | 已完成 | |
| 33 | | 血条显示 | 2 | 血条需要按照血量和总血量的百分比从右往左减少，需要<font style="color:#8A8F8D;">缓动X秒</font>**<font style="color:#8A8F8D;">（等待需求）</font>**[@姚仕达](undefined/yaoshida) | <font style="color:#2F4BDA;">暂无缓动</font> | 等待美术方案 | |
| 34 | | 血条颜色 | 2 | <font style="color:#8A8F8D;">血条减少到X时颜色应变为X</font>**<font style="color:#8A8F8D;">（等待需求）</font>** | 暂无<font style="color:#2F4BDA;">颜色变化</font> | 等待美术方案 | |
| 35 | | 血条数值 | 1 | 在血条上方应该显示宠物总血量和现在的血量 | 已完成 | 已完成 | |
| 36 | | 宠物名称 | 1 | 应该显示宠物的名称 | 已完成 | 已完成 | |
| 37 | | 宠物等级 | 1 | 应该在名称右边显示宠物目前的等级 | 已完成 | 已完成 | |
| 38 | | 护盾图标 | 2 | 应在状态区的最右边显示宠物护盾的图标，如果存在护盾的话 | 已完成 | <font style="color:#DF2A3F;">有多余的护盾图标残留</font> | |
| 39 | | 护盾显示 | 2 | 再存在护盾的时候，应该显示护盾，护盾值较高时，护盾应变大，较低时应缩小，护盾应该被放置在状态栏最下层以防挡住其他信息 | 暂无<font style="color:#2F4BDA;">护盾大小</font>变化 | 暂无<font style="color:#2F4BDA;">护盾大小</font>变化 | |
| 40 | | 护盾数值 | 3 | 应该显示护盾当前的值（是否需要和护盾一起放大，**等待需求）**[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 41 | | buff图标 | 1 | 当宠物身上存在buff和debuff的时候应该挂载buff图标，位置在血条上方 | 已完成 | 已完成 | |
| 42 | | buff显示 | 2 | buff图标应该显示buff对应的icon，对应的颜色，并选择性显示上下标，最多显示最重要的X个buff或debuff**（等待需求）**[@姚仕达](undefined/yaoshida) | 目前可以<font style="color:#2F4BDA;">显示Icon</font>，显示<font style="color:#2F4BDA;">上下标</font>并显示最<font style="color:#2F4BDA;">重要的6个buff</font>（根据表里配的优先级） | 已完成 | |
| 43 | | buff上标 | 3 | 这里应该显示buff剩余的持续时间，以回合为单位。如果只剩余1回合，可不显示 | 已完成 | <font style="color:#DF2A3F;">buff回合数角标残留；八卦术会清除debuff图标的显示</font> | |
| 44 | | buff下标 | 3 | 这里应该显示buff的层数，如果只有一层，可以不显示 | 已完成 | 已完成 | |
| 45 | | buff顺序 | 3 | 按照创建顺序**<font style="color:#8A8F8D;">（等待需求）</font>**[@姚仕达](undefined/yaoshida) | 已完成 | 已完成 | |
| 46 | | 敌方状态区 | 2 | 目前和我方一致只不过被放在右上角**** | 已完成 | <font style="color:#8A8F8D;">已完成</font> | |
| 47 | 能量区 | 能量区显示 | 1 | 在战斗场景中一直显示 | 已完成 | 已完成 | |
| 48 | | 能量区数值 | 1 | 能量区存在两个数值，随着回合数每回合+1的总能量值，一个当前能量值，当前能量值不会超过99****，当选牌的时候应该扣除（或者添加）对应的能量，如果放弃选某张牌应该归还能量 | 已完成 | 已完成 | |
| 49 | | 能量条 | 2 | 按照能量和总能量的百分比在一个约2/3弧状的状态条内对应显示能量 | 已完成 | 已完成 | |
| 50 | | 能量数值算法 | 2 | 应该按照卡牌需要的能量扣除能量值，在每回合开始时能量值上线+1并补满现有能量值 | 已完成 | 已完成 | |
| 51 | 中央提示区 | 你的回合 | 1 | 需显示你的回合X回合 | 已完成 | 已完成 | |
| 52 | | 敌方回合 | 1 | 需显示敌方回合X回合 | 已完成 | 已完成 | |
| 53 | | 能量不足 | 1 | 弹框显示能量不足 | 已完成 | 已完成 | |
| 54 | | 技能cd | 1 | 弹框显示XX技能还在CD | 已完成 | 已完成 | |
| 55 | | 胜利 | 2 | 显示胜利 | 已完成 | 已完成 | |
| 56 | | 失败 | 2 | 显示失败 | 已完成 | 已完成 | |
| 57 | 自动战斗按钮 | 自动战斗按钮效果 | 3 | 按钮被按下后，<font style="color:#8A8F8D;">应该启动自动AI托管战斗功能</font> | 已完成 | 已完成 | |
| 58 | | 自动战斗按钮动效 | 3 | 按下后，按键特效应该启动 | 已完成 | 已完成 | |
| 59 | 快速战斗按钮 | 快速战斗按钮效果 | 3 | 按钮被按下后，<font style="color:#8A8F8D;">快速播放宠物战斗动画</font> | 已完成 | 已完成 | |
| 60 | | ~动效 | 3 | 按下后，显示播放宠物动画的倍数，按下后按照1，2，3倍显示数字，对应播放动画倍数 | 已完成 | 已完成 | |


#### 工时评估：
:::color3
+ **功能点对策划表（1D）**
+ **预制体制作（3D）**
    - 血条，护盾，各普通按钮，卡牌预制体（1D现在已经有逻辑了，很快就能完成）
    - 能量条预制体，自动战斗按钮（有个特效）预制体（1D）
    - 弹出的各个节点提示预制体（1D）
+ **现有逻辑改动（1D）**
    - 更改选牌展示逻辑（0.5D）
    - 能量逻辑（0.5D）
+ **新逻辑书写（2D）**
    - buff（需要显示层数和回合数，比较复杂1D）
    - 护盾逻辑书写（需要放大）（0.5D）
    - 怪物头像显示（0.5D）
+ **<font style="color:#DF2A3F;">逻辑模块预留1D工作量</font>**
+ **多语言功能（1D）**
+ **卡牌展示基础逻辑得重新根据需求改（0.5-1D因为现在需求不知道）  **

:::



### UIchecklist@程序 @策划@UI
checklist说明：

**已检查：**✔

**已知问题暂不修改：╱（需特殊说明备注）**

**（需截图）：****需要截图已检查效果**

**（需描述）：****需要备注情况**

| **类型** | **检查事项** | **程序** | **策划&美术** |
| --- | --- | --- | --- |
| | | | |
| **文字** | **界面上所有文字，是否都是读取配置表，没有代码里写文字的情况** | 确认无误✔ | |
| | **多语言检查****多语言自动机翻工具说明****（需截图）** | **╱**只有卡牌使用机翻工具，因为游戏暂无多语言模块 | |
| **按钮** | **按钮大小、按钮颜色是否和美术效果图一致** | 确认无误✔ | 确认资源使用错误 |
| | **按钮状态：常态、点击态、选中态（如果有的话）效果是否同美术效果图一致** | 确认无误✔ | 暂无美术效果 |
| | **按钮的触碰区域是否做到比较容易点击，需要制定通用的标准** | 确认无误✔ | |
| **界面元素** | **界面元素的灰态是否同美术效果图一致：材质灰态、叠加灰色图片、替换灰色资源素材，使用的是3种中的哪一种** | 确认无误✔ | 确认 |
| | **检查界面的所有状态是否齐全****（需截图）** | 确认无误✔ | 确认 |
| | **是否按照UI示意图拼接界面元素（颜色，透明度，Sprite，位置，缩放等）** | 确认无误✔ | 敌我血条颜色；护盾尺寸 |
| **层级** | **检查呼出通用Tips界面（确认框、提示信息框）后层级显示是否正常** | 暂无此功能 | |
| **适配** | **在游戏视窗内设置4种Aspect，确认在4:3,18:9,21:9.7,21:9，四种比例下界面是否显示正常（其中18:9&21:9.7需要与美术示意图保持一致)****（需截图）** | **╱**4：3，18：9已确认，剩余两个需要进一步确认 | 4：3时候费用位置偏高 |
| **功能** | **界面加载响应速度是否过长，加载时界面的初始状态是否正常****（需描述）** | 正常✔ | |
| | **检查通用元素是否使用了通用预制体****（需描述）** | 通用元素已经使用通用预制体✔ | |






