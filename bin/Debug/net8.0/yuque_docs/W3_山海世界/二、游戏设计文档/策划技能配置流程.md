

## 1、确认技能效果
### 2-1、策划需求
确认技能需要的效果。比如主被动、攻击段数、buff情况等等

### 2-2、TML
确认美术TML效果。在专用的美术传资源的线上可以查看

美术的攻击动作需要能匹配技能的设计需要。如果有2者不匹配的情况需要做出适当调整



TML预览详细流程参考：[https://snh48group.yuque.com/cod5mf/iwqppn/yr9t24ghgyniwki6](https://snh48group.yuque.com/cod5mf/iwqppn/yr9t24ghgyniwki6)

## 2、表格配置
### 2-1、skill
a、技能id

每个技能分3个等级，id参考表头说明填写

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721201621355-4df225a8-0856-4d18-af30-8d68f42574bc.png)

b、技能基础定义

根据技能情况选填

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721201928140-71058332-486f-42ab-966c-b783bbc58512.png)

c、被动技能属性配置

如果技能为被动技能，且会在战斗开始就影响宠物的属性，可以在skill的effect中填写属性和数值。主动技能不生效，只能进行简单的加减乘除。

复杂的被动需要通过技能触发一个buff生效

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721201982256-890a6596-02a3-4598-ac91-f77cc5ab1a9f.png)

d、目标

选填，会和后续脚本内的目标产生影响。后续说明

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721202098143-93addae6-7e94-48e3-b8ad-2e661e0aff40.png)

e、技能受击和多段伤害

在tml中通过手动滑动帧数可以定位到美术动作和特效比较合适的出伤受击点，把对应的帧数填写到受击帧中。多段伤害用冒号隔开。

技能伤害和受击对应，有一段伤害就有一个技能伤害数值。千分比和固定数值分开显示，会显示2次

结束帧为TML中所有需要表演的轨道的最后一帧的帧数

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721202198719-4a3b61f8-8066-4023-8b36-9e7608911359.png)

f、对应的脚本id和TMLid

脚本：在除了基础的技能伤害效果外，所有需要有额外效果的技能都需要通过技能脚本实现，这里配置对应的技能脚本id。格式为：Skill/Skill_技能id。

TML：美术提供的TMLid

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721202419107-573aa980-736c-438b-bc1e-ca71536d79d9.png)

g、技能参数（暂无）

可以将脚本里数个参数提取到表里配置。为了方便后续调整数值

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721203483793-e5c936b8-e91b-4527-9e16-58b057264f42.png)

h、buff参数

所有本技能涉及到的所有buff的id。包括技能生效的buff产生的buff。给程序预加载使用

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721202989432-411c8395-8a09-4b82-be43-07041dccc9f3.png)



### 2-2、buff
a、buff id

通用buff按4位数id顺延；专属buff以宠物id为前缀顺延



b、buff图标

个别不需要在血条上方展示出来的buff，配空即可



c、buff基础定义

根据buff需要按表头描述选填

命中概率1000时为必命中

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721205662501-d3a00a9d-85dd-4229-a049-ef450bb50e8d.png)



d、buff参数、回合数

层数：层数适用于需要多层叠加的buff，比如：10层攻击+2%的buff就可以达到20%的攻击加成。显示在角标的左上方。不可叠层则最大上限为1.

回合数：回合数为buff的时间参数。游戏战斗内的主要时间单位是回合数。显示在角标的左下方

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721205750274-eb485b17-055c-4ca9-9784-30a069212913.png)



e、基础属性效果

和skill一样，一些基础的属性数值上的加减乘除的buff，可以通过effect字段来控制。如果有其他的特殊效果则需要通过脚本配置

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721205957219-ab6d8a1d-d126-4533-b6d7-96f9f1b97985.png)



f、对应的脚本id和TMLid

脚本：在除了基础的属性数值效果外，所有需要有额外效果的技能都需要通过技能脚本实现，这里配置对应的技能脚本id。格式为：Buff/Buff_技能id。

TML：美术提供的TMLid。buff的tml表现的是buff常驻在人物身上时候的效果

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721206961940-f8625338-041a-4aa0-9057-7c609e6d4192.png)





## 3、脚本配置
脚本可以实现非常复杂的技能效果，这里只做为入门的基础理解展示。更复杂的情况可以找程序

### 2-1、脚本框架
a、基础技能脚本框架

这里是一个施加buff的技能展示

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721207586122-8829ca0d-c350-4e92-b028-482d1fb40362.png)

绿色部分为注释，注意填写。方便后续的优化和查看

4到6行为对参数的引用和调用，直接复制即可。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721207818037-32b43043-0bfb-4b9c-81da-39e7c90a6761.png)

其中红色的字符为这个技能生效的时间，在HookType.lua中有其他可用的参数



Scripts为产生的效果行

AddBuff为需要实现的效果。效果可以替换成其他任意有接口的效果，在Scripts.lua中有其他接口。如果需要一个之前没有的效果找程序

括号内为对这个增加的buff的效果定义。以逗号分为3块：施法者，对象，buffid。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721207859138-dcc3edd9-3b69-4808-9e3e-7f7866880e8b.png)



b、脚本内的定义

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721208650503-836d7091-e68e-483c-b5b5-bbff6012b815.png)

local是策划在脚本内定义数据的地方，每一条都是一个数据。只有在这里定义了一个参数，后面才可以在value中使用这个参数

比如图中：

第一行定义了actor为拥有此buff的角色

第二行定义了hp为拥有此buff的角色的血量最大值。并在这条定义中使用到了actor

第三行定义了round为当前的回合数

第四行定义了最终护盾的数值，并且用到了上面血量和回合数的定义

在Scripts.lua中有其他可用的接口，需要用到额外的接口需要找程序。





### 2-2、对应检索目录
通过Emmylua插件可以快速定位到各个接口的位置，可以查看此接口的效果，以及可以替换的其他效果

此插件可以方便查找和跳转

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721208217605-941ff8f9-7ae2-4ea2-9f06-f281a6bd4414.png)





## 4、效果测试工具
在战斗预览的TestBattle中最下方有即时的信息打印，可以通过信息打印检测宠物的属性情况和技能、buff的生效情况























