# 一、概述
##   
1.1 文档说明
●本文档为市政厅系统下，每日活动玩法—官员竞选功能文档。主要设定每日活动改完发官员竞选相关流程，细节与主要的玩法框架。

##   
1.2 文档维护  

| <font style="color:white;">版本</font>    | <font style="color:white;">时间</font>    | | <font style="color:white;">负责人</font>    | <font style="color:white;">修改内容</font>    |
| --- | --- | --- | --- | --- |
| <font style="color:black;">v1.0</font>    | <font style="color:black;">2024/07/30</font> | | 王灼民    | <font style="color:black;">第一版市长竞选玩法设计</font>    |


## 1.3 设计思路
从每日活动角度出发，便利玩家操作，增加参与率的同时，降低游玩负担，同时设定合理的筛选机制，完善竞选玩法的相关流程。



## 二 功能说明：
### 2.0 功能概述
官员竞选功能包含活动频率，玩家报名，筛选流程，活动中相关机器人，排名，奖励发放等部分。

## 功能逻辑图
![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722311290780-a2093c60-acd8-4572-9e8b-d3fd74ac1003.png)

### 2.1 功能开启
官员竞选功能需要玩家等级得到固定等级后，才可解锁相关玩法界面，参与玩法。

在没有达到相关官员竞选功能时，活动中心内界面灰显，玩家点击相关界面会有对应的文字tips弹出，告知玩家需xx等级才可参与相关官员竞选。 

备注：功能开启并不代表可以进行报名，参与竞选仍需一定条件。

**<font style="color:#DF2A3F;">功能开启的ui</font>**

### 2.2 竞选报名
#### 2.2.1 竞选入口
入口1：每日官员竞选玩法可从活动中心分页竞选中心入口进入。点击活动中心官员竞选后，跳转进入官员竞选界面。界面上可以进行城市选择，报名，以及查看竞选相关结果操作。

**<font style="color:#DF2A3F;">活动中心竞选中心界面</font>**

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722421648867-7797bf85-6e8e-4fdd-8583-247121ff4cd1.png)**<font style="color:#DF2A3F;">  
</font>****<font style="color:#DF2A3F;">官员竞选界面</font>**

入口2：在城市的市政厅主界面可以通过官员选举入口进入官员竞选界面，此界面与入口1最终跳转的官员竞选界面相同。

**<font style="color:#DF2A3F;">市政厅主界面</font>**

#### 2.2.2 竞选报名
1 报名时间：每日19点前为当日官员竞选报名截至时间（开始时间为昨天20点10分，官员竞选出结果后）

2 成功当选市政厅官员的玩家无法报名此城市次日的官员竞选，即不得单城市连任。玩家每日只可以在一个城市内进行报名参选。

2 报名条件：玩家至少拥有1只报名城市户口的宠物，且拥有具备充足寿命的3只NFT宠物。

3 报名阵容：玩家在报名时需指定3只参加竞选的NFT宠物，在报名后3只竞选宠物不得进入交易状态与相关的铸造操作，同时宠物在报名后属性变化不再被服务器计入，只取报名时宠物属性技能等数值。

4 报名的宠物不影响相关打工以及战斗等操作，只对于交易状态作出限制（详细设定见交易行设定）。

5 报名成功时扣除玩家宠物对应数值的寿命数值。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423268183-b827f984-ec50-4cf6-a874-64b8b14c42c8.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423314010-d2a91960-c1b1-445d-8115-4f45c8964365.png)

### 2.3 竞选流程
#### 2.3.1 截至报名
1 每日19点当日官员竞选报名结束后，次日竞选报名暂不开始，显示开启剩余时间。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722492013108-d01cc228-d258-438f-8531-c1a65d37beb1.png)

2 服务器在截至报名后，根据单个城市报名人数开始进行海选，筛选出单个城市的前16强玩家，并进行16强对战汇总结果。需在19点30分前处理完毕。具体海选筛选与16强对战规则如下。

#### 2.3.1 海选阶段
##### 2.3.1.1 海选服务器筛选
截至报名后，服务器依据全部报名玩家数据进行海选筛选，核心逻辑为从报名玩家中随机抽取xx名对战玩家与1名玩家组成小组，通过玩家与对战玩家对战算出玩家积分，将所有玩家积分进行排序，取前16名玩家进入16强。

19：30海选计算结束，前端UI开始进行海选对战演绎。

筛选规则：

1 服务器将每个城市的所有报名玩家宠物阵容战力进行排名，取宠物战力排名前24人定义为种子玩家。

1 服务器开始计算单个玩家积分用以评定强度：从所有报名玩家中随机抽取20人作为对战玩家。玩家与抽取的20对战玩家编为1组，组内玩家宠物阵容与20人对战玩家宠物阵容进行轮次对战，胜利+10分，失败不加分。对战20轮后加算得出玩家总分，

2 根据玩家总分进行排名时，非种子玩家但出现在前16的玩家，再次进行2轮对战，积分更新为三轮积分平均值数。对于本身为种子玩家，但没有进入前16玩家，再次进行2轮对战，积分更新为三轮积分平均值。

2 积分全部确定后，根据排名取出所有玩家前16名进入16强。

3 当玩家积分相同时，根据战斗中数据判定位次：

+    全部战斗伤害综合较大者位次排前
+    全部战斗伤害相同时，总回合数少则位次排前
+    总回合相同时，根据玩家id大小排名，小的排前。

4 当单城市官员竞选报名人数在10~20名之间，降低抽取对战玩家数量为10人。

+    当人数5~10人时，抽取对战玩家数量=除玩家外报名玩家数。
+    人数低于5人时，填充机器人补齐5名对战人员，玩家与与机器人正常战斗记入积分。排名时剔除机器人。

5 在排名结束后，玩家人数不满16强，加入机器人补齐16强玩家，机器人不会取得胜利，对战结束后删除机器人。

5 当人数不足16人需要机器人时，依据下面机器人生成规则：

+ 机器人名称根据名称随机生成规则随机生成，头像则随机游戏内固定头像
+ 机器人宠物取本周内，全部城市中官员竞选活动中，海选积分最低且落选玩家宠物阵容。
+ 若本周内海选中没有落选宠物阵容，则根据预先配置的宠物列表，生成宠物阵容。

6 机器人战斗时候使用特殊ai，当玩家宠物血量降低到10%时，不进行攻击，保证玩家获胜。（待定设定）

7 海选记录保留15天内记录，玩家可以在海选界面查询自己过往15天内海选记录。

8 海选前端完成演绎，弹出晋级巅峰成功失败后等演绎后，ui保留本周内演绎，晚12点刷新ui表现未等待海选赛开始状态。本日对战记录进入往期海选记录中。

9 海选最后的结果通过邮件发送玩家。

10 所有海选失败玩家发送一些非货币性的材料作为海选奖励。奖励货币与道具也通过邮件发送。

二：报名人数：1000以上时，抽取对战玩家数量降低为15人——此处根据服务器相关信息指定，主要为服务器能否承担玩家之间的轮次对局。

备注：当报名人数更多时，与服务器讨论相关的对战局数。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423392186-92fb7416-4896-4654-b896-526d8e4d4788.png)

海选未开始情况下的等待界面

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423407439-6f4ff88e-39b9-41b5-a281-870f58f7c3df.png)

海选竞选中的界面——头像进行演绎

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423557559-3a83fa99-4f9b-44b5-b165-68a109b977be.png)点击对战记录后弹出的详细对战记录界面（点击的是本日的对战记录）

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423709508-646b223f-0d41-44f1-aeda-9804afe2f93e.png)

查看往期海选记录-选择具体的查看日期（15日内记录可查）

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423758566-94232938-9592-4088-a3b8-249044ca33af.png)

具体查看某天内的海选记录

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423788252-f5b85d4b-6434-4e12-af90-733a24bd38f6.png)

海选结束晋级失败界面

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423825606-3788f506-79a5-4cb4-bfc6-a1b944683d63.png)

海选结束晋级成功界面

##### 2.3.1.2海选前端演绎
1 截至报名后，19点30分海选界面开启，海选界面上玩家与对战玩家进行演绎，演绎形式参考UI，给玩家一个对战感觉即可，每场对局演绎数秒（单局对战时间在5~20秒之间随机），全部对局结束后，显示海选结果与对局记录。

**<font style="color:#DF2A3F;">演绎过程</font>**

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722423965013-f33b23f3-bbd4-41a0-b165-bf275b9781a6.png)

2 对局记录中可以点击回放，进入战斗场景，查看双方战斗过程。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722480511678-466f5ef0-5dab-4e89-b8f9-06ca6ea635d6.png)

播放对战进入战斗场景开始战斗回放。

3 19点45分，巅峰赛（16强对战）UI开始填充对战玩家。相关玩家之间对战规则参考16强对战规则。

#### 2.3.2 16强对战
0 在16强的对战界面，玩家可以点击玩家头像查看16强玩家的对战宠物阵容。

  16强选手信息没有填充时，全部赛制信息框都呈现？状态

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722333731002-420ef2f9-9d9f-47ee-b6a7-b6b0c501bf7b.png)

1 19点45时16强UI开始填充玩家，前16积分玩家，将会进行两两对战，分组逻辑如下：

将积分排名为前8的玩家定义为种子选手，16强一共有8个组。所有种子用户固定组，前期不会碰撞

+ 1号种子固定1号组.
+ 2号种子固定2号组
+ 3号种子固定3号组，
+ 4号种子固定4号组。
+ ……
+ 

剩余积分排名9~16的玩家随机进入8组挑战。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722480571189-ab3967d7-4141-4890-ab52-8e3db2c21733.png)

2 16强对战20点开始（服务器应在报名截至到海选开始前这些数据都已经计算好了），前端ui开始进行对战演绎：

+ 16晋8对局3局两胜制
+ 8晋4三局两胜制
+ 4晋2三局两胜
+ 决赛：五局三胜制

[此处为语雀卡片，点击链接查看](https://www.yuque.com/cod5mf/iwqppn/gn703es64gxu1eyh#wr5bv)

演绎需要有以下几个部分组成：

+ 对战中的文字与动效![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722481407858-d6e461b3-251e-4331-b26c-4d5ab31a8cb9.png)
+ 16晋8，8晋4场次战中的开场文字动效![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722481397829-ca69130e-a97a-49c8-9a0b-6052dce89ff1.png)
+ 场次中的等待时间倒计时动效果![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722481767906-f66cee28-853e-4a72-ab3d-74abda515290.png)，每场次之间间隔30秒。



2、20点开始进行在16晋8对战结束后，进行8晋4对战，组与组之间的对战逻辑：

+ 1号组胜者、2号组胜者、3号组胜者、4号组胜者为种子选手，种子选手之间不会相互对战。
+ 5~8号组胜者随机对战1，2，3，4组种子选手。



3 4晋2种子之间的对战逻辑：1号组胜者对战4号组胜者，2号组胜者对战3号组胜者，各自半决赛胜者进入总决赛。

4 对局相关信息发送到竞选界面，任何玩家点击节点（播放器号）都可以查询相关的竞选玩家对战记录与相关信息。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722484072906-31189ec1-4e9b-4691-aedb-e24db9fdc975.png)

备注：点击场次更换场次信息，点击宠物头像跳转进入宠物属性界面

点击节点查看对战数据（可以选择第一场，第二场，第三场等）

4 玩家点击竞选排名上玩家头像可以查看入选玩家的宠物阵容与相关属性技能。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722494856474-ae51f1bc-648e-4c8e-a4f2-c2dba6b2bf50.png)

4 对战全部结果出来后，界面出现竞选排名UI，可以通过UI进入竞选结果信息板，依据排名结果进行奖励分配，所有奖励通过邮件发送：

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722484486492-f8cf9b92-5b3a-4caa-8d3e-8895435ecdca.png)

+ 所有政府官员可以获得工资=基础值*10%，工资的基础值=当日工厂产出+挖矿产出
+ 冠军——市长，获取40%工资
+ 亚军——副市长，获取20%工资
+ 第3名，第4名——部长，每人获取10%工资
+ 第5，6，7，8名——局长，每人获取5%工资
+ ![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722484502732-771fbca0-157b-436d-b120-e5ac3a40bd69.png) 

5 竞选完成后，ui界面保留当日竞选过程，晚12点更新界面，去除所有ui上的玩家信息，重新回到准备赛事阶段。

6 在竞选界面-往日竞选记录，可以查询15天内官员竞选16强的记录。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722494990575-3ac33c65-9b3f-4c2d-af86-984af884bf31.png)

点击往日竞选记录可以进行进入日期选择![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722495026048-1960a38b-763d-49bb-bc27-eda7505828c1.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722490742192-37db7637-eeb0-43a2-bebe-4fe4ddb2679a.png)

7 在官员竞选全部结束后，报名界面开启，玩家可以报名次日的官员竞选工作。无法报名的城市显示当选两个字。





#### 2.3.3 奖励发送与报名
1 对局全部结束后，参赛人员所有奖励通过邮件发送到玩家。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722495365476-78a8038f-bba2-4b6a-a77b-76d8288edafa.png)

2 全部竞选将结果出来后，报名渠道重新打开，可以进行次日的报名。

### 2.5 特殊备注
1 官员竞选主界面上存在规则解释按钮，点击后，可以查看官员竞选全部的规则玩法。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722504390584-4f5dd39f-2b34-41fe-abdb-538bd5a6f32f.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722495442456-92b126da-e818-4dfb-aa73-7ac15822fafc.png)

2 活动中心常驻官员竞选的界面，玩家可有通过官员竞选相关界面跳转进入官员竞选。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722504353815-968e8920-0584-431f-9239-5d313f6fb5f5.png)

## 三、界面说明：
[https://www.figma.com/design/2c1LfmuZHJ3PghpYq1Eywo/%E5%B1%B1%E6%B5%B7%E4%B8%96%E7%95%8C?node-id=39-332&t=DVq5lBkiZw9e2tnd-1](https://www.figma.com/design/2c1LfmuZHJ3PghpYq1Eywo/%E5%B1%B1%E6%B5%B7%E4%B8%96%E7%95%8C?node-id=39-332&t=DVq5lBkiZw9e2tnd-1)

  
**四、配置表说明**

[Activity.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/45603655/1722516679328-32ef5c12-8be7-4290-bf80-00c0507724db.xlsm)

[Schedule.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/45603655/1722516679543-70d09f6f-f0ef-46a8-b944-38fd9ca1eba7.xlsm)

[Trigger.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/45603655/1722516679349-ff300cdc-4ae8-4516-89e2-d843e0d99a3b.xlsm)

  
**五、功能需求清单**



**六、美术需求清单**  
**6.1 界面需求**

| **<font style="color:white;">编号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">名称</font>** | **<font style="color:white;">大小-美术</font>** | **<font style="color:white;">资源命名</font>** | | **<font style="color:white;">美术需求</font>** | | | **<font style="color:white;">特殊说明（逻辑说明）-预留</font>** | **<font style="color:white;">参考</font>** | **<font style="color:white;">成品缩略图</font>** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  |  |  |  |  | |  | | |  |  |  |
|  |  |  |  |  | |  | | |  |  |  |


### 
### 6.2 动效需求
| <font style="color:#FFFFFF;">编号</font> | <font style="color:#FFFFFF;">动效名称</font> | | | <font style="color:#FFFFFF;">动效功能需求</font> | | <font style="color:#FFFFFF;">动效美术需求</font> | <font style="color:#FFFFFF;">游戏内需要做动效的组件截图</font> | <font style="color:#FFFFFF;">参考链接</font> |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  |  | | |  | |  |  |  |  |
|  |  | | |  | |  |  |  |  |


  
**七、String需求**  




若有收获，就点个赞吧

  
 

