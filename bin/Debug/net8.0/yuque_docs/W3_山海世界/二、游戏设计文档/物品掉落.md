## 一、概述
### 1.1 文档说明
奖励获取界面和掉落配置结构设定



### 1.2 文档维护
> 记录每次修订的内容，方便追溯。
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/cod5mf/iwqppn/ovmuvyft197u6rue#FReK8)

### 1.3 设计思路
界面沿用通用的掉落奖励弹窗

配置机构分为drop和dropgroup 2个配置表。dropgroup用来定义基础奖励池；drop调用dropgroup成奖励组

drop分为3种情况，权重掉落、概率掉落、多选掉落。



### 1.4 掉落奖励框架
奖励结构框架

![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718870665297-1e78003a-96a7-476a-af7d-c3028ff7f8cb.jpeg)









## 二、功能说明
### 2.1 名词设定
dropgroup：定义基础奖励池，每组中最后只会随机出一条奖励

drop：drop调用dropgroup成奖励组

权重掉落：在drop中用权重值决定掉落哪一组dropgroup

概率掉落：在drop中用概率值决定dropgroup是否掉落

自选掉落：掉落权重固定，次数固定。玩家在界面上自选奖励

### 2.2 dropgroup流程
1、dropgroup为基础奖励池，每组中只会最终产出一条奖励。

2、每组中有数条奖励，可以配置该条的道具id、数量下上限制（数量2为次随机）、权重值。每次必产出1条，不存在不产出的情况

3、每个group组有独有id

![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718875457291-b8482877-ff33-4597-a1ec-43330a459fe7.jpeg)



### 2.3 drop流程
1、Drop调用数条Dropgroup，并在其中随机。可以配置随机的次数，在整个Drop组里执行数次随机

2、Drop可配置类型，类型分为3种，权重掉落、概率掉落、多选掉落。



![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718877251842-a59b746a-8618-4cf7-a13e-cba56d93bab1.jpeg)



### 权重掉落
1、一个权重Drop组可配置组id、count执行次数、数条DropgroupID以及每条DropgroupID对应的权重值

2、权重掉落类型默认按配置的count次数多次执行Drop组。每条Dropgroup有自己的权重值配置，每次执行按权重比例随机其中一条。



### 概率掉落
1、一个概率Drop组可配置组id、数条DropgroupID以及每条DropgroupID对应的概率、产出次数上下限（min、max）

2、概率Drop组，会依次执行组每一条group，按概率决定该条是否产出奖励，并在min-max time种随机出产出奖励的次数

注：如果每一条group都不为100%，有概率奖励为空。



### 自选掉落
1、自选掉落组中，count表示玩家可以选择的数量。DropgroupID=物品id。min-max time为产出数量并保持一致。没有概率和权重设定



## 三、界面说明
### 3.1、奖励通用界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715926813444-e57b5c9e-47ce-4d79-8202-44df0d7e385c.png)

a、最上方显示获得奖励标题

b、中间显示奖励图标和单个icon数量，种类数量没有上限，超出单页显示上限时可以滑动。显示方面小于1行是需要居中，大于2行时最下方一行需要露出一部分，提示玩家下面可以滑动

c、点击空白处可以关闭界面

d、关闭后，有图标飞动效果展示。根据item类型，飞到各自对应的图标位置。主要设计到货币和背包。以及一些活动道具

d-1、如果在非飞入对象界面获取，飞入对象零时显示一会。图标依旧飞到飞入对象所在屏幕的相对位置。

e、长按显示tips

### 3.2、奖励选择
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715927214319-9aec2dc9-f468-4be2-9f93-4011ef5cf748.png)

a、玩家可以选择数个奖励，单机图标为选中，会有选中框表示。再次点击为取消，超过数量点击无反应。

b、玩家选择完所有次数后确认会获取对应奖励，并弹出获取奖励的界面

c、如果玩家没有选完所有奖励，确认置灰，玩家点击后飘字提示还有可以选择的奖励次数。

d、玩家除点击确认以外的所有操作都不会消耗真正获取奖励的次数

e、长按显示tips





## 四、配置表说明
## 4.1 Dropgroup
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715924252719-f5e5230a-d6e1-4a3b-a8f5-476c82baf6b5.png)

### 4.2 权重掉落
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715925375263-d781eb36-c35f-4405-a962-a41948420728.png)

### 4.3 概率掉落
### ![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715925734966-aae72aee-f177-4c4c-8613-c46cb9f76f34.png)
### 4.4 自选掉落
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1715926137246-a3ce51b3-d618-4372-818e-f7e5932fb723.png)



## 五、功能需求清单


[【特性】物品掉落与奖励配置 @姚仕达](https://snh48group.yuque.com/cod5mf/omhzyg/fpu73yunfa9bkvdo)

## 六、美术需求清单
### 6.1 界面需求


| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 通用奖励弹窗 | 弹出框 |
| 2 | 自选弹窗 | 弹出框 |








## 七、string清单


| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| --- | --- | --- | --- | --- |
| 奖励自选 | 选择物品 | 自选奖励数为0时选择一个新的item | 飘字 | 超出可选数量 |
| | | | | |
| | | | | |






