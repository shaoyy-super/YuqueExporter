##  一、概述
### 1.1 文档说明
游戏内通用的任务系统，包括主界面左侧的快捷追踪和任务界面



### 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/8/1</font> | 姚仕达 | <font style="color:black;">文档创建</font> |
| | | | |


### 1.3 设计思路
设计目的：任务系统贯穿游戏内的主要功能和各种玩法。起到引导玩家和辅助推进进度的作用

玩法思路：任务系统分2块，主线任务、日/周常任务

                 主线任务，主线任务都是一次性任务，负责引导玩家体验游戏的主要玩法，并获得前期的奖励

                 日/周常任务，日常任务会在每日和每周刷新，给与玩家周期性的奖励

                 



### 1.4 系统框架
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1722581359683-fbf96516-dc4d-490d-831b-fe75d7da010d.jpeg)





### 1.5 任务内容框架概述


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1722669789425-0584bbc1-0672-4ff0-9777-72b7c571654f.jpeg)









## 二、功能说明
### 2.1 名词设定
主线任务：游戏中玩家只能完成一次得任务，以线性或者多线并行得方式推进玩家得游戏进度

日常、周长任务：每次刷新得任务，玩家可以反复多次完成



### 2.2 主线任务逻辑
a、任务获取

任务获取方式分为：初始任务、自动获取任务、主动获取任务

初始任务（如果需要）：为玩家进入游戏获取得第一个任务，自动帮玩家接取

自动获取任务：玩家在达成一定条件下自动获取下一个任务。需要在表格里配置任务的关联性。用来配置一连串的任务，方便玩家快速的进行下一个任务

主动获取任务：任务会在场景中的某个npc上，玩家需要和模型交互才能接取任务



b、任务目标（沿用之前的逻辑，但是任务的条件类需要根据具体需求重新整理）

任务条件类：定义任务目标的类型。通过数字id区分

任务条件取值范围：任务目标的取值方式。

任务目标值：任务条件类中所包括的可选id（比如：条件类里定义为副本，这里就是副本的id）

任务目标的数量类型：1：累计  2：最大  3：最小  4：替换(提交物品用)

任务目标的具体数值：需要完成的次数或者数量



c、任务奖励

奖励调用item表格id，可配置凋落的数量



d、任务跳转

沿用goto逻辑，配置对应的id



### 2.3 日/周常任务逻辑
a、任务分类

日/周长刷新的时间不同，显示也在不同的界面上。需要根据配置区分配置中的任务种类并分类显示

日常任务每天0点刷星、周长任务每周末0点刷新

任务具体信息依旧关联任务表配置



b、任务解锁

根据等级解锁任务，未解锁的任务不显示



c、日/周常任务奖励

每个日常任务完成后会获得一定的专属点数，这些点数仅为此功能内的计数功能，不作为道具进背包。跟随任务一期重置。需要可以配置每个任务壳获得的点数

玩家在完成日/周常时可以获得一定的专属点数。这些点数到一定的数值可以获得对应的奖励

日常任务奖励每天0点刷新，周长任务奖励每周末0点刷新









## 三、界面说明
### 3.1 主界面任务面板和任务标记
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722575967975-319222f9-ff95-4ea2-a474-a3fc3ef868c6.png)

a、主界面左侧有任务面板区域。

b、这里最多只追踪1个任务。玩家每次重新打开游戏时默认根据任务的类型id顺序追踪

b-1、当玩家手动切换追踪目标时，直到玩家下线都按玩家选择追踪

b-2、当玩家完成一个任务时，优先追踪这个任务的下一个任务。其次按根据任务的类型id顺序追踪

c、面板区域主要显示：第一行为当前追踪的任务的任务类型图标和名字、第二行为该任务的目标和目标参数追踪（已完成数量/需要的数量）、第三行为快捷跳转的快捷按钮。

d、场景上的任务点有2种显示方式，根据任务点的目标是否为模型区分。是模型时在模型上挂载一个任务目标ui和特效。没有模型时在任务目标的点放置一个透明模型并挂载任务目标ui和特效，并做为npc互动。

d-1、临时使用的模型只有在任务执行期间才会出现，任务完成后清除。

d-2、显示的类型有2种：任务目标和任务接取。分别根据任务中得接取位置和任务目标位置区分显示

e、任务完成时显示为任务完成状态。数字计数变为绿色，跳转按钮变为任务完成按钮，任务标题变为绿色对勾。玩家点击面板可以直接完成任务并打开完成任务界面

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722589005301-b469143b-74f3-4310-9050-1bcd65d2d255.png)

绿色按钮需要一定的点击暗示，方便玩家理解这里可以点击

e-1、完成一个任务后，如果这个任务有配置下一个任务，则直接帮玩家接取下个任务。如果没有按任务的类型id顺序显示一个任务。如果没有任何任务不显示任务面板





### 3.2 任务接取
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722666521794-70d54b22-b618-4508-bf02-3f3c86d908b1.png)

玩家可以通过与npc互动获取任务，这种任务在互动菜单中有特定得造型和颜色，方便玩家识别

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722586031431-2fa9cd20-a4e7-4c23-8f90-f7b51c7ebd77.png)

a、玩家点击任务按钮后，会获得任务

b、获得任务后出现获得任务的飘字，第2行为任务大标题，并有一个立即追踪的快捷选择。选择后会切换当前追踪的任务

c、弹框存在3秒后消失



### 3.3 主线任务界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722570355725-c798b0b6-2ba8-4f2e-9b6e-9d839989006b.png)

点击主界面任务面板，且非自动寻路的区域时打开任务界面。

a、上方为返回按钮和功能名字

b、主区域左侧为任务列表。包括：任务分类、任务条目。可滑动查看

b-1、根据主线任务的任务类型，按类型区分任务排列顺序。在分类页签上显示类型名字和类型图标

b-2、单个任务显示上方为任务类型图标，任务大标题、下方为子任务目标。如果一个任务有多个环节的子任务目标，则在子任务切换的时候切换。玩家当前正在追踪的任务在右侧有一个追踪标记。

b-3、需要在表中可以并列配置多个任务id，表示一个任务下的多个子目标，逻辑和正常的任务一样，只是表现上会有差异。（同大标题，不同的任务目标阶段）玩家在完成前一个任务目标后，只更换子目标的显示。

c、主区域右侧为任务详细信息展示。包括：任务标题、任务当前子目标、任务描述、任务奖励和任务追踪按钮

c-1、点击奖励图标右物品tips

c-2、点击追踪任务，关闭此界面并切换主界面的追踪任务。同时只存在一个追踪中的任务。已在追踪的任务，按钮灰显并显示追踪中。。

d、主线任务分为几种类型：主线、支线、教学任务。在逻辑上一样，图标的显示和和任务面板的分类上有区别



### 3.4 任务完成
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722666549579-8b0a7d83-7bb3-41e8-9491-b09abbccaddf.png)

在任务完成状态下点击任务面板，可以直接完成任务。并弹出完成弹出

a、最上面显示完成任务标题。下面显示获得的经验、货币。没有则不显示

b、再下面显示获得的其他item道具

c、最下方显示x秒后关闭，并持续倒计时。窗口持续x s后自动消失



### 3.5 日常任务
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722578739032-ebac2918-a62c-44e3-9159-48ecc965cdb2.png)

点击主界面日常任务按钮打开日常任务界面

a、上方为返回按钮和功能名字

b、主区域左侧为页签，根据配置的类型分类

c、右侧显示该分类下的所有任务，主要显示：任务名字、任务目标和数值追踪、任务奖励（显示任务获得的点数+奖励配置前2个）、跳转按钮

c-1、任务条目分为几种状态：

普通状态，未完成的任务状态

已完成状态，已经完成了任务，但是还没有领取奖励。排列在面板的最上面。数值追踪显示为绿色。跳转按钮显示为领取奖励按钮

已领取状态，已经领取奖励的任务，置灰并排列在最下面。

d、下方为每日、每周任务完成奖励。完成每日、周任务后会奖励玩家点数。点数会以进度条形式在下面的面板上显示，左侧为当前所获得的所有点数数量，点数达到一定数量会解锁一个宝箱。

d-1、宝箱会按数量展示在面板上，分为2种状态。未完成、可领取、已领取

未完成：显示宝箱图标和需要获得的点数

可领取：图标抖动，数字变成可领取状态

已领取：宝箱切换为已打卡的造型，并显示已领取

d-2、点击宝箱图标后，打开奖励展示的弹窗



## 四、配置表说明
### 4.1 任务表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722590621954-e6827407-7b55-42da-b656-f28108a3b371.png)

注意：在任务界面任务表里的文本是目标行文本，标题文本在主线表

### 4.2 主线表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722664692943-9c14992a-0ed0-4782-991c-08aa1c6519bb.png)



### 4.3 每日任务表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722592486553-604e69a9-6e61-45f0-8098-b0aad59b5e16.png)



### 4.4 日常奖励表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722656414412-77953b64-af5d-4bc4-9836-44707ba53670.png)





## 五、功能需求清单








## 六、美术需求清单
### 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 任务面板 | 场景ui组件 |
| 2 | 主线任务界面 | 一级界面 |
| 3 | 日常任务界面 | 一级界面 |
| 4 | 场景标识 | 场景ui组件 |
| 5 | 任务交互 | 场景ui组件 |
| 6 | 任务获取、完成 | 弹窗 |




## 七、string需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| :---: | :---: | :---: | :---: | :---: |
| | | | | |
| | | | | |
| | | | | |








