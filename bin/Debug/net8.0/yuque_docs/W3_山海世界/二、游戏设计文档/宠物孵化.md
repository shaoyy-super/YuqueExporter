

## 一、概述
### 1.1 文档说明
宠物孵化系统，包括挂牌和配对2块功能

玩家可以挂牌宠物给其他玩家租借孵化使用，并赚取一定的货币

租借玩家花费一定的货币，租借1只宠物并和自己的一个宠物配对，孵化一只新的宠物

### 1.2 文档维护
> 记录每次修订的内容，方便追溯。
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/cod5mf/iwqppn/fi9zon3so2g2he9c#FReK8)

### 1.3 设计思路
1、宠物和宠物之间可以孵化新的宠物。新的宠物有概率继承父母的品种

2、一方玩家通过孵化所挂牌自己的宠物，赚取孵化方玩家的租赁费用

3、孵化方玩家需要支付所有的孵化费，孵化的宠物归孵化方所有



### 1.4 系统框架


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718950240163-9cebe1c7-da9d-4ef0-935a-123442fbc948.jpeg)







## 二、功能说明












### 2.2 挂牌流程
a、玩家可以在孵化所挂牌任意未到孵化次数上限的宠物，数量不限。

b、宠物孵化有次数上限，需要可配置。

c、挂牌后的宠物被冻结，不得在其他功能内使用

d、单次挂牌没有时间限制，被人租用孵化后下架并解冻。

e、玩家需要输入挂牌宠物的租借金额，有配对玩家配对后，获得这个金额



![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718951086022-586a1641-b7ac-4956-826b-0b1ff8be36d3.jpeg)



### 2.3 配对流程
a、只有相同孵化次数的宠物可以互相配对孵化。

b、配对的宠物也需要未到孵化次数上限的宠物

c、配对玩家需要支付挂牌的金额+一定的手续费。  


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718953902704-061236cc-c918-4d3c-81ec-0a08ae6d74bc.jpeg)





### 3.3 孵化逻辑
~~a、孵化逻辑分为2层。第一层由孵化次数决定，第二层由双方宠物的品质决定。依据这2个参数获得一条该宝宝对应的随机池~~

~~a-1、父母品质由父母双方最高的一个品质决定。~~

~~~~

~~b、每次孵化宝宝，宝宝年龄为0，同时会随机产生宝宝的品种、技能格子数、通用技能、品质总值、身份证~~

~~b-1、宝宝的品种包括宠物的造型、专属技能、个体通用技能池、以及跟随宝宝属性值分配权重。这些固定在宠物的表格里获取。每个品种有稀有度设定，根据孵化次数，在特定稀有度的随机范围池内随机，配表。~~

~~~~

~~c、品种：在以下的随机池中随机获得一个品种~~

~~最终的品种随机池由孵化次数对应的基础随机池（稀有度1|权重20，稀有度2|权重10），乘以父母品质对权重影响的一个系数（系数1|系数2）。2个参数都由表控制。~~

~~同稀有度内的品种概率相同。如果池内有父母品种本身。单独增加父母品种的概率加成值。~~

~~（在宠物表格中每个品种的宠物都有一个对应的稀有度）~~

~~~~

~~d、技能格子，在以下的范围中随机一个技能数量的值~~

~~最终的技能数量由孵化次数对应的基础随机池（2个技能|权重20，3个技能|权重10），乘以父母品质对权重影响的一个系数（系数1|系数2）。2个参数都由表控制。~~

~~~~

~~e、技能，在以下范围中对每一个技能格子填充技能，直到把空格子填满~~

~~最终技能的随机池由品种对应的技能池提供。在表格中，每一个品种的宠物对应由一个专门的通用技能池，在这个技能池中随机~~

~~技能池中，如果父母宠物有池中相同的技能，对这个技能增加一个概率加成。每有一个增加一次概率~~

~~  
~~~~f、品质总值，总值是宠物所有属性得总和。在以下范围中随机一个品质总值~~

~~根据孵化次数会有一个总值得随机范围池。（总值10000|总值15000）先从池中随机到一个总值，然后随着父母品质得影响，乘以一个浮动值。~~

~~每个品种的宠物有自己的属性权重分布，用总值分配给各个权重获得宠物的各属性~~

~~~~

~~g、血统，宠物得产地在父母之间随机。如果父母一方的血统剩余量为0，则100%获得另外一方的血统。如果双方的血统都为0，则随机一个目前已开放城市的血统。~~





![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1718959275115-aaa6aa76-5b4d-4a95-a2a4-ea4bc3d1a6a8.jpeg)





a、孵化宠物沿用游戏内的标准卡池，父母双方的宠物品种会有提高出现的概率。





### 3.4 费用支付和获取
a、一次孵化一共有2笔费用。挂牌宠物的租用费、孵化的手续费，都有需要孵化的玩家支付

b、挂牌宠物获得的租用费以邮件形式发放给挂牌玩家

## 三、界面说明


### 1、主界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716952156960-e806f18c-4fd7-42ed-bea9-c31cbf3d6eda.png)

a、左上角为返回按钮，中间为标题，右上为链币

b、主区域左侧为筛选列表和搜索框，两者可以交叉筛选。

b-1、搜索框为关键词搜索（按字的级别搜索），可搜索范围为：技能名字、宠物初始名字、户籍名字

b-2、筛选列表按宠物的孵化次数分类，帮助玩家初步筛选大类

c、主区域右侧为宠物列表，显示挂牌宠物的头像、名字、战斗力、户口、价格。点击后弹出申请窗口

c-1、默认按战斗力从高往低排列，玩家也可以按自己需求重新排列。右下为排序按钮，维度和宠物界面一致

c-2、一页2列、每列3行半，可以滑动

d、最下方为功能按钮



### 2、宠物信息弹窗
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716792430168-eea94239-45c6-4851-b5e0-7b17a936d738.png)

a、玩家点击挂牌区域任意宠物牌，弹出宠物信息弹窗

b、弹窗左侧为宠物展示，显示宠物造型、名字、等级、品质、户籍

c、右侧显示宠物的基本信息，分2个页签，一个展示宠物的基本属性，一个展示宠物的界面。这两个界面逻辑同宠物养成界面。但只能查看不能养成

d、点击配对按钮弹出确认弹窗，确认后跳转配对弹窗

e、点击空白处或者关闭按钮关闭界面



### 3、配对弹窗
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716952509169-3ddbb79d-606c-4520-841e-987dc13300b1.png)

a、当玩家点配对后弹出配对弹窗，点击空白区域和关闭按钮直接关闭弹窗

b、上方为双方的宠物展示，左侧为被申请的宠物，右侧为自己选择的宠物

c、下方为宠物列表，宠物列表显示宠物孵化次数、品质、头像、名字和等级，只有孵化次数相同的宠物可以配对孵化，所以这里会直接将不能配对的宠物隐藏，如果没有则显示为空

d、下方为付费按钮，选中一个宠物时，下面出现对应的金额，金额为挂牌玩家自己输入的金额+额外的手续费

d-1、按钮右侧为孵化次数提示、下面提示玩家付费的金额构成

d-2、玩家点击付费并确认后，配对成功。并播放孵化表演。表演结束后跳转宝宝界面

e、如果玩家在确认过程中，该宠物已经被人租借或下架，则关闭展示和配对弹窗并提示玩家该宠物以下架

f、配对列表中没有符合条件的宠物时显示文字：当前没有符合条件的宠物



### 4、挂牌界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716952599622-abb99e14-e04b-4d67-b88c-70fe830104fd.png)

a、点击主界面挂牌按钮，跳转挂牌界面

b、主区域左侧为上架宠物区域。上方为宠物展示区域，没选择宠物时显示一个+号并提示玩家选择一个宠物。下方为对方租借宠物孵化的费用以及挂牌和取消按钮

b-1、点击+号按钮，弹出宠物选择框，这里只做展示，具体效果和所有类似的界面统一即可。玩家选择确认后关闭窗口。界面上宠物信息显示：头像、名字、孵化次数、品质、等级和年龄

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716791428037-c1618e47-690e-4fac-98b9-9d6159e7ba6d.png)

b-2、选择宠物后，才可以输入金额

b-3、玩家输入的金额，在其他玩家租用孵化后，都会支付给挂牌玩家

b-4、点击挂牌按钮后，宠物挂牌到挂牌区域，宠物被冻结，不能进行任何其他的行为，界面回到选择为空的状态。点击取消则重置宠物选择为空

c、主区域右侧为已挂牌宠物，和孵化所主界面显示一致。

d、下方为功能按钮，玩家选中一个宠物后，可以取消这个宠物的挂牌，宠物下架并解冻。





### 5、宝宝界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716953005746-8ed8558b-7754-4418-a8c6-253c8bfd69ae.png)

a、玩家确认配对后，会自动播放配对动画，并在最后弹出获取宠物的展示。这里只主要展示宠物的造型

b、点击任意区域后，会关闭展示并弹出宠物信息展示。这里同孵化所宠物信息展示界面。显示宠物的所有信息方便玩家查看，点击确认按钮关闭弹窗。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1716953044242-b3faa389-7095-4524-a855-20a97824eb9f.png)

### 6、宠物孵化预览
在付费界面点击预览按钮可以打开宠物孵化预览界面，这里可以查看宠物孵化后得一些大致属性范围

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1720589582952-8c9d8d10-ab3d-4217-9947-816bed04a540.png)

a、左侧为孵化池展示列表，显示本次孵化所有可能出现得品种，按品种的稀有度池划分，并标记上2个池子的概率。如果父母的品种在随机池内，则单独把父母提到最顶端，单独显示2个品种的概率

b、列表下方为出生宠物的户口预览。如果父母户口都没有剩余容量，显示文本：随机城市户口

c、右边为宠物的详细属性展示，需要玩家点击左边列表中的任意宠物显示。默认显示第一个

d、属性展示区域最上方为宠物的头像和他本身的出现概率。

e、下方是所有属性的展示区域，在随机出总资质后，根据每个宠物不同的分配比例以及浮动值后，显示出该属性可能出现的范围。

f、点击技能按钮后，出现可能出现的技能预览

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1720579086772-74feeb68-9450-4324-a774-16e789915fa5.png)

g、上方显示关键技能。

g-1、下方显示可能该宠物对应的可随机到的有概率提升的技能，可滑动。









## 四、表格结构
1、新增孵化随机池表格

| | 宠物池 | 父母品质系数 | 父母同品种固定值加成 | 技能格子数 | 父母同技能固定值加成 | 属性总值 | 父母品质系数 | 费用 | 阶段区间 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | <font style="color:black;">1&0.1|2&0.2</font> | <font style="color:black;">1|2</font> | <font style="color:black;">2</font> | 1|3 | 2 | 15000|20000 | 1.1|1.2|1.4 | 300 | 1 |
| 2 | <font style="color:black;">1&0.1|2&0.2|3&0.3</font> | <font style="color:black;">1|2|3</font> | <font style="color:black;">2</font> | 2|3 | 2 | 17000|21000 | 1.1|1.2|1.4 | 500 | 2 |
| 3 | | | | | | | | | |






2、宠物表和技能表新增稀有度字段





## 五、功能需求清单


| **<font style="color:white;">编号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">优先级</font>** | **<font style="color:white;">需求描述</font>** | **<font style="color:white;">自检</font>** | **<font style="color:white;">确认</font>** |
| --- | :---: | --- | --- | :---: | :---: |
| 1 | 界面 | 1 | 孵化功能界面 | | |
| 2 | 功能 | 1 | 挂牌宠物 | | |
| 3 | | 1 | 租借宠物 | | |
| 4 | | 1 | 宠物属性预览 | | |
| 5 | | 1 | 宠物宝宝属性 | | |






## 六、美术需求清单
### 6.1 界面需求


| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 宠物孵化主界面 | 一级界面 |
| 2 | 属性、技能展示界面 | 弹框界面 |
| 3 | 配对选宠界面 | 弹框界面 |
| 4 | 宠物挂牌界面 | 二级界面 |
| 5 | 宠物挂牌选择界面 | 弹框界面 |
| 6 | 孵化成功 | 弹窗 |
| 7 | 宝宝属性展示 | 弹框界面 |
| 8 | 金额输入框 | 弹框界面 |






## 七、string需求


| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| --- | --- | --- | --- | --- |
| 配对租用功能 | 点击付费按钮 | 配对付费 | 确认框 | 确认支付xxx货币（根据具体金额显示） |
| 配对租用功能 | 被下架、被配对成功 | 被查看的宠物下架或者被其他人租用下架 | 确认框 | 该宠物以下架 |
| 配对租用功能 | 点击付费按钮 | 未选择配对宠物 | 飘字 | 请选择配对的宠物 |
| 挂牌功能 | 点击挂牌按钮 | 已选择宠物 | 确认框 | 确认挂牌该宠物 |
| 挂牌功能 | 点击挂牌按钮 | 未选择宠物 | 飘字 | 请选择需要挂牌的宠物 |
|  |  |  |  |  |
|  |  |  |  |  |












