# 一、概述
##   
1.1 文档说明
本文档主要说明聊天系统相关设计与设定，分类确定部分聊天的限制与相关工具。

  
1.2 文档维护  


| <font style="color:white;">版本</font>    | <font style="color:white;">时间</font>    | | <font style="color:white;">负责人</font>    | <font style="color:white;">修改内容</font>    |
| --- | --- | --- | --- | --- |
| <font style="color:black;">v1.0</font>    | <font style="color:black;">2024/08/03</font> | | 王灼民    | <font style="color:black;">第一版聊天系统相关设计</font>    |


## 1.3 设计思路
使用基础通用聊天系统框架，提供玩家便捷的交流渠道的同时，根据游戏属性增加部分交易属性的沟通。

## 二 功能说明：
### 2.0 功能概述
提供玩家之间沟通聊天的模块，并根据聊天类别不同分类管理各个频道，设定频道容量上限，

### 2.1功能逻辑图


### 2.2 名词定义
频道：根据不同聊天场景设立的对话类别，例如好友频道，世界频道，交易向的交易频道等。

区服：以IP地址和语言种类作为主要区别，在频道之上的概念，例如简中国区1。

### 2.1 功能开启
1 聊天功能默认开启，不限制玩家等级。

### 2.1 聊天频道分类
1 聊天根据类别场景分为：

+ 世界频道：对世界的公开频道，也是默认聊天频道。
+ 好友聊天：与好友之间的聊天频道，只能发起，接受好友信息。
+ 系统聊天：用以游戏内模块发送相关信息提醒玩家的频道，玩家无法发言。
+ 私聊：对单个玩家的沟通。其他频道在UI上只有一个入口，私聊则根据数量不同提升，同时与两个玩家私聊则有两个玩家头像对话入口
+ 交易频道：可以通过交易行分享链接发送交易道具信息，便于交易沟通的频道。

后续根据需求可能新增频道分类，若有新增分类需求，再增加。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722998926277-f15eefd9-cb3c-41f0-b566-9c79144a75b5.png)

2 聊天频道之上分为聊天区服，区服以IP地址和语言种类作为主要区别，默认（暂时设定）分为：

+ 世界区——不限制语言种类与地区
+ 欧美区——英语作为主要种类，玩家ip为欧美地区
+ 国区——简中作为主要种类，玩家ip为中国地区
+ ……（具体默认情况根据投放地设置）

最后区服设置跟随策划配置表。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999954849-aabfe770-864f-493d-9bc6-84bb4019d747.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999969243-1bb3c89f-e45f-4c64-b1ce-fd253a7675ad.png)切换区服

3 聊天区服根据玩家所属地区进行默认推荐，例如IP为中国地区，系统文字为简中，则默认为国区。对应规则跟随策划配置。

4 聊天区服单线负荷达到上线，自动开启新线，默认线路从1开始。例如世界1，世界2，世界3.

5 玩家可以自主切换聊天区服，切换时目的地区服已满则显示切换失败。

### 2.2 聊天信息分类
1 根据不同的聊天信息类别分为：

+ 普通信息：包含富文本与基础小表情包的聊天信息。基础小表情包只可使用游戏内置包。
+ 图案信息：特殊的图案信息，不包含文字，单图，玩家只可使用游戏内指定提供表情包。
+ 交易行超链接：固定格式信息，包括交易行上架道具信息，价格信息，以及直接跳转交易行相关道具链接。只可以通过交易行道具分享生成。

2 不同的聊天频道对应不同聊天信息类别。例如世界频道只可以使用普通文本信息与图案信息。交易频道只可以使用交易行链接与普通文本链接。

3 系统频道内信息为策划配置好的固定模板信息。需支持富文本。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999234563-1c776b23-8a37-4495-9e18-480dbb470eb0.png)

4 聊天信息支持语言种类后续补充设定，原则上根据投放区域选择支持语种。

### 2.2 功能设置
1 玩家在频道内展示玩家头像，玩家名称，发言时间，发言内容四项基础信息。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722998752413-39cf58b4-5a03-44d4-9105-c4b48df7282c.png)主界面聊天框

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722998926277-f15eefd9-cb3c-41f0-b566-9c79144a75b5.png)点击聊天框左侧弹出界面

2 玩家聊天每句话之间需一定间隔，默认发言间隔5秒。冷却中点击发送有冷却等待提醒。

3 不同频道具备不同的发言间隔时间：

+ 世界频道，交易频道公开频道发言间隔5秒。
+ 好友聊天，私聊默认1秒1条。

4 好友聊天内置好友清单，显示顺序为在线-离线+最近上线时间两者排序。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999539681-c908f504-840f-46f6-8cfa-b27361113139.png)

5 好友聊天，私聊有未读信息时，需要有红点提醒。在内部界面上存在红点时，最外层主界面上的聊天框聊也需要有红点系统。

6 主界面上的聊天框显示世界频道内内容。

6 私聊频道中聊天对象为非好友玩家，此类私聊每增加一个，则增加一个聊天入口。最大保存100人私聊频道。私聊中排序根据未读—已读，对话时间两者排序。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999600938-bfc0ed8f-ab52-4ac8-9b20-7addef16620a.png)

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999755857-56175f48-ce6d-496b-ab06-b96fac662c09.png)私聊存在快捷加好友渠道

7 默认在主界面显示的是世界频道信息。

7 屏蔽字库：玩家在游戏内无法发送部分敏感的文字信息，具体跟随屏蔽字库。

8 举报发言：对于部分不妥当发言可以通过点击语句弹出举报弹窗。当单个玩家10分钟内被来自不同玩家举报次数超过20次时，触发临时禁言1小时，同时后台留档。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999829305-233608ca-f8ca-411f-9926-4076cdd26d92.png)举报界面

9 翻译功能：玩家可以在点击相关语句后，弹出翻译功能，将语言翻译为本地正在使用的语言类型。

![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1722999782334-87ee1e76-162d-416d-bbfd-8e8e3406e016.png)

10 后台管理：后台对于玩家可进行以下操作：

+ 查看近期发言15天内发言记录。
+ 查看玩家近期的被举报记录。
+ 进行禁言操作-6小时禁言，24小时禁言，3天禁言，7天禁言，15天禁言，50天禁言，永久禁言。禁言操作会自动发送禁言通知邮件。
+ 后台可以封闭某一频道，进行单个频道的全体禁言。

## 三、界面说明：
[https://www.figma.com/design/2c1LfmuZHJ3PghpYq1Eywo/%E5%B1%B1%E6%B5%B7%E4%B8%96%E7%95%8C?node-id=39-332&t=71kTMT4GFCQw6NHq-1](https://www.figma.com/design/2c1LfmuZHJ3PghpYq1Eywo/%E5%B1%B1%E6%B5%B7%E4%B8%96%E7%95%8C?node-id=39-332&t=71kTMT4GFCQw6NHq-1)

  
**四、配置表说明**



  
**五、功能需求清单**



**六、美术需求清单**  
**6.1 界面需求**

| **<font style="color:white;">编号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">名称</font>** | **<font style="color:white;">大小-美术</font>** | **<font style="color:white;">资源命名</font>** | | **<font style="color:white;">美术需求</font>** | | | **<font style="color:white;">特殊说明（逻辑说明）-预留</font>** | **<font style="color:white;">参考</font>** | **<font style="color:white;">成品缩略图</font>** |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  |  |  |  |  | |  | | |  |  |  |
|  |  |  |  |  | |  | | |  |  |  |




### 6.2 动效需求
| <font style="color:#FFFFFF;">编号</font> | <font style="color:#FFFFFF;">动效名称</font> | | | <font style="color:#FFFFFF;">动效功能需求</font> | | <font style="color:#FFFFFF;">动效美术需求</font> | <font style="color:#FFFFFF;">游戏内需要做动效的组件截图</font> | <font style="color:#FFFFFF;">参考链接</font> |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1  | 小红点角标<br/> | | |  | | 在邮件未读的情况下，有小红点标记未读。<br/>可以效果图试下小红点是否需要闪烁还是静止就可以。 | ![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1721273085479-06b9ee54-387d-42ec-9698-d9c93067be10.png) |  |  |
| 2 | 邮件闪烁角标<br/> | | | 邮件图标有个轻微的动效闪烁<br/> | | 在收到新邮件的情况下，人物的图标上会有邮件闪烁的角标<br/>可以效果图看下邮件闪烁角标是否需要闪烁，还是静止就可以<br/><br/> | ![](https://cdn.nlark.com/yuque/0/2024/png/45603655/1721273065475-3cbedd7e-83a4-4961-80ab-97ff4d89429f.png) |  |  |


  
**七、String需求**  




若有收获，就点个赞吧

  
 

