## 1.概览
### 1.1版本管理
[此处为语雀卡片，点击链接查看](https://www.yuque.com/cod5mf/iwqppn/mizmphq5hwwwqr1n#auzW2)

### 1.2设计目的
为市政厅设计配套的市政功能工程，市政厅每天向城市需求不同的资源，玩家可以通过捐献资源，将手中开采的资源，交易给政府，从中获取资源货币。



### 1.3.功能介绍
每个城市每天定时获得城市工程订单。订单的获取规则。

订单主界面，玩家通过主界面完成的捐献操作。

订单结算，计算出兑换的游戏币并发给玩家。



### 1.4系统框架
详细介绍请查看城市经济系统设计文档。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1722514452401-8a871593-752f-4154-975d-a7bf0eb4c828.png)









## 2.功能详情
### 2.1特殊名词定义
2.1.1政府工程：每个城市每天会发布一次的资源需求清单，在市政厅产看相应功能。







### 2.2市政工程开启条件
功能表设置一个功能开启条件，功能未开启时，界面按钮不显示。



### 2.3政府工程界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723449146158-4099228f-a498-41c3-ae81-3f9eb766ed5d.png)



### 2.4政府工程的获取
2.4.1政府工程刷新时间

城市开启后，每天0点，政府会发布当天的政府工程需求清单。  
每个城市会在统一的政府工程库中抽取随机的工程事件。



2.4.2政府工程的计算方法

投资的资金会根据前一天当前城市的矿产资源捐献总价值和城市的财政情况计算获得。

政府工程单子的总token=(上个政府工程单子玩家捐献矿产总价值+rand(50-400))*财政赤字率

第一天的资金配置一个固定的启动资金，带入上述公式中计算。





### 2.5工程贡献
2.5.1工程捐献

发布后更新界面信息，玩家可以开始进行当天的捐献操作。

政府工程需要的资源种类为全资源都需求，但是会随机不同的贡献系数。玩家只能看到需求量。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723001248782-b31a3dcf-61de-4538-aeba-acd3fa3617db.png)

玩家根据资源的需求情况在捐献后获得贡献点数，用于分配资金的计算。



2.5.2工程贡献度计算

玩家贡献度=资源捐献数量X对应资源贡献度系数。



### 2.6捐献操作
2.6.1单项最大值

进度条显示当前我有的最大值。



2.6.2单项颗粒度

根据资源的数量级，设定每种资源的每次最小提交数量。



2.6.3拖动或者输入

拖动进度跳或则输入资源数量确定数量。

点击数字可以弹出输入框直接输入。

输入的资源自动按最小单位向下同步，比如105=100。



2.6.4提交

点击提交后，数字归0，按今日比例换算成贡献度。显示提示“提交成功”。

在可以提交的状态下可以多次提交。



### 2.7每日工程结算
2.7.1结算状态锁定

每天晚上10点，进入结算状态。结算状态时显示结算结果。玩家无法捐献操作。

果在界面打开状态进入结算，会有一个短暂的结算中状态。然后切入结算状态。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723449431620-743fa0b2-3543-48dd-a975-7c70e306b5f4.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723449533505-5bfb2b76-635e-46a2-a631-ad9c360a78b9.png)

2.7.2资金分配

根据当天玩家的捐献获得的贡献度，将资金分配给参与玩家。

玩家获得资金=我的贡献度/全部贡献度  *预期资金。

向下取整



### 2.8资金分发
通过固定邮件通知玩家资金的分配情况。

游戏币建议直接分配到玩家的游戏账户。

和传统游戏不同，货币不能进行销毁，只能回收到城市金库。



## 3.界面说明


## 4.配置表说明
4.1政府工程事件表

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723455657371-4f354d72-d474-498d-ae19-3c2395f9572b.png)



4.2政府工程配置

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1723001248782-b31a3dcf-61de-4538-aeba-acd3fa3617db.png)

每日随机数范围【50，400】

资源值最小粒度【101；10】【102；10】【103；20】

## 5.功能清单




















