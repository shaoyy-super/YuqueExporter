

## 一、概述
### 1.1 文档说明
玩家抽取无法参加战斗以外的功能的傀儡宠物的功能



### 1.2 文档维护


| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| --- | --- | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/7/24</font> | 姚仕达 | <font style="color:black;">文档创建</font> |
| v2.0 | 2024/9/13 | 姚仕达 | <font style="color:black;">web2内容修改</font> |




## 1.3 设计思路
设计目的：给玩家提供宠物，基础的抽卡系统

玩法思路：玩家通过充值和游戏进度获得抽卡道具，然后在共鸣器中抽取灵兽。



### 1.4 系统框架图
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1726212603799-bc5db9f2-d2df-4b80-8894-0cf7616cca80.jpeg)



### 1.5 系统包装
一些天地的灵气偶尔会汇聚到一起，凝结成一些灵气的实体，这些实体被称为晶核。晶核里蕴藏着未知的能量，人们通过研究，制作了一种晶核共鸣器，共鸣器调谐晶核中的灵气，让他和周围环境中的灵气产生共鸣，吸收更多的灵气后孕育成有生命的灵兽。因为晶核中的力量斑杂不均匀，所以能吸收协调的量不可控制。形成的灵兽也不可预测。



## 二、功能说明
### 2.1 名词设定
灵兽：抽卡获得的宠物。

灵兽晶核：抽卡核心道具、主要游戏进程掉落、付费

稀有度：根据灵兽品质，有稀有度设定和显示



### 2.2 宠物抽取流程
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1726301396576-255b5bb9-16ff-487f-8e67-e877f72f9af6.jpeg)





### 2.3 卡池设定
a、游戏中可以同时存在多个卡池，并列存在，玩家可以自由选择抽哪个

b、每个卡池都可以配置对应的卡池随机组和保底组。有卡池表的2个字段调用对应的2张表格

c、卡池目前先做2种类型、标准池和限定池。标准池符合开启条件后默认开启。限定池需要gm工具开启

d、卡池抽卡需要消耗一定的道具或者货币。可以配置每个卡池不同的道具消耗和货币数量。如果只配置道具不配置货币，则该卡池无法直接使用货币抽取。

d-1、当玩家有道具时，优先消耗玩家的道具。没有道具是消耗货币。

d-2、十抽计算时会优先计算消耗掉道具后的价格。

e、十抽有有个价格折扣计算，由表控制，万分比

f、卡池开启有一定的条件，目前先由等级控制

g、卡池权重，卡池对应宠物的稀有度有一个基本的权重配置。权重最大值固定为100000（策划控制）

g-1、每次随机时先由权重随机出走哪一个稀有度组

### 2.4 卡池随机池设定
a、每个卡池的随机池都可以单独配置，随机池中每一条对应一个宠物。当在卡池中随机出稀有度，在对应的随机池和对应的稀有度组中在按权重随机一个宠物。

b、表中可以配置是否为up宠物标识

c、配置每个宠物的权重。随机时以同稀有度组中的宠物的权重值的和为分母。

d、可以配置奖励的宠物的id，调用宠物表id



### 2.5 保底规则
a、每个卡池有一个对应的保底池，池中有数条权重影响品质，根据稀有度影响基础权重，每次只生效一条

a-1、当获得一条稀有度对应保底权重值后。按照原本的权重比例，把其他稀有度的权重按比例挪到需要增加的稀有度中，直到获取的权重值等于保底主要的权重值。（获取时跳过自身的权重值）

b、记录玩家在每个卡池的抽卡次数，当达到一定次数时。走保底池逻辑影响稀有度组的随机权重。次数由表格控制。

c、每次保底池中的权重只会有一条生效，当多条生效时根据优先度配置，优先调用高的。低优先度的轮空，生效和未生效的都会重置次数累计

d、需要可配置保底是否生效，用来规避低稀有度的档次

e、需要可配置保底生效次数。



### 2.6 宠物等级
a、根据玩家当前得进度，数值上会赋予玩家新获得宠物一个初始得等级。需要数值介入



### 2.7 GM相关
a、需要可以开启一个卡池并设置时间，不能设置标准卡池类型（卡池表类型1）的卡池

a-1、同时需要可以关闭一个卡池的设置









~~a、傀儡宠物id和资质：制造傀儡需要消耗核心道具（x阶灵兽晶核）。晶核分数阶，主要由不同的pve副本掉落。每一个晶核对应一条配置。包括资质范围、宠物id池~~

~~a-1、资质范围：按表读取（资质范围|权重；资质范围|权重）（0-1000|0.8；1000-1500|0.2）~~

~~a-2、宠物id池：需要支持配置多个宠物id（对应pet表格）~~

~~b、宠物属性生成、技能获取等等，与野外宠物生成逻辑一致。通过资质和4维权重分配属性，并加入随机值。~~

~~c、根据宠物最开始生成的资质总值，按数量划分稀有度。比如s对应10000+、a对应5000-9999等等~~

~~d、当玩家使用某一个种类的道具达到一定次数后，抽取的配置池会发生改变，表格控制~~

### ~~2.3 宠物回收~~
~~a、根据宠物的稀有度，宠物会生成对应的精华点数，根据表格配置。（s对应2000、a对应1500等等）~~

~~b、精华满时，会按权重生成一个灵兽晶核。只有玩家通过pve副本中已经获得过的晶核id才会进入随机范围。~~



## 三、界面说明
### 3.1 主界面
玩家点击对应的建筑互动按钮，会进入傀儡精炼器界面。此功能的主界面在主城中有固定的模型。进入会把镜头固定在正对此建筑的一个镜头上，然后显示功能ui，同时建筑会有一定的激活表演和特效。

[此处为语雀卡片，点击链接查看](https://www.yuque.com/cod5mf/iwqppn/diqi8w93l4t2szpn#JG0eW)



![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726220726899-665ce637-72ec-446e-93b8-f7b470b38101.png)



a、左上为返回按钮、中间为系统名称

b、下方为单抽可十连2种抽取方式，显示2种标题并显示消耗的数量。

b-1、当玩家有足够的道具是，在道具右下角显示消耗的数量，当玩家没有足够的数量时，显示抽取需要消耗的货币数量。

b-2、使用货币补足时，出现消费提示框，玩家确认后执行抽卡

c、玩家点击晶核即可执行抽卡程序。并播放抽卡动画表演

c-1、如果玩家使用货币进行抽取，需要弹出消费确认提示，玩家确认后继续抽取。

c-2、十抽时，在玩家不仅仅使用道具抽取时，弹出消费提示，玩家确认后继续抽取

d、右上为2种资源的展示，包括货币和晶核数量。根据卡池可用的货币或道具显示。

e、右下为商店跳转，方便玩家跳转取购买礼包，暂时预留按钮位置即可

f、左侧为抽卡池切换和展示，基础功能先只做基础的通用卡池和角色up的限定卡池。页签顺序由表格控制。

f-1、卡池开放由等级控制，没有开放的卡池不显示

g、右上显示可以用来抽卡的道具显示，由表格控制。

### 3.2 卡池页签
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726300354666-b1e8fef8-c212-40c3-abb9-396fe945b481.png)

a、屏幕左侧为卡池展示。玩家可以通过点选不同的页签切换卡池。目前先做最基础的卡池

b、点选页签切换卡池和横幅。基础卡池的横幅上展示：基础卡池自有的宣传图、宣传标语、以及卡池获取奖励情况

b-1、限时池在页签上有倒计时显示

c、10次和60次为前端保底提示（数量走配置），会随着玩家抽取慢慢减少次数显示，保底有几个档次，在表中配置对应的数量仅做显示逻辑。

d、点击奖池说明弹出说明界面。

e、当玩家选择不同的卡池类型的时候，场景中的建筑会展现出不同的常驻特效效果。突出界面后消失

f、点击概率说明按钮出现说明tip，也可以放在功能说明里，看具体美术设计。每个卡池有对应的说明

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1727318897877-e524184e-5b2b-416a-b8fe-feb221bcf1ca.jpeg)



### 3.3 抽卡展示
隐藏所有ui，并播放完抽卡动画后，显示抽卡展示

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726283181389-87f25239-1ac6-4b83-b837-199e37a4c2ba.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726221725637-6d7db91c-057d-4df3-9f1d-011650959ba4.png)

a、最上面为抽卡标题

b、中间为宠物造型、名字、稀有度显示

c、数秒后显示详细展示界面，这期间玩家不可点击不可操作



### 3.4 详细展示界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726221744683-c2df21ae-b7d6-4688-96c3-bfa89cd15457.png)

a、宠物造型区域原有信息不变，名字+稀有度

b、右侧显示显示宠物的基础属性，格式和宠物界面保持一致；技能卡牌，主要显示天赋技能，布局排版和宠物界面保持一致

c、点击卡牌后可以展示卡牌详细详细，操作逻辑和宠物界面保持一致

d、点击空白区域关闭界面，返回傀儡精炼主界面



### 3.5 十抽展示
玩家通过十抽，增加进入十抽展示界面

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726221772821-784a12ad-b7ea-4ea7-909b-494364585c64.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721804720336-4d0b65e6-16b8-42bf-9402-cc462e19156f.png)

a、最上面为抽卡标题

b、结果开卡动画后进入上方界面。然后依次显示抽卡结果，显示宠物头像、稀有度、名称即可

c、玩家点击宠物头像会跳转详细展示界面，和单抽界面一样。点击任意位置返回该界面。

d、点击空白区域关闭界面，返回傀儡精炼主界面



## 四、配置表说明
### 4.1 卡池表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726302685576-66232c6d-1f47-4338-9a42-1b8522902880.png)

### 4.2 卡池随机表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726302702283-bb2e57b5-2e42-4609-b4a6-c045d27fd209.png)

### 4.3 卡池保底表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726302724465-6b1217e8-b646-4aef-8cd4-815c1293228a.png)



## 五、功能需求清单




## 六、美术需求清单
### 6.1 2d需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">分类</font>** | **<font style="color:white;">名称</font>** | **<font style="color:white;">品质</font>** | **<font style="color:white;">资源命名</font>** | **<font style="color:white;">美术需求</font>** | **<font style="color:white;">参考</font>** | **<font style="color:white;">成品缩略图</font>** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 道具 | 灵兽晶核 | 紫 |  | 原始晶核类道具 | ![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721807834605-98a90c6c-7772-49c5-bbab-fe0717a4117d.png) |  |
|  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |
|  |  |  |  |  |  |  |  |


### 6.2 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 傀儡精炼器界面（包括3d场景配合） | 一级界面 |
| 2 | 抽卡展示界面 | 二级界面 |
| 3 | 十抽展示界面 | 二级界面 |
| 4 | 宠物详细展示界面 | 二级界面 |
| 5 | 回收界面 | 弹窗界面 |




### 6.4 场景需求
| **<font style="color:white;">所属系统</font>** | **<font style="color:white;">场景类型</font>** | **<font style="color:white;">场景名称-美术</font>** | **<font style="color:white;">场景用途</font>** | **<font style="color:white;">描述</font>** |
| --- | --- | :---: | --- | --- |
| 傀儡精炼器 | 场景模型 | | ui界面展示、场景功能入口 | 一个大型的炼精仪器，里面有一个玻璃或者可用来展示过程的区域，用来展示抽卡时里面稀有度变化的区域 |




### 6.5 动态物件需求
| **<font style="color:white;">分类</font>** | **<font style="color:white;">名称</font>** | **<font style="color:white;">用途</font>** | **<font style="color:white;">美术需求</font>** | **<font style="color:white;">动作需求</font>** | **<font style="color:white;">动作名</font>** | **<font style="color:white;">特效需求</font>** |
| :---: | :---: | --- | --- | --- | :---: | --- |
| <font style="color:black;">场景物件</font> | | 抽卡、场景入口 | 精炼器 | 晶核进入精炼器后合成出宠物的抽卡动画 | | 配合抽卡的特效效果；包括出现宠物品质的展示特效效果 |




## 七、string需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| :---: | :---: | :---: | :---: | :---: |
| | | | | |
| | | | | |






















