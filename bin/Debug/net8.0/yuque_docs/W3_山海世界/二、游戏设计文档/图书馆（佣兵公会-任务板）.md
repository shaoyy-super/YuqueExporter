

## 一、概念
### 1.1 文档说明
集成所有副本pve玩法的功能。目前包括主线任务和材料副本



### 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/7/29</font> | 姚仕达 | <font style="color:black;">文档创建</font> |
| | | | |


### 1.3 设计思路
设计目的：

主线关卡负责前期引导玩家以及让玩家逐步熟悉游戏的战斗方式和节奏。

悬赏任务主要负责提供玩家在游戏中需要用到的升级道具，可供玩家反复刷取。

佣兵公会的概念集合游戏内所有pve的玩法。方便玩家快速的熟悉和便捷的使用游戏内容。

玩法思路介绍：

主线关卡为一次性推进式pve副本，难度较低。战斗规则为游戏最基础的战斗规则。

悬赏任务提供大量玩家升级所需的材料。战斗规则也为游戏最基础的战斗规则。





### 1.4 系统框架图


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1725258937790-01247e66-5719-4441-9f51-bd7dadc6f977.jpeg)



### 1.5 系统包装
城市中有一个佣兵公会的地方，这里会发布和承接各种各样的任务。

玩家加入后，可以通过佣兵公会进行一系列的pve任务并获得丰厚的奖励。所有主线相关的pve关卡也可以在佣兵公会进入。



## 二、功能说明
### 2.1 名词设定
章节：数个关卡的合集。根据pve类型的不同，章节出现不同的信息

关卡：配置有具体怪物和奖励的战斗关卡，根据pve类型的不同，关卡自己有不同的规则

主线任务：一种pve的类型。为玩家初期的主要pve体验玩法，只可单次挑战

悬赏：一种pve的类型。这种pve可以让玩家反复刷取材料





### 2.2 基础关卡定义
#### 2.2.1、关卡流程


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717498358379-4f68cf2d-ed4b-4903-90eb-6aea8e0eea76.jpeg)



#### 2.2.2、关卡解锁条件
a、关卡解锁分2种：等级锁定和前置关卡锁定。只有2个条件都符合才会开放此关卡

b、需要可以配置，副本是否可以反复挑战。

#### 2.2.3、剧情调用
a、需要在关卡中可配置剧情id的调用

b、可配置在关卡战斗前播放 还是在战斗胜利后播放

b-1、战斗前剧情在玩家点击接受按钮进入场景后播放，进入后直接显示剧情对话界面

b-2、战斗后剧情在玩家击杀关卡目标后回到关卡场景内播放，播放结束后出现完成关卡展示，然后回到关卡界面。

c、剧情关卡播放，在玩家接受任务后直接跳转播放，结束后直接回到关卡界面

#### 2.2.4、关卡阵容
a、需要可配置每个关卡的怪物阵容，以及怪物对应的技能、等级；可配置对应的场景、音乐等等。

a-1、关卡有战斗类型配置，战斗类型表里有默认得背景和音频配置，如果关卡表里有额外得配置，读关卡表。没有则读默认配置

a-2、需要在关卡表里配置最多3个怪物id的阵容（可以小于3，非战斗类型的关卡不用配置），出场顺序即是表格里得顺序。

~~<font style="color:#8A8F8D;">b、特定关卡会对玩家的阵容有一定要求，根据宠物的类型来限定（比如：种类、nft、寿命等等）在选择阵容界面就直接把不可用的宠物隐藏。初版本不需要这个功能，后续其他功能可能有扩展。</font>~~

c、新增战斗类型：剧情关卡。剧情关卡不调用战斗流程，在玩家进入关卡后，直接调用剧情配置。看完这段剧情后，在关卡界面上播放奖励界面。（可以和战斗前剧情配置放在一起）

#### 2.2.5、通关目标
根据战斗类型需要数种可通关方式，来丰富玩家的关卡体验，目前版本需要：

a、战斗胜利，战斗结果判定为胜利时通关。

a-1、战斗胜利关卡的流程为：点击接受-进入关卡地图-触发剧情-玩家选择战斗怪物-战斗-回到关卡场景-触发剧情-完成弹窗-返回关卡界面

a-2、战斗胜利关卡分为普通和boss战斗。boss战斗中配置的最后一组怪物默认为boss怪。

b、剧情通关，观看完关卡所需要播放的剧情id后即可通关。

b-1、剧情关卡的流程为：点击接受-进入关卡地图-播放剧情-回到关卡地图-完成弹窗-返回关卡界面



#### 2.2.6、关卡奖励
a、需要可配置完成关卡后对应的奖励组id。并在玩家完成关卡目标后发放并显示。

a-1、关卡可配置首次奖励，只在关卡第一次胜利时发放。不配置没有

#### 2.27、关卡消耗
a、表格中需要有体力消耗配置，或者消耗其他道具的配置。在玩家进入战斗时扣除。

b、如果玩家关卡战斗失败则返还体力或道具。



### 2.3 悬赏任务
a、玩家在主线关卡类型中通关一个特定的章节，就可以解锁这个区域对应的悬赏任务。（关卡解锁）

a-1、悬赏任务没有次数限制，消耗道具进入，玩家可以反复战斗。

b、未解锁的悬赏任务不显示出来



### 2.4 深渊副本
a、深渊副本为一次性线性副本，同系列副本内系统开始时默认只能打第一关，每次完成一个关卡开启下一个。原本的关卡无法再次挑战

b、根据主线的进度，会逐步解锁数个深渊副本。不同的深渊副本之间没有前置关系。





### 2.5 定义关卡怪物
a、需要一张专门的怪物表，定义用在pve中的所有的怪物的配置。怪物表中的怪物直接调用配置的数值即可。



### 2.6 关卡场景
a、可以配置战斗的关卡对应一个小场景，进入场景无消耗，可任意进出

a-1、进入关卡先跳到关卡场景中，然后玩家可以自由选择战斗对象。所有怪物击杀后，完成关卡

b、玩家在关卡内有成功击杀怪物后，退出关卡场景后保留当前关卡进度，玩家再次进入延续之前的进度。

b-2、如果玩家进入一个其他的副本，出弹窗提示玩家已有进度会重置，玩家确认后重置之前副本的进度。





## 三、界面说明
### 3.1 任务板主界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726042797972-5138602b-708d-4dd1-8bb1-2390431a34c5.png)

a、入口为主城中一个任务板模型，点击交互后，镜头推动至对准任务板模型正面做为功能背景，出现ui菜单

b、最上面为返回按钮和任务板标题

c、中间为横向排开的pve功能按钮，根据不同的pve类型，显示各自需要的信息。

c-1、主线任务：显示主线任务图标、主线任务标题、以及主线任务配套的插画。最下方显示当前正在讨伐的主线任务进度

c-2、悬赏、深渊：显示悬赏/深渊的任务图标、悬赏任务标题、以及悬赏配套的插画。最下方为一行文本描述

c-3、其他pve内容根据后续需要可扩展

d、根据需要，配置pve玩法说明，如果有此配置，则在左上角出现一个感叹号，点击该玩法的banner上所有信息切换为说明文本，并有半透明灰底遮罩，点击面板后返回原本的状态。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1726042829433-38451fc6-3c76-4604-8037-5a89c4358275.png)

e、pve玩法有开启条件时（走功能表）未开启的功能置灰，并在标题下显示一个解锁预告。比如：等级12解锁，完成主线任务1.8解锁。等等

f、一页默认显示4个，如果超出，下方出现滚动条提示玩家可横向滑动。如果不足4个，按居中对齐显示。



### 3.2 主线任务
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727169893886-7f749d64-fc06-46ab-aa5d-dd4f989968f3.png)

a、点击主线任务的按钮后进入主线任务关卡选择界面。默认打开当前解锁的关卡位置，并处于选中状态

a-1、如果不需要翻页，则正常显示并选中当前本。如果需要翻页则默认翻页至当前副本在第一个的位置并选中。

a-2、右上有副本对应的消耗的货币展示，主线关卡为体力。走表格配置

b、左侧为关卡列表，显示标题、状态图标、难度标签。

b-1、状态分3种，包括讨伐中、锁定、已完成。讨伐中为当前解锁的关卡，不可进入的关卡为锁定状态。已通关的关卡为已完成状态并显示一个绿钩置灰

b-2、关卡条最右侧为难度标签，用星数显示。按战斗力换算，比如0-1000为1星，1001-2000为2星。当星星数超过5时，展示格式变为图标+数字的模式。

b-3、boss关卡（高难度关卡）有特殊的底背景显示和boss标记。

b-4、剧情关卡：剧情关卡只播放剧情，不进入战斗。开战按钮显示未进入，任务条上增加剧情关卡特殊显示（类似boss关卡），其他不变

b-5、锁定状态目前包括：前置关卡未通过的普通锁定状态、任务未完成的普通锁定状态、功能未开启的普通锁定状态和等级未到未解锁的等级锁状态

c、关卡列表一页显示6行，超过后出现滑动条提示玩家可以滑动

c-1、只会显示当前正在战斗的、下一个要开放的和已经完成的副本

d、关卡列表上方为章节信息条，显示当前的章节名字、当前的章节进度、最后是章节完成奖励

d-1、章节进度以星星计算，当前已完成关卡难度数/章节总难度数

d-2、点击章节完成奖励的宝箱图标。出现tips，展示奖励列表并有文字提示玩家通过后可获得奖励。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722311965330-b203442d-4c62-492f-a34f-388cae4a8407.png)

d-3、点击章节信息条可以跳转章节选择界面

e、右侧为详细任务展示。背景为任务关卡相关插画（可以直接用关卡的战斗背景渲染图）

e-1、详细信息部分依次是

         左上：任务名字、战斗力显示+难度星数展示、任务描述文本。

         左下：报酬金（完成副本给予的金币奖励，没有不显示）、主要怪物（读取关卡配置中怪物的名字）、物品奖励（没有不显示）

e-2、如果有首次奖励配置，玩家在获得首次奖励前奖励展示里展示首次奖励的展示配置。获取后变为普通通关奖励的展示配置

f、右下为开战按钮，点击后跳转战斗场景。玩家战胜本关卡里的所有怪物组时，关卡胜利。一个关卡里可以配置多组怪物，有一场战斗失败后不会重置本关卡，玩家可以再次挑战未战胜的敌人。也可以挑战该关卡内的其他敌人。

g、当玩家第一次完成某个章节的最后一关，领取奖励的图标会有强调显示，玩家领取章节奖励后。会有一个章节切换的动效展示，玩家也可以手动切换到新的关卡不领取奖励

h、主线关卡中战斗类关卡可以重复战斗，剧情类不可重复战斗。选中剧情类关卡后战斗按钮灰显，点击提示已通关该关卡



### 3.3 章节列表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727235264767-8dddc434-f0a5-4681-ab3a-1a419b7bdf6e.png)

a、点击章节信息条打开章节列表界面。一个章节表现为数个关卡的合集，有表格控制

b、章节信息条中信息文本变为：当前章节。在章节页面中永远显示当前章节。再次点击信息条可以返回正在攻略的关卡列表中。

c、任务列表变为章节列表，主要形式：主线任务图标标记、章节名字、状态图标。状态图标逻辑和关卡一样分为4中：当前解锁、锁定、已完成、未领取奖励

c-1、当一个章节中任意一个关卡解锁时，该章节解锁。

c-2、只会显示当前正在战斗的、下一个要开放的和已经完成的副本

d、右侧为大地图展示。主要为一个简单的横向地图展示，有章节图标（章节名字+图标）和路径展示。默认以当前已解锁的章节的位置为中心。玩家可以滑动查看，仅为展示。可以和野外世界对应。

d-1、已解锁的章节显示为章节图标，已完成的显示为章节图标+完成标记，未完成的显示为未解锁状态。

e、点击章节列表中章节，右侧地图滑动至对应的章节位置，让章节图标居中。然后跳转对应的关卡列表界面。（此过程为表演过程，地图滑动表演过程中玩家进行操作会打断前一个表演。）

f、当玩家完成一个章节没有领取奖励时，会在章节列表显示一个奖励图标，并在玩家第一次点击时领取。离去后恢复为之前的选择逻辑

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727155613070-e2248a2f-fb4c-48f1-a40f-cfb04b7a0561.png)

### 3.4 悬赏列表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727168594582-3bad95eb-b2e5-4a30-aa9a-cd815775974c.png)

a、点击悬赏按钮进入悬赏列表界面

b、左侧为悬赏任务列表，最上方为标题。下面时列表区域。体力区域显示切换为悬赏副本需要消耗道具的显示。可以根据消耗配置显示。为道具时不显示+号跳转按钮

b-1、单个悬赏列表中显示：前端为悬赏任务标记、悬赏任务名字、右侧为此关卡主要的奖励产出最多显示2到3个

b-2、列表最多显示4、5个，多于此数量时可以滑动，出现滑动条。每次打开默认滑动至最后

c、右侧为和主线关卡一样的大地图，周围有一个渐变的颜色遮罩，来区分pve关卡的类型，在对应解锁的关卡上显示一个被悬赏怪物的头像。仅为展示

c-1、玩家点选一个悬赏关卡时，右侧地图滑动切换至对应关卡居中显示。

d、点击开战后进入关卡场景，需要消耗固定的道具才能进入。道具由主线关卡概率掉落，玩家没有足够的钥匙时，提示玩家道具不足提示



### ~~3.5 悬赏任务~~
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722319389211-59dcdbba-bee0-41fa-8b21-1dc853ce98ac.png)

~~a、点击悬赏列表中的任意关卡，可以进入悬赏任务子界面~~

~~b、左侧显示任务子列表，最上面为当前的悬赏任务名字，和可挑战的剩余次数~~

~~c、列表中显示子任务的任务名字，右侧为任务难度显示，逻辑类似主线任务。未解锁的任务有一个带锁的标记~~

~~d、右侧为任务详细信息界面，背景为该子关卡的相关插画（可以直接用关卡的战斗背景渲染图）~~

~~d-1、详细信息部分依次是~~

~~         左上：任务名字、战斗力显示+难度星数展示、任务描述文本。~~

~~         左下：剩余可讨伐次数（没有不显示）、报酬金（完成副本给予的金币奖励，没有不显示）、主要怪物（读取关卡配置中怪物的名字）、物品奖励（没有不显示）~~

~~f、右下为开战按钮，如果副本有消耗，则在开战按钮下显示消耗数量。（这里仅为提示，实际消耗在副本完成时扣除）~~

~~~~

~~~~

### 3.5 万兽深渊
随着玩家的主线解锁，探索更多的区域，各个区域都有一个巨型的荒兽深渊

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727245240092-22c480b5-50d0-4ae3-8c06-8d0b1d441257.png)

a、点击万兽深渊入口进入副本列表界面。玩家每通过一定的章节会解锁一个深渊本

b、副本列表中展示玩家当前可以进入的所有深渊副本章节

c、章节列表有2中状态，已完成和战斗中。全通关标记为已完成状态。

d、右侧为地图展示界面。可以沿用大世界的地图，地图上显示各个章节的区域，各区域内有1各深渊副本的标志

d-1、点击章节列表中章节，右侧地图滑动至对应的章节位置，让章节图标居中。然后跳转对应的关卡列表界面。（此过程为表演过程，地图滑动表演过程中玩家进行操作会打断前一个表演。）





![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727245254116-dee48733-962a-4444-9c64-e0aaa0450341.png)

a、点击章节进入该深渊的关卡界面

a-1、默认显示当前可以战斗的关卡的位置，如果需要滑动才能显示，默认滑动到最后一页

b、关卡分为3种状态，包括：已通关、战斗中、未解锁。

c、所有已通关的关卡都会显示在列表里，有绿色已通关标记，玩家可以滑动预览。

c-1、选中一个已通关的关卡时，左侧地图会滑动至改关卡对应的位置。但开战按钮灰显，奖励显示为已领取状态

d、正在战斗的关卡有战斗标签。点击后可以点击战斗按钮跳转战斗界面

d-1、此类型的关卡会直接跳转阵型界面，可以直接开战进入战斗

e、只会显示一个未解锁的关卡，有锁标记。点击后开战按钮置灰

f、关卡有2种类型：普通关卡、困难关卡

f-1、普通关卡显示关卡名字、深度

f-2、困难关卡额外显示boss标志，关卡条有特殊的显示

g、右侧为地图带入展示，底图为一个可以循环拼接的数段深渊地图。上面有每个关卡的基本位置信息和当前关卡的怪物展示

g-1、根据当前的关卡，每1段图都对应一个关卡，玩家在选择关卡时，右侧的地图会动态的滚动到对应位置。滚动的时间固定，速度根据具体时间变化。如果跨过的关卡超过一定数量则直接切换





### 3.6 关卡场景


![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1725260581171-4a10cdaf-249e-4e6f-ab59-f65d8cfda20c.png)

a、当配置表中有关卡展示场景时，在玩家点击开战按钮后进入展示场景，根据配置读取地图和玩家出现的位置朝向

a-1、关卡展示场景有区域限制配置。如果为空则全地图可跑。如果有限制配置，则玩家无法离开此区域。玩家在靠近区域边界时会有特殊的特效显示边界信息。玩家碰触边界后会提示玩家该区域正在发生战斗无法原理。

b、左上为返回按钮，点击后出提示弹窗。玩家确认后退出。左下为移动遥感

c、右下为开始按钮，按表格顺序，依次寻找对应的怪物组进行战斗。开战按钮上显示下次战斗的体力消耗。表格中需要可配置每组怪物对应的展示怪物id。怪物在场景中用和野外一样的行为树，但怪物也不会离开设定的活动区域。

c-1、玩家也可以自由选择战斗的顺序，点击怪物或者怪物头上的ui可以进入战斗。

c-2、选中一个怪物组后，玩家的角色会自动寻路到这个怪物的交互范围内然后触发战斗（先进入阵容选择界面）

c-3、boss关卡的最后一组怪默认为boss怪，击杀前面的几组小怪后，boss怪刷新，并伴随boss预警。boss怪的头顶有特殊的战斗提示tip

d、表格中需要可配置次关卡对应的场景和背景bgm。

e、boss关卡中，玩家进入副本剧情播放完毕或者前一波怪击杀返回场景刷新boss怪后，会有boss预警表演

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727156688870-e4c79354-569b-49c2-8a71-991a39abaecf.png)





### 3.7 完成关卡显示
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727156860986-11b12319-aade-4c5e-919d-6263fa57cadf.png)

a、屏幕正中间出现完成关卡提示

b、下面显示完成获得的奖励，包括货币和item两种格式

c、此界面下，玩家不可操作其他按钮，点击除了item图标会出tips以为的任意位置返回关卡选择界面





## 四、表格配置
### 4.1 章节表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722329345223-cd80ddc0-afa7-4e2f-87fb-d463c3ab97f3.png)



### 4.2 关卡表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1727168939757-51d73dcc-615e-4a98-ba3b-0e2fd9d0111f.png)





### 4.3 怪物表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1722328879616-e6757ac9-b46c-4656-86fb-e8da5260d019.png)





## 五、功能需求清单








## 六、美术需求清单
### 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 任务板主界面 | 一级界面 |
| 2 | 章节列表 | 二级界面 |
| 3 | 主线任务界面 | 二级界面 |
| 4 | 悬赏列表 | 二级界面 |
| 5 | 悬赏子界面 | 二级界面 |
| 6 | 章节奖励预览 | 弹框 |




### 6.2 场景需求
| **<font style="color:white;">所属系统</font>** | **<font style="color:white;">场景类型</font>** | **<font style="color:white;">场景名称-美术</font>** | **<font style="color:white;">场景用途</font>** | **<font style="color:white;">描述</font>** |
| --- | --- | :---: | --- | --- |
| 任务板 | ui地图 | | 章节展示 | 一张游戏关卡构成的缩略地图 |
| 任务板 | ui地图 | | 悬赏列表展示 | 一张游戏关卡构成的缩略地图 |
| 任务板 | 展示场景 | | 主线关卡展示列表 | 对应关卡的战斗背景渲染图 |
| 任务板 | 展示场景 | | 悬赏任务列表 | 对应关卡的战斗背景渲染图 |
| | | | | |




### 七、string需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| --- | --- | --- | --- | --- |
| 任务板主界面 | 点击关卡板主界面按钮 | pve类型未解锁 | 文字提示 | 功能暂未开启 |
| 关卡列表 | 点击关卡 | 关卡锁定 | 文字提示 | 当前关卡未解锁 |
| | 点击开战 | 费用不够 | 文字提示 | 当前没有足够寿命的宠物 |
| | 点击开战 | 次数不够 | 文字提示 | 当前没有剩余挑战次数 |
| | 点击关卡 | 关卡已完成 | 文字提示 | 已通关 |
| 章节列表 | 点击章节 | 章节锁定 | 文字提示 | 当前章节未解锁 |
| |  |  |  |  |












