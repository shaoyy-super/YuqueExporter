

## 一、概述
### 1.1 文档说明
玩家可以把宠物放入打工位进行打工，打工会持续产出货币



### 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | :---: | :--- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/7/4</font> | 姚仕达 | <font style="color:black;">文档创建</font> |
| | | | |
| | | | |


### 1.3 设计思路
功能方面，做为挂机玩法，是玩家在游戏里最直接的货币产出。

体验方面，丰富游戏主城市的活动生态。



### 1.4 系统框架图


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1720152201557-4682d259-6776-4575-ba9d-5996784d3f4b.jpeg)





## 二、功能说明
### 2.1 打工操作流程
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1720149020479-6a90a598-504c-420c-b38b-f934bfa63076.jpeg)

### 2.2 宠物技能和消耗
a、打工产出主要由宠物的技能等级影响。每个宠物本身都有打工等级，打工等级越高，基本效率的数值越高。

b、宠物的各种额外技能，会对效率的数值有一个修正（走技能的逻辑制作。可能会有：产出速度、产出量等等维度的影响）

c、宠物打工会消耗寿命。最后形成寿命转化产出的经济循环。每打工3小时获得1份工资，3小时内停止打工无收益无消耗。工资的数值根据最终的打工效率得出（数值公式）。

d、打工时，宠物会处于锁定状态。此状态下宠物无法执行锁定状态不可同时进行的其他功能玩法。目前主要为：场景跟随、挖矿。



### 2.3 工厂经济
a、城市财政状态会对宠物的打工的最终产出有额外的影响

b、城市财政影响：根据城市财政状态，产出会有衰减。财政受到补充后会恢复。所有玩家产出的所有货币都从城市财政的池子中获取（打工是获取城市财政池中的货币）

| <font style="color:black;">剩余token百分比</font> | <font style="color:black;">城市财政</font> | <font style="color:black;">产出衰减</font> |
| :---: | :---: | :---: |
| <font style="color:black;">1</font> | <font style="color:black;">财政充足</font> | <font style="color:black;">0%</font> |
| <font style="color:black;">0.7</font> | <font style="color:black;">轻度赤字</font> | <font style="color:black;">30%</font> |
| <font style="color:black;">0.5</font> | <font style="color:black;">中度赤字</font> | <font style="color:black;">50%</font> |
| <font style="color:black;">0.3</font> | <font style="color:black;">高度赤字</font> | <font style="color:black;">70%</font> |
| <font style="color:black;">0.1</font> | <font style="color:black;">城市破产</font> | <font style="color:black;">100%</font> |




### 2.4 打工技能
技能模块中，宠物本身需要提供对应的打工技能

## 三、界面说明
### 3.1 主界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1724407826317-aeac4085-8d51-4e86-aedd-7694d48ac128.png)

a、在地图中划分区域，打工区域为一个独立的区域。玩家进入该区域后。切换ui变成打工操作界面。

b、左上为打工队列，显示当前所有正在打工的宠物。显示宠物的头像、姓名、寿命和效率。宠物剩余打工倒计时会以圆形的方式顺时针显示。

b-1、界面上的宠物打工效率的数值显示为宠物自己的等级和技能计算后的打工效率

b-2、玩家点击任意位置都可以把宠物从打工队列撤下，撤下时会出现信息确认框。提示玩家该宠物工作的时间长度和打工获得货币收益数量。

  
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1720416856754-a7458568-6a7a-45fe-a8c8-ffb98ab262a4.png)

队列可花费货币扩充，根据表格数量显示。数量超过外框后列表可以滑动查看。点击后有消费确认框

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1720416198778-de6fc158-52a9-4356-848d-f2f4f4f51168.png)

c、玩家点击任意空白工作位置可以把宠物放入工作队列，如果队列已满提示玩家队列已满。玩家可以花费货币开新的打工位置，打工位置数量有上限。

点击后弹出宠物选择和时间设置弹窗

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721990550417-b9c3fb78-4fc6-450a-ab42-89503c1084f9.png)

d、弹框显示可打工的宠物列表。已打工的宠物和在其他功能中锁定的宠物都排在后面并有一个标记显示，剩余的宠物按打工效率从大到小排列。可上下滑动

列表中宠物头像主要显示：nft标记、品质、名字、头像、打工效率、寿命

d-2、弹框中以单份收益为计数方式（生产数量/时间/寿命）。玩家可以选择设定需要的收益次数，用左右箭头选择时间（时间最长不超过24小时、寿命不大于宠物剩余寿命），产量向下取整，可循环显示。

e、右下为收获按钮，不显示数量，点击后收获所有宠物身上的货物。

e-1、每个宠物头顶有一个小tip，显示当前宠物身上产出的货物，玩家点击宠物或者这个tip可以收取货物

e-2、收回宠物会把货物一起收走

e-3、货物收取有一个货物从ui上爆出并飞向背包的动效

f、右下还有一个宠物界面跳转按钮方便玩家养成宠物

g、左上为当前打工点当前工作的所有宠物的总效率和，以及最左侧返回当前打工功能入口位置的寻路按钮。打工场名字右侧显示当前城市赤字率

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1721989840275-9a8daf4f-be24-427a-be60-3151293f38b0.png)

h、如果宠物完成了设定时间需要的打工时长，则停止宠物的打工，并显示已结束。玩家点击后弹出打工完成提示框，确认后宠物收回，并收取宠物身上的货物。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1723533517059-79fe489d-bb18-48ab-8a6a-72dd3f2b021b.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1723533763850-ae6fb333-b4f7-43c5-aab8-89b9a2472e3d.png)

### 3.2 宠物技能影响的不同显示模块
a、在宠物的技能中，会影响宠物实际生产过程中的单次产量、时间、寿命等维度的属性，需要在玩家选择宠物的界面中显示出来

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1723532322327-79cab26b-445f-46ed-ae4e-d176f05eb457.png)

选项都以单次产出为基础值。及玩家单机点选箭头产生的数量增加

具体产量：如果有直接影响单次产量具体数值的，则把（1个/3小时）中的数量预估改为实际产出数量，并用绿色标注

概率产量：如果是在产出是有概率产出增加，则在下面显示绿字（概率产出提高）

具体时间：如果有直接影响单次产出耗时减少的，则把（1个/3小时）中的时间预估改为实际产出数量，并用绿色标注

单次时间上限：玩家可选的时间档次增加

具体寿命：如果直接影响单次产出消耗寿命的，则把预计寿命扣除：1岁中具体的数值改为实际数值，并用绿色标注

概率寿命：如果又概率影响单次产出消耗寿命的，则在下面显示绿字（概率寿命减少）

### 3.3 宠物打工表现
a、玩家设定好打工宠物后，宠物会刷新在玩家左侧。并寻路到打工的表演位置。如果是玩家身边的跟随宠物则会直接寻路去工位。并停止跟随状态

b、宠物到达工位时，会进入工位挂点并播放打工表演。表演为循环动画，直到打工结束。这个过程中宠物会一直在打工点播放表演。

c、打工结束后，宠物会直接消失在工位上，工位回到待机的状态

d、打工建筑的打工位和玩家已开启的打工位对应。

e、打工位本身有数种状态。未开启（玩家未解锁当前的打工位）、待机（已解锁未工作）、工作中



### 3.4 打工包装
城市内的一个铸造厂。宠物在铸造厂内打工，获得货币

## 四、配置表说明
### 4.1 城市财政表
新增字段：打工产出衰减比例



### 4.2 生产表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1724398377663-e0c19b50-8579-4762-a30a-440f353dc936.png)



### 4.3 工作队列表
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1723535874768-c0fd1267-9689-4b7f-bbc4-e5011d8391a3.png)









## 五、功能需求清单






## 六、美术需求清单
### 6.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 打工主界面ui | 一级界面 |
| 2 | 时间设定 | 弹出框 |


### 6.2 动作需求
每个宠物需要一个适配的打工动作。（跟随宠物制作）



### 6.3 场景需求
| **<font style="color:white;">所属系统</font>** | **<font style="color:white;">场景类型</font>** | **<font style="color:white;">场景名称-美术</font>** | **<font style="color:white;">场景用途</font>** | **<font style="color:white;">描述</font>** |
| --- | --- | :---: | --- | --- |
| 打工 | 建筑展示 | | 打工主建筑场景 | 一个可以进入室内的打工建筑，有npc站立的接待区域 |
| 打工 | 工作区域 | | 宠物打工表演区域 | 一个开阔的工作区域，室内室外都可，需要和主建筑连通。有数个独立的工作位置 |




## 七、string需求


| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| --- | --- | --- | --- | --- |
| 打工流程 | 派遣宠物 | 宠物列表已满 | 确定框 | 当前队列已满 |
| | | | | |
| | | | | |


