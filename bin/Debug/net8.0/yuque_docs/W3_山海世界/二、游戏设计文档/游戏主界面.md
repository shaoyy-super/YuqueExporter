## 1、概述
### 1.1 文档说明
游戏主界面相关功能

### 1.2 文档维护
| 文档编辑情况 | 编辑时间 | 编辑人 |
| --- | --- | --- |
| 文档初版，确定基本结构和内容 | 2024.4.28 | 丁显智 |
| 游戏主界面1.0 | 2024.5.21 | 姚仕达 |
| 游戏主界面多方案 | 2024.5.29 | 姚仕达 |
| 主界面3d版本补充 | 2024.6.3 | 姚仕达 |
| 文档格式补充 | 2024.6.17 | 姚仕达 |
| 左上角功能、打工、野外功能补充 | 2024.6.26 | 姚仕达 |


### 1.3 设计思路
结合3d场景游戏带遥感的移动布局，加上一般卡牌游戏需要的核心系统。2者融合的方式。





## 2、功能说明
### 2.1 遥感和控制
#### 2.1.1 行走遥感（左遥感）
a、左下为操遥感，只在玩家接触到左遥感区域且非按钮区域长按时出现。遥感区域是以固定中心点形成的一个圆型范围（应该是原有的功能）玩家不操作时，有一个默认的半透明状态提示玩家遥感的存在

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717751606814-0e62183a-7b04-4eab-b2e2-696623b363a1.jpeg)

b、遥感区域控制人物行走，以遥感的固定中心位置，小圈是玩家控制的遥感位置，外圈是最高可推动区域。

c、小圈跟随玩家手指在屏幕上滑动，手滑动时，小圈偏离中心点，人物也会随着移动。以12点方向为中轴线，对应人物面向正前方向。小圈中心和大圈中心的连接线发生角度偏移时，人物随着偏移值向不同方向运动。

d、小圈的中心点不会超过外圈的边缘，玩家手指超过区域后小圈不再向方向直线移动，只随角度移动。（即保持玩家选中区域的中心点、小圈的中心点、大圈的中心点永远在一条直线上）

e、行走分2种速度，与小圈和中心点距离决定，当小圈的中心点在大圈的半径一半区域内时，为慢走。超出为快走。手指松开原地待机，小圈归位置同时2个圈的ui都隐藏。

f、在收到不同角度的移动时，直接旋转人物模型到对应角度，并播放移动动作。快走和慢走调用2种不同的移动动作，且移动速度不同



#### 2.1.2 镜头遥感（右遥感）
a、屏幕除左摇杆区域以外的所有当前非交互屏幕区域都是镜头右摇杆区域，主界面这里暂时只有行走的行为，所以做成双遥感的形式即可。这边的遥感主要控制镜头的旋转，并以大圈的中心点为锚点。镜头遥感默认是隐藏显示，玩家摇动时也不显示

b、摄像机的默认位置为初始进入场景时人物的后上方，镜头方向固定朝向人物身上的一个中心点位置，摄像机跟随人物移动。

c、遥感以12点方向为中轴线，小圈偏离中心点时，摄像机移动。围绕人物身上的中心点旋转（旋转轨迹为以人物身上的一个中心点，有最大半径的的球体表面和内部）。

d、小圈位置分2种方向逻辑，当小圈的垂直坐标向上增加时，摄像机以人物为中心，固定半径向下移动，镜头方向依旧对准人物中心点。反之，垂直坐标向下移动，固定半径向上移动。（如果移动过程中，摄像机位置有其他模型碰撞体，则以人物中心到碰撞体的距离为半径移动）

e、当小圈的水平坐标发生偏移，向左偏移时，摄像机向右旋转。反之向右旋转。2种方向逻辑和重叠失效

f、旋转的距离和手指移动的距离有关，这里小圈的位置不受大圈限制。松开手时，镜头在当前位置固定，下次移动以当前镜头位置为起始

g、当摄像机进入人体模型的碰撞体区域时，人物模型开始变成半透明。在碰撞体内，以人物中心点。摄像机离碰撞体越往远，透明度越高，到达一定范围后模型透明度为0。

h、以人中心为球体即摄像机移动的球体，人体垂直方向为球体中轴线。当夹角为0，向上推遥感，镜头不在下移。向下推遥感，镜头不在上移。

i、预留动作操作按钮区域，这个功能在主界面没有，但可以预留出区域

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1717396834608-8e1d5c7d-2340-4f68-8486-ba554e188ad9.png)



### 2.2、功能按钮
功能区域分2种，ui部分和场景部分

#### 2.2.1、ui按钮
a、根据功能自身配置，功能入口可以出现在屏幕右上方和右侧的功能栏中

b、等级不足时，按钮不显示

c、点击后跳转各自对应的功能界面

#### 2.2.2、场景按钮
a、根据功能自身配置，功能入口可以赋予场景中的某一个模型区域上。（表格配置id）

b、玩家控制人物碰触到建筑门口的一个特定区域（区域可配置或者由美术设定好区域）或者点击建筑本身时人物自动寻路进入都可以打开或者进入功能界面



### 2.3 打工列表流程


![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1719391207467-07d3a007-a7c5-491e-a8f7-3f6e424a5f12.jpeg)



## 3、界面说明
3d场景+偏动作布局

### 3.1 主界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1719457229842-e4c7e45e-4f9e-4d53-9fde-6bae98223101.png)

a、左上为人物信息面板，显示人物、头像、id、经验、货币。点击头像后进入人物信息界面



b、功能按钮：

b-1、中间上方为功能条，放置一些基础的功能按钮。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1717395638738-c82e1a53-cc04-421d-a6d2-cc5d514a0a77.png)

b-3、右下为最重要的功能按钮



b-4、右上侧为3个为核心系统功能按钮。

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1719385878895-ff993021-7182-4918-9a46-914ef257fa06.png)

城市按钮跳转城市功能页面，为其他功能的跳转按钮收纳界面

打工按钮显示当前城市的名字，并有小字显示当前正在打工的宠物数量，没有时显示休息中...

野外按钮跳转野外大地图界面



b-5、右侧预留一个收纳按钮，点击后出现一个功能收纳框



c、正下方为聊天框

默认可显示4行文字，根据聊天框系统文字顺序向上滚动，点击后弹出聊天框界面（具体功能跟随聊天框制作，这里只是作为一个展示和功能入口）

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1719455516481-b531784e-d873-4386-a3ce-427ede7cf765.png)



d、左下为遥感区域







### 3.2 城市功能
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1719389698664-06764ab4-16f7-4100-8be1-77110fe2bd95.png)

a、左上为返回上层按钮，中间为标题

b、从左往右，按开启等级逐个显示各个功能的入口按钮。按钮上包括：背景、名字、各功能需要的其他组件（根据后续各功能需要制作）

c、功能未解锁时，显示为灰态，并有锁标志和在xx等级开启或者xx任务完成后开启的文字（根据功能开启系统规则需要显示）



### 3.3 打工队列
![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1719373619431-8ec41a63-bfa3-4e00-832c-41c265dafcc1.png)

a、左上为返回上层按钮，中间为标题，右侧为货币显示

b、左侧为打工队列显示，右侧为城市地图，

c、城市地图

c-1、城市地图主要负责储存当前打工产出的物资，并通过标签显示在界面上，主要显示：物资图标+数量（超过一定数值用k、m表示）。玩家点击后收取（除了货币其他都收入背包中）

c-2、如果某个打工场所的位置上没有宠物在打工，则显示空位。

c-3、城市界面有名字显示，并有左右切换按钮，点击后可以查看另外一个城市的打工情况。

d、打工队列

d-1、打工队列按城市为分类。下面的每一条对应一个打工点。

d-2、打工点中包括打工点的图标、打工宠物的头像和计时条、当前打工的效率。点击打工点后跳转跳转对应功能。

d-3、宠物头像按打工委派界面顺序排列。头像周围为每个宠物各自的计时条，显示委派时间的倒计时

d-4、效率为当前所有宠物打工的合计效率，数值前面显示该物资或者货币的小图标。无人打工时显示0

d-5、点击城市标签可以收起下面的打工点条目，再次点击打开。方便玩家后期查看





### 3.5 其他布局操作可参考方向：
原神、鸣潮

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717133375663-ab980b75-d1d5-4681-a69a-3bbd482a7033.jpeg)

逆水寒

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717400069971-b2d7cf94-d676-4c55-b316-24487f24382d.jpeg)

吃鸡

![](https://cdn.nlark.com/yuque/0/2024/webp/43733777/1717401540927-a4f8f73e-7f3b-4624-a973-6b5b44ab61d7.webp)养老院

第五人格

![](https://cdn.nlark.com/yuque/0/2024/webp/43733777/1717402035463-4c847349-b3ec-4947-8d66-4c3570b3d892.webp)

地球末日

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717402242457-73ccee87-6998-4ef6-ab73-9b89f84ef33f.jpeg)

## 4、场景说明
### 主场景
大致地形图：

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1717402592543-ec7fd0af-1fa5-4e76-b8ae-068968459eaf.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733777/1717399317182-caccb74d-ce83-42f1-9d12-1ea11f4e788e.png)

a、主场景为一个圆形、梯形或者矩形的大广场（形状不做太大的限定，只要在玩家视角出现一个带有纵深透视的3d场景即可），玩家可以在里面自由移动。不可行走区域有空气墙遮挡

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1716272362329-1aa27a14-bf49-4d08-a5d1-53e90c57b2b6.jpeg)![](https://cdn.nlark.com/yuque/0/2024/jpeg/43733777/1717398154329-dc7e9e44-786b-4481-af4f-e56de9a19d5d.jpeg)

b、玩家出生点位广场的最下端，坐标可配置，或者直接存在包里

一进入游戏即可看见正前方最主要的核心建筑。核心建筑可以是游戏最为核心或者要求最高的玩法入口，比如32强或者排行榜等等。也同时可以用以展现最高端玩家战力的区域



3、2侧为各种城市内玩法的入口，会有对应的标牌（类似南京路那种）。玩家控制人物碰触到建筑门口的一个特定区域（区域可配置或者由美术设定好区域）或者点击标牌人物自动寻路进入都可以打开或者进入功能界面

根据配置关联模型和功能id

![](https://cdn.nlark.com/yuque/0/2024/webp/43733777/1716272747752-886e037e-fa61-4556-ba30-bbd3bbcc17ad.webp)

4、主场景会根据当前在线的玩家分组，一组可有数个左右的玩家（包括宠物）同时出现。每次玩家进入主界面，都会随机分配进入一个组。场景中的玩家可以有一些交互行为（聊天、加好友、查看基本信息等等）



5、建筑功能

a、市政厅：根据玩家消耗治理币的行为动态生成每日市政府工资表，玩家消耗治理币越多市政府工资越高。

b、图书馆：产出宠物经验（不可交易）和技能书碎片（可交易），适用于想要提升战斗力去竞选城市管理者的玩家。

c、打工：最基础的打工建筑，稳定获取治理币，但是收益受政府财政状况影响

d、矿场：产出不同种类的矿物，用于增加打工宠物槽位、捐献给政府工程获得治理币、后续的宠物装备打造、强化、附魔等

e、老年团：免费玩家可以通过做日常等获得养老院的入场券，在其中抽取到老年宠物，不可参与打工只能用来打主线挑战等非核心玩法。

f、繁育所：玩家给宠物配对，繁育新宠物的地方



6、拓展

街道2侧需要预留可扩展的街道区域，方便后续制作新功能的建筑入口。一开始2侧的街道直接用道具封堵即可





## 5、配置表说明
5-1、功能表

功能表新增按钮位置类型配置。1表示ui功能区域、2活动区域、3场景区域|模型id、4表示城市功能收纳界面里的按钮

## 6、功能需求清单
[【特性】主界面开发进度 @姚仕达](https://snh48group.yuque.com/cod5mf/omhzyg/gfxbsnfqbndll1qu?singleDoc#)

## 7、美术清单
### 7.1 界面需求
| 编号 | 界面 | 性质 |
| --- | --- | --- |
| 1 | 主界面 | 主界面 |
| 2 | 城市功能界面 | 二级界面 |
| 3 | 打工界面 | 二级界面 |
| 4 | 打工委派界面 | 二级界面 |




### 7.2 场景需求
| 所属系统 | 场景类型 | | 场景用途 | 描述 |
| --- | --- | --- | --- | --- |
| 主城 | 展示地图 | | 主城 | 主场景 |






## 8、string需求


| 类别 | 目标操作 | 触发条件 | 提示形式 | 提示string |
| --- | --- | --- | --- | --- |
| 功能提示 | 点击功能按钮 | 功能未开启（任务条件） | 文字 | 完成xxx任务后开启功能 |
| 功能提示 | 点击功能按钮 | 功能未开启（等级条件） | 文字 | xx等级后开启功能 |
| 场景提示 | 碰触功能建筑 | 功能未开启（任务条件） | 文字 | 完成xxx任务后开启功能 |
| 场景提示 | 碰触功能建筑 | 功能未开启（等级条件） | 文字 | xx等级后开启功能 |
|  |  |  |  |  |
|  |  |  |  |  |
|  |  |  |  |  |
|  |  |  |  |  |












