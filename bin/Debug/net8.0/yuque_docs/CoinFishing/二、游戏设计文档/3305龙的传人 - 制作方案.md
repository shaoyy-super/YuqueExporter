# 1、TML拆分![](https://cdn.nlark.com/yuque/0/2024/png/43256857/1730886072797-65c4dab7-39aa-4e0b-9ad1-05a1e4774042.png)
1）全局TML（1条）

负责：入场+擂台创建+擂台最终消失+开始出拳的事件帧

美术制作：

+ 控制场上的单位进入结算状态（移动到镜头前面）|结算入场
+ 调起跳字UI
+ 创建擂台，擂台需要挂到单位身上，方面后面跟着单位一起靠近镜头
+ 结算入场后，TML进入循环状态
+ 循环结束后，控制人、擂台直接渐变消失，跳字UI移动到玩家炮台上
+ 标记开始出拳的事件帧

程序控制：

+ 程序创建表演的主体单位（传递给下面所有的TML）
+ 结算开始就播放这个TML
+ 等整个结算结束后停止
+ 停止时机：后面的打拳失败或者完成的TML播完之后，或者中间某个时机中断循环(具体做的的时候再确定)



2）1级拳、2级拳、3级拳 TML（共3条）

负责：每次出拳成功的完整过程（蓄力+特效+出拳+回待机+衔接事件）

美术制作：

+ 完整的表演过程
+ 添加衔接失败的事件帧
+ 添加衔接下一段的事件帧
+ 表演结束的事件帧（对应全局TML循环结束）
+ 跳字控制的轨道
+ 如果有单位靠近镜头的控制，通过位移轨道实现（需测试效果）

程序控制：

+ 全局TML的事件帧处，开始播放第一次出拳的TML
+ 每次出拳TML的事件帧处，衔接下一次出拳或者失败



3）失败TML（1条）

负责：通用失败的表演

美术制作：

+ 失败的表演
+ 表演结束的事件帧（对应全局TML循环结束）

程序控制： - 



# 2、程序功能支持
1）位移轨道

2）TML组装模块：用统一的方式组装管理TML，达到预览跟运行时结果一致的目的

3）编辑器预览功能支持：在1条轨道里调用2）的模块，方便美术人员拖动时间轴预览效果

4）跳字功能更新：跳字由程序调起起，在多个TML中控制更新（脚本、TML都要改）

5）TML传参：打死鱼的玩家位置传递给TML跳字



