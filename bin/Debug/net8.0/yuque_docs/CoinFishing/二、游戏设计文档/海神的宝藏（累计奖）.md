# 概述
## 文档说明
本文档说明了获得鱼魂时积攒能量，触发额外小游戏的整体玩法流程。

该玩法为各个模式的通用玩法。

## <font style="color:rgb(5, 7, 59);background-color:rgb(253, 253, 254);">文档维护</font>
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| :---: | :---: | --- | --- | --- |
| <font style="color:black;">v1.0</font> | 2024年11月09日 | | [@王敏涵](undefined/cookie-ylrqq) | 文档创建 |
| <font style="color:black;"></font> | 2024年11月12日 | | [@王敏涵](undefined/cookie-ylrqq) | 更新玩法流程图 |
| <font style="color:black;"></font> | 2024年11月13日 | | [@王敏涵](undefined/cookie-ylrqq) | 新增大奖规则：改成全服共同积攒的奖池 |
| <font style="color:black;"></font> | 2024年12月06日 | | [@王敏涵](undefined/cookie-ylrqq) | 修改包装等 |


## <font style="color:rgb(5, 7, 59);background-color:rgb(253, 253, 254);">设计思路</font>
+ 给予玩家捕获精英鱼、boss鱼的额外期待感，通过多阶段开奖感受，刺激玩家上头
+ 其它模式，如老虎机模式内也可能会触发该玩法进行开奖。

# 功能说明
> **视频2min之后开始**
>

[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/zgag0hu1iu5x5ohm#V0c55)

## 玩法流程
![画板](https://cdn.nlark.com/yuque/0/2024/jpeg/26927517/1734509513121-88d5f728-9c88-497c-aa88-6b5aeb163ffd.jpeg)

## 触发规则
**玩家捕获精英鱼、BOSS鱼后，有概率触发特殊事件（具体权重待算法）**

+ 无事发生
+ 积累海神的宝藏，海神的宝藏满后可触发开奖小游戏
+ 直接触发开奖小游戏，根据概率触发一阶段/二阶段小游戏

**触发表演时机：**

+ 捕获boss鱼之后先播boss表演，boss表演结束后再触发开奖小游戏表现（飞鱼魂+海神宝藏累计满后转场）

## 开奖小游戏规则
总共有n张卡片，m种图案，每轮翻开一张卡，翻到3个相同图案后结束，结算对应的图案效果，根据翻开图案的效果进行结算。

（每种情况的概率结果由后端给，翻卡过程前端模拟）

### 一阶段小游戏
**共6张卡片，2种图案**

2种图案结算时分别有特殊效果：

+ **奖励升级（Prize Upgrade**）：将二阶段小游戏的4种图案奖励进行升级（每档奖励都乘上额外倍率）
+ **双重选择（Double Pick**）：将二阶段小游戏的结算条件由翻开1次 3个相同图案，变为：翻开2次 3个相同图案后结算（相当于会结算两次奖励）

**【表现流程】**

1. 播过场，进入全屏小游戏，平铺6个图案
2. 玩家依次点击翻开对应图案
3. 触发结算时，对应结算的三个图案亮起
4. 播过场，进入二阶段小游戏

**【奖励升级流程】**

1. 先播全屏奖励升级特效，奖励图标变化为新一档，更新奖励数额
2. 游戏中...
3. 出现三个相同图案时，触发结算，三个图案亮起
4. 播放图案的对应结算表现，回到渔场

【**双重选择流程**】

1. 游戏中...
2. 出现三个相同图案时，三个图案亮起
3. 出现两组三个相同图案时，触发结算，对应的六个图案都亮起
4. 依次播放两次图案对应的结算表现，回到渔场（每播一次则加上对应结算奖励）

### 二阶段小游戏
**共12张卡片，4种图案**

4种图案结算时分别对应不同档位奖励。

+ 1、2、3档奖励为**固定计算出的钱**
+ 4档奖励为**浮动的钱**，将全服捕鱼流水按一定比例计算一起攒，实时变化
    - 当有玩家获得该档的钱时，将钱数重置为初始值

_**多人同步处理：**_

+ 小游戏界面4档奖励显示当时记录的钱，赢得的也是显示的钱
+ 小游戏期间攒的流水算在奖励重置之后，加到初始值身上
+ 例如：有10个玩家同时在玩小游戏，此时玩家a随机到了4档奖励，此时其它玩家都不可能随机到该档奖励。

## 其它
+ 新增4类型跑马灯：当玩家获得3、4档奖励时，“恭喜玩家{0}在海神的宝藏小游戏中获得海神大奖/海神巨奖，赢得{1}！”
+ 同一房间有玩家在进行小游戏时，其它人视角：显示“海神的宝藏游戏中”

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731480306189-4496c22e-2f29-4cf5-accd-2599f9d5bd62.png)

# 界面交互
## 玩法规则弹窗
+ 海神的宝藏弹出玩法规则弹窗，点击关闭关闭弹窗

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1733972101651-657df9dd-e061-45eb-8613-c80167be5d25.png)

## ”海神的宝藏游戏中“
![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731480306189-4496c22e-2f29-4cf5-accd-2599f9d5bd62.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1237%2Climit_0)

## 开奖小游戏
### 一阶段
包含两个图案+图案背面

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731396398532-1784e7c0-b822-4c78-9800-b270631a10a6.png)![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731138995368-b5ab662c-48c0-44d0-8f94-ba9a19247d33.png)

### 二阶段
包含4种奖励的图标，从小到大：mini、minor、major、grand，可以用不同颜色的波塞冬形象包装

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1734509408785-105205b1-548f-4c56-8ea8-91d9575193a3.png)![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1734509358915-e7f33ca0-501f-4f4e-896e-bcebd31e9d20.png)

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731399603142-d0227e60-b50e-47ec-8162-7f14cfb449e9.png?x-oss-process=image%2Fformat%2Cwebp)

![](https://cdn.nlark.com/yuque/0/2024/webp/26927517/1733973329053-45a60a28-d247-4235-8844-df31ecd44589.webp)

### 结算
共4个档次，对应4种图案

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731139066826-73a6963d-224c-4867-a43e-26a9a3f3d1af.png)

![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1731139047321-ca7cf576-8a71-4cff-8549-3f85a48fcc01.png)

# 配置表
三个子表分别说明了：

1. 触发各种条件的概率以及需要积累几次海神的宝藏才能满（后端用）
2. 一二阶段小游戏各档奖励权重（前端+后端用）
3. 一阶段、二阶段游戏展示的图标（前端用）

[Lottery.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2025/xlsm/26927517/1736425217013-cf93a262-12ea-47ee-b5dd-ff5d87599de6.xlsm)



