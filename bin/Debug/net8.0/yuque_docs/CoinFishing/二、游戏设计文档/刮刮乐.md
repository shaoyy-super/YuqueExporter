全局掉落功能

玩家在捕鱼过程中随机掉落神秘卡牌

玩家抽取卡牌后会获得一次奖励抽取，qa随机抽取一个boss，播放boss的击杀片段，获得倍率奖励。

# 一、概述
## 1.1 功能说明
捕鱼时有概率掉落一种新增的道具-海神卡牌，命中和掉落规则单独设定。玩家抽卡牌得到一种结果，根据炮倍获得金币奖励。

## 1.2 文档维护
[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/nbciktbargabommx#mDTTJ)

## 1.3 设计思路
### ~~1.3.1流程新增:模式判断~~
~~子弹碰到鱼（各种投注物）时，根据模式命中公式（圆桌）。判定进入投注模式~~

~~包括：基础捕鱼、大奖模式、刮刮乐模式、福袋模式、彩票模式等。~~



### 1.3.2新增功能：刮刮乐
作用：均衡爆率，投放首领表演。



### 1.3.3功能简述 
全部渔场均会触发本功能的刮刮卡模式。功能开启后就可以触发。

触发公式与抽水率有关。抽水率高时，可以通过本公式增加进入刮刮乐模式的概率。

触发后，投注进入本系统，与其他模式和基础捕鱼冲突。

通过本系统刮刮卡命中公式，结算投注结果。



### 1.3.4投注结果
根据刮刮乐投注物的倍率计算命中率

根据当前炮倍X倍率，结算金币

## 1.4 系统框架图
![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732605889408-a4881db8-c6cb-440a-85e1-f28ada218042.png)

# 二、功能说明
## 2.1 名词设定
功能名称：刮刮乐

名词说明：用于功能使用的标准名称



## 2.2 功能开启
2.2.1功能开启配置开启条件，未开启功能时不触发卡牌掉落流程

2.2.2功能开启使用通用配置，暂定为最大炮倍达到XXX

2.2.3本功能内置开启条件，无需告知玩家。



## 2.3 刮刮乐功能进入
模式命中配置的权重



## 2.4刮刮乐玩法简述
### 2.4.1刮刮乐掉落概率
掉落概率=模式池奖金/（当前炮倍*z） *（1-抽水率）

z是配置得价值参数。 

### 2.4.2命中后计算本次刮刮卡得
卡牌仓库中配置使用的首领卡牌，每张卡牌对应一个奖励倍率

这里可以8-10个即可

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732711187627-3d2920d3-a63f-46f6-9295-eb50780c9bb5.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735184966378-5f747ac3-ce37-47f8-87f8-d22758580f18.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735184974776-3c74e0dd-263c-4c66-aeb5-298a39b139f0.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735184981358-d5573142-0d6b-4f84-a16d-f280ebaf06aa.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735184987278-ddc9a76f-7d8a-4ab0-befe-b53156dfc0db.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735184994117-96dbce14-3970-43a0-a695-70e6937a4570.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735185001429-fec9b88c-4f39-4c4f-af8f-96a2b3db7c74.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735185024653-c18bc553-2e9b-44b3-99c4-e325fa9ed2af.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735190770001-694d5fae-3aa5-41bd-971b-3cc003191194.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735185141953-0397f085-7c18-4419-a3d2-e91d2bf8f000.png)![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735185157326-dbf90a2a-3856-49dc-9c3c-8900af6db32c.png)

### 2.4.3刮刮乐模拟体验
主要模拟刮刮乐的三个核心体验

高反奖率50-65%

多级奖励，小奖到大奖各种丰富的奖励。

卡面精致可串收集。





### 2.4.4表演
左边随机出本张卡片的中奖范围，六个首领卡牌

右边刮刮卡隐藏区域刮出图案与左边图案有相同时，获得对应倍率奖励。

刮出来的卡牌如果在左边奖池中没有，没有奖励。



## 2.5幸运卡牌触发效果
### 2.5.1卡牌触发掉落
卡牌可堆叠，堆叠时只记录数量，翻开时按获得顺序次序翻开即可。

参考：卡牌掉落效果，卡牌存放，卡牌翻起

参考视频

[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/nbciktbargabommx#vKrK9)

### 2.5.2卡牌功能界面
玩家点击卡牌icon唤起界面

唤起界面时，中奖图案自动刮开，然后显示本张卡的基础奖金。

动画完毕后，玩家可以刮刮奖区。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735216853754-971d6c54-9acd-4e0a-96b8-f9d82ac89a34.png)

### 2.5.3刮刮卡操作
手按住刮奖区域刮开灰色区域，刮卡区域操过50%即可判定成功。六个图案全部刮开50%后，整个卡刮开完毕，进入结算。



[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/nbciktbargabommx#qIS9M)



[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/nbciktbargabommx#DOoWp)



[此处为语雀卡片，点击链接查看](https://www.yuque.com/ttk5k0/manpny/nbciktbargabommx#wHtAv)

### 2.5.4成功结算
成功结算指刮开的图案中有与右边奖励图案相同，即判定中奖。

卡牌的基础奖金=卡牌掉落时的炮倍X配置中该图片的倍率

当前刮刮卡获得的奖金=卡牌基础奖金X刮出的图片数量



### 2.5.5成功结算表演
调用不同的卡面的过长效果。每个卡片对应一个动画。

ui结算使用通用的刮刮乐结算资源。

中间可以插入对应首领的表演奖励。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732700044440-f7ddd31b-5c31-4081-b7c4-16046f534a3f.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732700642459-1f837605-56eb-4c28-b906-51ba918c6a09.png)



### ~~2.5.6失败结算~~
~~刮奖区的结果与目标不相同即可，刮完后卡牌销毁。~~

如果有下一张，自动切换到下一张刮刮卡。

没有下一张，卡牌销毁后回到捕鱼。



# 三、界面说明
## 3.1主功能界面
![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1735216874526-245c5258-8bcc-4d58-87b4-72d09528fd3c.png)

:::color1
**UI状态说明**

①	功能名称									

②	通用问号说明									

③	刮刮卡数量，每张刮刮卡的奖金可能是不一样的，这里只显示数量								

④	中奖图案：奖池图案和中奖图案每有一个相同，则获得一次基础奖金									这个图案可以直接显示出来不用玩家自己刮								

⑤	关闭按钮。动效缩回到捕鱼界面原始位置。										

⑥	奖池图案，刮奖区，六个可刮区域。

7.刮奖覆盖层，灰色的涂层，用手触摸可以移除覆盖层。

8.文字玩法提示，多语言说明。

9.基础奖金显示，直接显示奖励的金币数量。								

:::



## 3.2中奖的提示
![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732701818235-51bd64d9-1a72-45ae-b639-902f317c59c2.png)



## 3.3刮刮卡的存储显示
3.3.1icon是刮刮卡。

3.3.2脚标显示数量。

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732701881407-4a8cbff3-5f8d-4714-9238-bc43326ef9a1.png)



3.4成功发奖效果

![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732701985910-434c8dbd-1664-401c-82a0-fd965cc8e1b6.png)





# 四、配置表说明
![](https://cdn.nlark.com/yuque/0/2024/png/43733765/1732711172701-34be7de8-c26f-4edb-b3de-541ea5e3a5f3.png)



---------------------------------------------------底线

# 五、功能需求清单


### 6.3 动效需求
使用通用的界面动效需求表格

备注此系统需求的动效ID

参考项目：

[https://snh48group.yuque.com/mwyfd0/nx3vv2/ahfzy98v2wyz3mp4](https://snh48group.yuque.com/mwyfd0/nx3vv2/ahfzy98v2wyz3mp4)

![](https://cdn.nlark.com/yuque/0/2025/png/43733765/1736330575183-5490e752-868d-4b03-a65e-3f2587ad68a1.png)

![](https://cdn.nlark.com/yuque/0/2025/png/43733765/1736330583251-4c8e253c-f2ee-4fae-9828-af182565308d.png)

1.卡牌掉落到飞到ui功能区

2.卡牌功能区循环

3.点开卡飞到中间，自动刮开，刮开后的效果。

4.卡牌展开界面

5.未刮开区域的点击提示

6.中奖的彩带

7.结算





