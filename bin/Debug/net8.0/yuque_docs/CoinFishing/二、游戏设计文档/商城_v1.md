# 一、概述
## 1.1 文档说明
商城系统，同时包含真金和绿色版本，通过配置调用不同版本需要的商城内容

## 1.2 文档维护
| <font style="color:white;">版本</font> | <font style="color:white;">时间</font> | <font style="color:white;">负责人</font> | <font style="color:white;">修改内容</font> |
| --- | --- | --- | --- |
| v1.0 | 2024/1/20 | 姚仕达 | 文档创建 |
| | | | |
| | | | |


## 1.3 设计思路
通用商城系统框架，可配置不同页签、商品和对应的货币

## 1.4 系统框架图






# 二、功能说明
## 2.1 功能设定
### 2.1.1 功能入口
a、主界面有对应的商城入口，货币栏后方加号也可以跳转，后续有其他跳转再增加



### 2.1.2 商城
a、商城内有数个页签，根据配置分开。

b、页签内可以配置商品串，根据表格显示。

c、不同商品有不同的类型，根据类型显示商品的内容和购买方式。



### 2.1.3 商品
a、目前版本需要的类型包括：钻石、金币、材料、道具。4种

a-1、钻石，充值购买，获得一定数量的钻石

a-2、金币，钻石购买，获得一定数量的金币

a-3、材料，钻石购买，获得一个随机给升炮材料的道具

a-4、道具，钻石购买，或者一定数量的道具

b、商品有限制条件，包括限定一定时间内的购买次数。可购买资格的条件

c、商品有优惠配置，可配置每个商品需要的优惠方式





## 2.2 功能逻辑
### 2.2.1 功能开启
a、玩家到达一定游戏进度会开启功能，新增一个商城功能id，走openfunction--Condition

a-1、商城内的每个页签也有单独的openfunction--Condition；每个商品也有自己的openfunction--Condition，未达到的页签和商品不显示。

b、功能入口在主界面右上角功能栏图标，货币栏后方的+号键也可以跳转对应的商城页签



### 2.2.2 商店逻辑
a、游戏内分为数个商店，都显示在商店界面内，以页签方式排列。根据表格配置和顺序区分。一个id为一个单独的商店

b、可分别配置商店的名字和图标

c、每个商店可配置单独的商品串，走商品表，表示该商店内包含的商品



### 2.1.3 商品逻辑
a、有商品表格来配置不同的商品。商品统一走item-drop的方式配置商品内容。可在表中另外配置商品的名字和图标。商品有不同的类型，本版本有：金币、钻石、材料、道具。4种类型

a-1、金币类型的商品在玩家获得金币时需要加上玩家的全局金币充值buff。（商品本额+优惠额度）*充值金币获取buff

b、可配置每个商品对应购买的货币种类和价格数量，目前包括钻石类型和充值类型。

b-1、充值走外部付费跳转，玩家点击付费按钮后，先弹出付费确认弹窗，确认后跳转。当付费成功后切回游戏内部，玩家获得商品。付费不成功则无法获得商品

b-2、其他货币类型都在玩家点击付款按钮时进行判断，如果玩家拥有足够的货币则弹出付费确认弹窗，购买成功后发放物品。如果没有在点击购买按钮时玩家没有足够货币，则文本提示玩家货币不足

c、商品有不同的购买方式，可配置只能单次购买的商品，还是可复数购买。2种购买形式有不同的付费确认弹窗

d、商品有优惠配置，分为优惠类型和优惠参数配置。

d-1、此版本需要：首购优惠类型，玩家在第一次购买本商品时获得2倍的商品数量。只在第一次生效。2倍为配置的参数

e、每个商品有限制购买的类型，包括：每日限购、每周限购、每月限购、vip限购。0为不限制

e-1、可配置限购对应的参数。时间限购类对应的为本段时间内玩家限购的次数。vip限购为玩家需要达到vipxx才能购买商品。

e-2、可在表格内复数配置限制条件，比如：每日限购2次+达到vip2才能购买

f、每个商品需要自己的openfunction--Condition。此配置不满足时不显示

g、道具类型的商品有一个渔场内消耗时，自动购买的逻辑。在渔场中玩家道具不足时。玩家继续使用，或者自动连续使用时。默认按单个商品的价格直接购买。

### 2.1.4 vip展示
a、调用玩家的vip等级，并显示在商城下方，增加一个跳转按钮

b、有vip经验时充值展示流程：充值成功--获得物品+获得vip经验（在物品弹窗中同时显示）--玩家vip升级界面

b-1、玩家通过充值途径，同时获得道具和vip经验时。把2个奖励合并发放，道具奖励图标在前，vip经验图标在最后



# 三、界面说明
商城页签按类型区分，商品有不同的类型，不同类型有不同的显示逻辑

## 3.1 钻石商城
<u>商品类型1：钻石</u>

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737358118755-83b1dfd0-0422-4e44-b968-1a2ce8b4cd03.png)

a、左侧为页签，根据配置显示，上面显示类型名字，该页签开启后显示对应的商品

a-1、顶部显示玩家的货币数量，目前包括金币、钻石2种

b、中间为商品展示区域，根据配置类型显示。钻石类型商品包括：商品名字、商品图标、商品价格、商品品质底板。

b-1、如果商品有首购优惠，则显示对应的优惠标签。没有不显示

c、下方为vip进度提示框，格式和vip界面类似。

c-1、左侧为当前vip等级图示，中间为vip点数进度和进度提示文本（绿字动态显示升级需要的金额），右侧为下一级vip等级图示。后方为vip功能跳转按钮

d、当玩家点击购买按钮。需要出现购买提示弹窗。弹窗形式可以和活动系统的一致。

d-1、如果是购买单一类型道具，则出现通用的购买弹窗

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737362829192-403b1aaf-5144-4284-83a3-aa2d4bfabb77.png)

d-2、如果购买可复数购买道具，则在玩家货币足够购买多个商品时显示滑动条购买弹窗

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737362877641-02df260b-af6c-4325-aed8-e7cd9412a8be.png)

d-3、如果玩家没有足够的货币，点击价格按钮后提示玩家当前货币不足。





## 3.2 金币商城
<u>商品类型2：金币</u>

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737358133833-47fb8a38-9a98-45a3-9f54-244a0fadaefa.png)

a、除商品外，通用部分显示同上

b、金币类型商品显示包括：商品名称、商品图标、图标下方为金额显示（这里金额为加上buff、优惠加成后的到手总金额）下方显示优惠条目、最下方为价格按钮

b-1、优惠条目前有问号按钮，点击后显示buff详细展示界面。

b-2、在七日签到功能中有类似界面，功能上增加一个对应商品的基础金币数显示（包括商城本身的优惠的金额）+buff加成金币数显示

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737360173994-85ce0828-cb86-4223-a883-5c63368b6123.png)



## 3.3 材料商城
<u>商品类型3：材料宝箱</u>

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737365819949-3f69f405-cbdb-4504-8f9a-1338fe409c25.png)

a、除商品外，通用部分显示同上

b、道具宝箱商品类包括：商品名字、商品图标、商品购买限制、商品价格按钮、限购提示。

c、商品购买显示条件显示，在玩家达到条件后消失。点击为达到条件的商品时，文本提示当前购买条件不足。根据条件不同，显示对应的条件文本不同。根据限制类型配置

c-1、目前包括：vip等级限制，需要配置限制的vip等级。对应文本为：达到vipxx时解锁。

d、点击商品左侧问好时，显示商品详情弹窗。

d-1、包括：商品图标、商品名字、商品描述。下面显示商品内开出的材料的种类、名字和概率。

e、左上按钮点击为宝箱详情展示

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737363083684-08ebb777-bd15-43a7-84e3-959fd4f83555.png)

f、有限制次数要求的商品购买完当前的次数后，会显示已购买字样，然后把本档次后置显示

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1738811222894-8692df50-ac8f-4d17-8e60-4922954036a4.png)



## 3.4 道具商城
<u>商品类型4：道具</u>

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737365567556-70ffb3fe-5213-41c7-9a2a-5e97885e981a.png)

a、除商品外，通用部分显示同上

b、道具类型商品包括：商品名字、道具图标、道具数量、价格按钮、限制图标（限制逻辑同材料类型）

c、商城道具快捷购买，当玩家在渔场内使用道具并且消耗完道具数量后，数量的显示变为单个商品的钻石加个。和商城的道具加个对应。

c-1、玩家继续使用，或者自动连续使用时。默认按单个商品的价格直接购买。

c-2、当玩家没有足够的钻石时，点击或者连续使用后，出提示文本，当前钻石不足，无法继续购买。并取消自动使用状态

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1740469795471-0accef4e-a836-4ef8-ac5c-60accfa81c6c.png)



# <font style="color:#000000;">四、配置表说明</font>
商城表

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1738907137096-c21c59fa-87ea-4e8e-811b-17128cff497f.png)

商品表

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1738811322003-4fbbebc9-fe24-4168-84e2-2d87440e9587.png)





# 五、美术需求清单
## 5.1 2d需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">名称</font>** | **<font style="color:white;">描述</font>** | **<font style="color:white;">使用位置</font>** |
| --- | --- | --- | --- |
| 1 | 金币商品图标5档 | ![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737445143159-a5ca31af-a23e-4013-b65a-2fec4305a20b.png) |  |
| 2 | 钻石商品图标5档 | ![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737445159221-78e55ad2-15df-455f-8f57-3a36ffb44f26.png) |  |
| 3 | 材料宝箱3档 | ![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737445171179-692d1d9c-4a2f-4ea1-9977-c5da477935d0.png) |  |
| 4 | 商城用道具大图标 | ![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737445189413-8afb706e-4838-4b3d-9a52-cfc69818d673.png) |  |
| 5 | 货币图标：钻石 | ![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737445224600-b752b1f2-e635-4d91-9a5d-64c6288211e8.png) |  |


## 5.1 界面需求
| **<font style="color:white;">编号</font>** | **<font style="color:white;">界面</font>** | **<font style="color:white;">性质</font>** |
| --- | --- | --- |
| 1 | 商城界面 | 1级界面 |
| 2 | 购买确认弹窗*2 | 弹窗 |
| 3 | 材料类商品展示弹窗 | 弹窗 |
| 4 | 金币类商品金额汇总展示弹窗 | 弹窗 |
| 5 |  |  |




# 六、string需求
| **<font style="color:white;">类别</font>** | **<font style="color:white;">目标操作</font>** | **<font style="color:white;">触发条件</font>** | **<font style="color:white;">提示形式</font>** | **<font style="color:white;">提示string</font>** |
| --- | --- | --- | --- | --- |
|  |  |  |  |  |
| | | | | |










































