# **概述**
## 文档说明
+ 本文档说明新手引导相关的功能设计和界面表现

## **文档维护**
| <font style="color:white;">版本</font>    | <font style="color:white;">时间</font>    | | <font style="color:white;">负责人</font>    | <font style="color:white;">修改内容</font>    |
| --- | --- | --- | --- | --- |
| <font style="color:black;">v1.0</font> | <font style="color:black;">2024/11/14</font>    | | 陆晓笛    | <font style="color:black;">文档创建</font>    |


## **设计思路**
+ 通过新手引导在适当的时机弹出指引性的引导提示，引导玩家熟悉游戏玩法，逐步上手游戏。

# 功能说明
## 名词定义
**Guide：**通过预先设定的流程引导新玩家熟悉游戏。

**Trigger：**在特定场景下，满足特定行为时，可触发一定行为的触发器。

## 概述
+ 按照预先设定的规则，在合适的场景，合适的时间下，满足一定的条件后，强制弹出特定的弹窗或者引导玩家点击特定的功能按钮。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731637569032-a197cae3-04b4-4ee5-bfb2-373f86b4801f.png)

## 触发强制/软引导类型
+ 强制按钮形式为指引玩家强制点击某一个页面上的组件，如果玩家不进行点击则无法继续下一步，强制引导同一时间只能存在1个。
+ 软引导按钮形式为指引玩家点击某个页面上的组件，但非强制玩家进行，玩家亦可点击其他可控组件。玩家在未完成的情况下且满足条件时，进入相应页面后，会重复触发。(可配置总触发次数）。
+ 软引导同一个时间可能存在多个的情况，也可与强引导并存。强弱引导同时存在时，先走强引导。（配置上尽量避免该情况）

### 引导大步骤
+ 新手引导为一组并列的大步骤组合而成，每个大步骤有独立的小步骤，并且互不相关。当大步骤中所有的小步骤全部完成时，大步骤判定为完成。
+ 当玩家登录到主界面中时，检测自身是否处于未完成大引导的状态，如果有，取优先级最高的引导来完成。

### 引导小步骤
+ 每个引导小步骤为一个等待玩家输入指定的步骤，小步骤直接通过配置实现各种不同条件下的跳转功能。
+ 通常情况下为按照顺序进行的链状结构，每个步骤有展示方式，同步方式，触发条件，异常处理等多个组成部分。

### 新手引导记录同步
+ 关键步骤记录，如果引导到某一步结束后，服务器需要记录一下。

### 引导重新拉起
+ 升级后触发的引导，在断线后，再上线是否需要再引导。

### 引导框类型：
1. 无表现，纯逻辑处理
2. 选中框+文字+箭头+圆形高亮
3. 选中框+文字+箭头+方形高亮
4. 选中框+箭头+圆形高亮
5. 选中框+箭头+方形高亮
6. 文字+箭头+圆形高亮
7. 文字+箭头+方形高亮
8. 文字
9. 文字+圆形高亮
10. 文字+方形高亮
11. 箭头
12. 箭头+圆形高亮
13. 箭头+方形高亮
14. 全屏文字介绍（居中展示）
15. 不显示内容（箭头、文字），但有操作
16. 选中框+文字+圆形高亮
17. 选中框+文字+方形高亮
18. 另外引导支持纯逻辑无表现的配置，支持传参以支持各种程序功能

以上功能基本复用以前的老项目即可，有新的需求再额外追加。

### 引导框显示参数：
+ Top、LeftTop、Left、BottomLeft、Bottom、BottomRight、Right、TopRight。
+ 具体的位置参照UI_Path下的配置。
+ 箭头指向的4个位置：Top、Left、Bottom、Right。
+ 全屏文字说明时：填写说明UI的名字。
+ 特殊功能需要提出需求单独处理。

### 异常跳转步骤处理判断
| <font style="color:black;">jump_type</font> | <font style="color:black;">jump_value</font> | <font style="color:black;">jump_target</font> |
| --- | --- | --- |
| <font style="color:black;">1=强制跳转</font> | | <font style="color:black;">跳转检查（填写步骤id）   </font><font style="color:black;">检查成功;检查失败</font> |
| <font style="color:black;"></font> | | |


### 开启类型
+ 一个小步骤拥有开启类型，主要分为主动触发和等待代码回调两种类型。
+ 主动触发则视为无条件开始此步骤，等待代码回调则需要相应的代码触发了相关的回调，用于需要等待玩家操作或者需要一定执行时间的步骤	。

### 结束类型
1=触发EventPath上绑定的事件（UI）

2=任意点击，触发Block的事件（UI）

3=等待GlobalEvent('TutorialClickEvnet', EventPath)触发

4=点击任意位置,可触发按钮功能

5=被引导功能发消息后完成当前步骤（其中对于一些可能会导致卡死的问题）

6=等待界面的某种状态改变

### 是否阻塞
+ 当某一个步骤配置为阻塞时，必须要完成对应的事件才能解除阻塞。

### 遮罩显示方式
+ 引导的步骤需要根据配置决定是否显示灰色遮罩，并且根据配置决定是什么时机显示灰色遮罩。

0=不显示灰色遮罩

1=步骤开始时显示灰色遮罩

2=找到事件对象之后显示灰色遮罩

### 触发事件
1=触发事件

2=不触发事件

3=等待特殊事件调用（代码）,且不触发事件

4=等待特殊事件调用（代码）,会触发事件

### 触发的功能控件，填写控件的具体路径						
UI_Path

Event_Path

+ 此功能控件上有相关的绑定事件，当触发了此事件时，判定为点击成功，引导才会执行到下一步。

### 等待时间
+ 当某些强制引导步骤中需要等待类似动效播放完成才显示下一个按钮时，可以填写一定的毫秒时间，当经过此时间的延迟之后，才会进入下一步。

### 异常处理
+ 特殊情况下，可能会出现异常情况，例如引导到抽卡，但是此时玩家未解锁渔场，但是引导强制去渔场。会导致以上进程会被卡死。
+ 针对以上情况，制作如下的异常处理流程：每一个引导的小步骤有一步检查异常的流程，分为异常条件和异常处理两个部分，当判定异常条件成立时，跳转到异常处理的部分，否则执行下一步。![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731641753866-f391f1c1-01c1-4124-9351-1889ff4d272a.png)

### 引导跳过功能
+ 需要支持两种形式的跳过引导功能
1. 玩家多次快速点击页面触发：如果引导配置了可以进行跳过，且玩家在引导页面连续进行了多次点击，则出现跳过引导的弹窗，玩家点击跳过引导的确认按钮则跳过当前的引导大步骤。
2. 玩家在一个页面等待一定时间之后触发：配置可以支持经过一定的时间后，在屏幕的右上角将会出现跳过此引导步骤的按钮，玩家点击跳过按钮之后将弹出确认弹窗，点击确认按钮之后，将跳过此大步骤
+ 上述两种跳过引导的功能仅限于跳过当前正在进行中的引导大步骤，不涉及到跳过整个引导步骤，后续有此需求再额外提需求。

## 页面预设型引导
+ 页面说明形式是将待引导说明的文本和图片做成一个整体的Prefab，并有上下翻页的功能，玩家可以自由选择上一页和下一页，关闭之后，判定为当前引导步骤通过。
+ 预设各自的功能根据自身的业务逻辑不同而有所区别。
+ 触发预设之后即视为此引导步骤结束。

## 新手引导测试									
+ 新手引导容易出现卡死的问题，策划在配置中配置了某一个按钮的绝对路径，相关的控件无法找到导致卡住引导。
+ 主要原因有以下两点：
1. 程序是使用动态生成的方式生成了名字不确定的控件，例如Button1，Button2等。
2. 程序在调整页面时，改动了按钮的层级。
+ 在启动游戏时，检测引导表中所有填写的路径是否能够找到，如果找不到的话，报错提示。
+ 使用新手引导的自动化测试。

# 配置表说明
[Guide.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43554293/1731643017683-f5b00cd2-f791-4c56-b793-25c079bc7d36.xlsm)

GuideSummary配置引导大步骤。

GuideStep配置小步骤，以及具体的引导形式、引导内容、显示位置等相关内容。

[Trigger.xlsm](https://snh48group.yuque.com/attachments/yuque/0/2024/xlsm/43554293/1731643023386-ac66bf26-f7ce-4e47-8a86-6b2bb6d68d38.xlsm)

trigger主要配置触发事件内容和对应的触发条件。

## 前后端需求
+ 根据具体的引导流程，规划引导所需的步骤，特殊功能需要单独提出需求。
+ 具体的trigger time ，condition，trigger event根据具体的流程需求单独提出需求。
+ 等具体确定后单独提出各需求。

# 引导形式
+ 选中框分为方形和原型两种样式，添加指引标，可以为箭头、手指等形式。若背景置黑，此是使存在引导框，引导框内不置黑。
+ 文字框设置单行最多字数，可上下扩展。文字框配合游戏主题进行包装。
+ 引导框、指引标、文字框，背景置黑之类的根据具体引导的步骤来决定拆分或组合使用。
+ 具体可以参照以下几种形式。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732180526196-45a90d0e-eb46-4155-91f9-2a8faf93b9ad.png)

+ 选中框选中具体UI（方形&圆形），箭头提示（位置上下左右斜对角），引导框+文字说明，背景置黑。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732161239508-bfbf00f8-114d-4d7c-acae-235f97aded46.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732161253910-cac93284-7583-451f-a28a-156ddb9caf7a.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732161268416-314dc8fe-0423-430c-a9a8-66db81f3c9fd.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732161302271-9e90f556-5838-4431-9abd-4281a7f7c64c.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732161315231-09a183aa-10f0-49fa-af1f-64b991ba33f5.png)

## 参考
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732154544882-f54dd528-6352-44ff-b79b-2891ef450470.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732154548064-362275fb-5212-4379-95d8-c7564be518e1.png)![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732154551688-d6ab16be-69db-4d1d-8d71-d14711c772d7.png)![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732162961278-d493cfe2-0ddc-4524-8f55-045a8885d047.png)![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732165850962-cc5bd8df-064d-49a9-a1fe-ff87a5427601.png)

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43554293/1732156897523-eb6b7804-13cf-4d6b-aeeb-df50df0d03ec.jpeg)

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43554293/1732156908029-5e9236a3-96e4-4a64-a817-5ba0341fbab2.jpeg)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732175727973-19d613ee-da9d-464a-b4ce-f47273e2cc7f.png)

# 流程说明
## 引导流程
![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731567543865-260162b7-164d-436b-9348-70fb1070f852.png)

+ 玩家创号后进入游戏，介绍渔场，引导玩家进入渔场进行捕鱼。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731568947914-edf09ed8-ea0b-4647-abf2-5fd1214d11f6.png)

+ 介绍玩家的本金，点击后介绍玩家当前的鱼炮和倍数，引导玩家点击进行捕鱼。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731568412070-b5f7a81f-83e1-4128-96fa-944b5bc6d99b.png)

+ 出现第一个BOSS时，引导玩家射击，设计为必能捕获，给与玩家boss奖励（此次倍数调低）。
+ 因为引导追踪鱼不好实现，这版本可以通过任务来引导玩家捕捉这个boss。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732167931687-0fdb6422-35d3-43a2-83dd-630a361d4dd2.png)

+ 引导玩家完成任务，领取奖励，奖励中包含强化石。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731571664935-bcab76c1-7e34-4e08-af3b-afafd21352c4.png)

+ 引导玩家进入鱼炮强化界面。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731572228405-f8707a76-b116-4c2c-a13d-df58ba642880.png)

+ 引导玩家使用获得的强化时进行鱼炮强化。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731572259228-e16e6287-084b-4fa1-983b-ddf275b0a427.png)

+ 强化完毕，引导返回渔场，引导玩家进行鱼炮倍数变更，并提示玩家可以使用自动射击。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731589238576-48c781ff-137c-4df1-8dc4-f40bd8eb48bc.png)

+ 完成任务后，一段时间没有领取，提供弱引导，引导玩家点击领取，任务中配置渔场道具。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731589401763-923ab6e8-ce54-44d2-8c31-8c7e62fcbec4.png)

+ 当获得了任意渔场道具后，会对该道具进行非强制引导，介绍该道具的作用。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731589974465-f9096114-2666-45e5-a3a7-37ad76c00879.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1731590001338-3e0561a0-f1f7-44b5-986d-57ab10f7b8a7.png)

+ 当满足了下一个渔场的解锁条件，引导玩家返回主界面，选择新解锁的渔场进入。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732163183058-1af39376-77de-4652-be07-be45a2a96d83.png)

+ 引导玩家可以切换房间。

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732163074751-5bc06cdc-7168-4603-8c4e-deb38b519df8.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43554293/1732163124391-c474c5f9-3eb1-47a3-bf76-9117513c838a.png)

+ 之后引导玩家查看图鉴，了解当前渔场分布的鱼和boss。
+ 其他一些偏重要的系统功能点进去之后提供一些引导。

若有收获，就点个赞吧

  
 

