## 进入场景
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724140577805-754f82a1-bd74-4a19-91dd-8aabce105ee1.png)

打开工程, 在上方菜单栏里依次RSTools=>打开场景=>13 美术测试场景, 点击之后进入测试场景

## 非运行情况下相关功能
### 非运行时创建鱼及其相关Tml
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725418211039-10ebb231-3ec1-485b-ba86-78ebc20b04fc.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725418225762-085cd2dc-8de8-41bd-8b14-15a4e36bd379.png)点击TestSceneFunctionCtrl节点, 图上右侧圈出部分为此功能操作区域. 

创建鱼的下拉选择框包含当前项目所有鱼的prefab. 

owner结点的下拉选择框可选择创建出来的tml使用的owner节点是渔场内生成的鱼还是一个固定结点(出场动画预计大部分使用渔场内生成的鱼, 死亡动画预计都是固定结点, tml轨道里控制相关单位动态生成)

点击生成则会在该节点下创建相关的prefab和Tml, 加载Main场景, 并绑定TimelineCtrl的Owner, 点击清空则会清除该节点下所有prefab.(Main场景内视频非运行时不会被播放, 故使用了一张贴图, 避免后面黑的影响效果)



### 非运行时鱼组动画编辑
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725248685493-1b18a2c7-f0c0-431e-981d-f2dc2fc07c58.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725248728368-8d71025c-7e13-4fa8-a555-0c1a2aaa93d9.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725248755856-1e335aed-28ff-416b-b83c-5fa84c28b0d8.png)

可选择生成鱼组内鱼的模型

鱼组内鱼的数量

鱼组使用的动画名字(生成时会自动替换鱼组动画编辑tml的展示动画轨道)

鱼组内鱼的坐标和模型动画延迟(坐标理论上应该会被动画控制, 这个只是设置在没有动画时的效果, 模型动画延迟方便预览鱼组内动画延迟效果)

生成时会生成TestSceneFishGroupEditor节点, 节点下为鱼组动画编辑的相关功能, TmlFishGroupAnimation为鱼组动画编辑使用的tml. 第一个动画轨道为录制轨道, 鱼组动画可以在这个轨道录制, 第三个动画轨道为实际使用动画, 第一个轨道录制完之后需要手动复制到第三个里面. <font style="color:#DF2A3F;">整个过程可以是先创建AnimationClip, 在生成鱼组动画编辑的prefab时输入创建的AnimationClip名字(或者先生成出来, 再手动把使用的AnimationClip拖进来), 再把原动画内的复制到录制轨道进行修改, 改完之后再复制回原AnimationClip保存.</font> FishMovePointToPoint轨道可用来简单地看鱼组游动效果(从起点朝终点以一个配置速度游动). 其他idle轨道是控制鱼的模型动画的, 程序会自动生成赋值, 可以不管.



## 运行情况下相关功能
### 生成玩家相关数据
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724206332612-357640a6-399c-4632-8a5f-6fef06f32c42.png)

点击GameEntry节点, FeatureEntryData脚本里可配置: 

玩家金币数量, 钻石数量(暂时没有明确需求, 避免显示问题)

鱼炮等级(可在游戏里调整相关倍率)

渔场id(可修改玩家进入的渔场)

鱼生成的随机种子(主要用于某些情况下鱼生成异常的复现排查)

是否自动生成鱼(客户端鱼是否按照策划配置自动生成)

### 切换炮台功能
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724206584171-2e64ef09-a1d6-4640-a270-3b1d30505b54.png)

点击TestSceneFunction节点, 图上右侧红圈区域可选择当前项目已有的炮台资源, 选中需要切换的资源, 点击切换炮台即可更换相关效果.

### 必定捕获功能
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724206632892-26afecdc-8975-4f9f-8668-2264bf5f5368.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724142251295-da58cb90-b1e8-4d4f-b437-b9b84e610b0b.png)

点击TestSceneFunction节点, 图上右侧红圈区域可选择是否开启此功能, 开启此功能后玩家发射子弹必定会捕获对应的鱼.

### 效果隐藏功能
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724206664932-209b568d-a794-4ea8-9fe0-ad70a91f6c47.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724206695489-90c88fd1-c788-42d9-a113-015c71a554b0.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724142736142-b4e31c58-865e-4909-bc9e-8395814c90f2.png)

点击TestSceneFunction节点, 图上右侧红圈区域可选择特效隐藏等级, 点击之后直接设置. 当前共分为4级:

1. 所有特效都显示
2. 屏蔽UI上的效果(当前包括跳字和彩牌)
3. 屏蔽UI效果和效果比较花的特效(比如金币爆开的那个效果)
4. 屏蔽所有效果
5. 关闭界面UI及屏蔽所有效果

### 生成渔场内配置鱼(生成鱼的效果同正式游戏完全一致)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724813103368-b088487e-7c56-4e4f-b62e-adfc2bffcba3.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724813167953-273f816b-62b1-4547-8c52-1466ec7386fe.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724813217973-0648c9bd-e272-4cf5-99d9-c88ab460fd8f.png)

点击TestSceneFunction节点, 图上右侧红圈区域可配置信息: 

生成鱼种类数量(依据此项生成n个下列配置)

生成鱼(信息会显示渔场内鱼的id, prefab名字, 策划配置的鱼的名称)

生成数量

是否以鱼组形式生成

鱼组内每组鱼数量(会影响可选择的鱼组id)

使用的鱼组id(这个可能需要查看策划配置, 不同数量对应的鱼组样式也不一样)

是否需要自定义位置

自定义位置(以高度为0时作为基准).

<font style="color:#DF2A3F;">注意: 存在因为渔场id导致的部分鱼不存在于下拉选择框内的情况, 需要确认正确的渔场id.</font>

### 不走配置生成特定鱼(主要用于策划还没配置时查看效果或调试效果以及鱼组配置)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724896635574-34a669e5-0c02-4773-8168-4fd55be126a8.png)

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724896899343-d7aa463a-3231-45b0-bd31-760ed2a22d71.png)

点击TestSceneFunction节点, 图上右侧红圈区域可配置信息:

生成鱼种类数量(依据此项生成n个下列配置)

生成鱼(只展示prefab名字, 考虑功能需求, 此时可能没有相关配置)

生成数量

是否以鱼组形式生成

是否是自定义鱼组(可用于鱼组功能配置, 可生成配置示例并在场景中调整鱼的位置, 数值会同步给脚本展示)

鱼组内每组鱼数量(会影响可选择的鱼组id)

鱼组动画(部分鱼组可能存在特殊动画表现得更加灵活, 可走这个配置查看效果)

鱼组内n号鱼X坐标, Z坐标, 动画延迟(具体鱼组内鱼的配置, 动画延迟以生成延迟方式实现)

使用的鱼组id(这个可能需要查看策划配置, 不同数量对应的鱼组样式也不一样)

是否需要自定义位置

自定义位置(以高度为0时作为基准).

设置鱼的大小(在场景里调脚本也会自动变化, 觉得合适之后需要点击应用到prefab按钮, 否则不会保存下来)

鱼的X偏转(表现为上下侧身, 使用时需要注意透视相机下各个位置的效果可能出现差异)

鱼的Z偏转(表现为左右侧身)

鱼的速度

鱼的种类(可能会影响部分效果)

鱼的鱼分(只涉及显示效果, 不影响相关逻辑)

<font style="color:#DF2A3F;">注意: 此方式生成鱼部分配置依旧存在缺失, 技能相关配置可能并不完善, 只适合查看或调试移动效果之类的简单行为.</font>

### AI炮台攻击开关
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724207786887-128f5274-c7dd-44e8-b029-fdb5a179cf10.png)

点击TestSceneFunction节点, 图上右侧红圈区域可开关AI攻击(默认为关)

### 鱼群轨迹功能(贝塞尔曲线版)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724663740063-b5319841-0503-4aca-9729-266669866c61.png)

点击TestSceneFunction节点, 图上右侧红圈区域可配置信息:

生成鱼种类数量(依据此项生成n个下列配置)

生成鱼(只展示prefab名字, 考虑功能需求, 此时可能没有相关配置)

生成数量或生成的鱼组内鱼的数量

是否以鱼组形式生成

使用的鱼组id(这个可能需要查看策划配置, 不同数量对应的鱼组样式也不一样)

鱼的速度

鱼的种类(可能会影响部分效果, 暂时不需要)

生成鱼的轨迹(这里为贝塞尔曲线)

当前程序实现贝塞尔曲线随机轨迹为: 

开始点x<-168或>168, y固定为0, z固定为0, 通过偏移量处理z轴随机偏移, 随机范围为(0 - 偏移量, 0 + 偏移量).

中间点, x, y, z恒为0, 通过X轴偏移量处理中间点范围随机, 随机范围为(0 - X轴偏移量, 0 + X轴偏移量), 通过z轴起偏量和最大偏量处理高度随机, 随机范围为上方的鱼(起偏量, 最大偏量), 下方的鱼(0 - 最大偏量, 0 - 起偏量).

结束点x<-200或>200, y固定为0, z固定为0, 通过偏移量处理z轴随机偏移, 随机范围为(0 - 偏移量, 0 + 偏移量).

配置结束后可绘制轨迹查看效果(也可勾选自动绘制(大概率会掉帧)), 上方的鱼会在上方绿圈最里面到红圈最外面的区域内走一条轨迹, 下方的鱼则是下方绿圈最里面到蓝圈最外面走一条轨迹. 

可通过生成按钮生成鱼查看效果.

### 鱼群轨迹功能(四面八方向中间游)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1724665116162-bcceeb0d-acc9-4193-ab45-88f135e1fb85.png)

点击TestSceneFunction节点, 图上右侧红圈区域可配置信息:

生成鱼种类数量(依据此项生成n个下列配置)

生成鱼(只展示prefab名字, 考虑功能需求, 此时可能没有相关配置)

生成数量或生成的鱼组内鱼的数量

是否以鱼组形式生成

使用的鱼组id(这个可能需要查看策划配置, 不同数量对应的鱼组样式也不一样)

鱼的速度

鱼的种类(可能会影响部分效果, 暂时不需要)

生成鱼的轨迹(这里为四面八方向中心游)

自定义生成点(可自定义选择鱼的生成点, 不勾选默认走游戏内随机效果)

自定义角度(可自定义生成鱼的朝向, 不勾选默认走游戏内当前随机效果)

