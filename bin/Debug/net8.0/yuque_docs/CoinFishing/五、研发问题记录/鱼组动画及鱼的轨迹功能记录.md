## 调研结论: 
参考捕鱼大作战实现, 总体鱼的动画效果细分为单个鱼和鱼组. 

### 单个鱼形式: 
#### 变速效果. 例如下图的鱼有明显加速效果.
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725533245408-6409b5f8-c3f8-4390-8f7a-c2f9496f8ccc.png)

做法考虑: 变速效果可以考虑作为鱼的移动技能, 发动时改变鱼的速度以及加速鱼的动画或者变更鱼的动画(视具体效果决定做法)

#### 规律型变速. 例如下图乌龟规律性的随动画一快一慢.
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725538703907-8fccb075-87ad-4877-8f84-7fa5c8fb2f3f.png)

做法考虑: 可以使用鱼的动画形式做出快慢差异.

### 鱼组形式:
#### 齐整鱼组效果(4组)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725539304800-6518fc7c-4f75-4278-860c-eadc94d36dc3.png)

做法考虑: 当前已实现对应效果(统一鱼组, 动画做偏差)

#### 沿轨迹轻微的偏转效果(2组)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725540539087-f57bae08-d526-4a4a-bd14-e504bf0f805b.png)

诸如此类只有简单的鱼组内某几条鱼换位, 不会存在明确的旋转和动画同步.

做法考虑: 

    1. 程序脚本实现: 此类动画只有简单的鱼组沿基础轨迹摆动的效果, 可以考虑通过程序脚本快速实现. 相对而言复杂的功能则需要开发对应的脚本功能, 且随着功能增加, 相应制作和维护动画的难度也会上升, 故只推荐使用此方式实现简单的鱼组动画.
    2. Animator方式制作: 此类动画本身并不复杂, 大概会有8个左右的关键帧, 制作和维护的难度并未高到难以预估.

#### 复杂鱼组动画(7组)
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1725588765227-a2be3113-ad3b-4d5d-b414-d3c50f19ed0e.png)

做法考虑:

    1. Animator方式制作: 此类动画效果相对复杂, 程序脚本无法做到相对明确的实现, 只能考虑此方法.

## **鱼组形式鱼的动画总结:**
1. 捕鱼大作战相对于我们的实现有一个根本区别: 它们的鱼组轨迹, 甚至所有鱼的轨迹都是定死的. 例如参考视频里0秒从右边出来的海马与1分08秒, 2分16秒, 3分45秒从右边出来的海马轨迹完全一致. 猜测实现方式是每条鱼或者每个鱼组都绘制了一些固定轨迹, 鱼是固定间隔时间生成, 但是使用的轨迹是固定轨迹中的随机一条. 考虑这种做法, 我认为他们并没有明确的轨迹和鱼的动画概念区分, 对他们而言程序针对鱼的控制可能只存在生成鱼, 从固定轨迹里随机一条. 鱼的轨迹, 动画效果实际上都是固定.
2. 捕鱼大作战里鱼的Idle动画存在多个, 以适配不同的鱼的动画效果. 例如有翅膀的鱼很明显在某个鱼组动画下翅膀张开时间会比其他情况下的要长. 

## **考虑以上结果, 推荐方案:**
1. 推翻现有逻辑, 修改为每个鱼或者鱼组都走一条tml, tml里实现轨道编辑需求及鱼组动画需求. 程序生成鱼时随机走配置的tml中的一条. (编辑轨道+编辑动画, 工作量会很大, 但可以保证最终可实现效果满足任何期望, 包括动画适配, 灵活旋转, 动画加速或切换, 轨道明确可视可编辑)
2. 基于现在的做法, 保持轨迹由程序生成, 鱼组动画在只考虑鱼组自身情况下编辑实现(实现方式可以考虑使用程序脚本制作简单效果). 之前美术提出的鱼速度改变导致鱼组动画重做的问题, 此次调研确认了同种类型的鱼的速度会存在差异, 比如A鱼在单个游时速度是10, 在某个鱼组内游时是20, 在其他鱼组内又是15. 故速度配置改变导致的鱼组动画维护问题可以视为不存在, 鱼组内鱼的速度走独立配置. 但同样鱼组内速度增加会导致其与鱼组内单个鱼模型动画的动作值无法匹配, 可以考虑制作每条鱼的动画时给出一个基准速度, 程序依据基准速度制作动画加速. 如果后续存在速度与预期偏差过大导致的动画加速出现明显的效果损失, 可考虑重新制作模型动画.(编辑鱼组动画, 相比于第一种工作量会少一点, 但是鱼组内的动画难以匹配鱼的模型动画, 比如鱼组内存在一个急旋转, 但鱼模型没有对应匹配的动画或者没办法去匹配鱼模型里的该动画, 如果存在此需求可考虑改用tml的方式控制鱼组)
3. 基于现在的做法, 将鱼组视为一条单个的鱼输出, 模型, 动画本身都制作完之后输出到unity内, 程序针对这种鱼做特殊处理. (程序上改动会比较多, 但理论上可以实现, 动画和鱼组内的轨迹也能匹配上, 不过后续没办法简单地维护鱼组形式, 现有的鱼组设计可能也都没办法再使用, 同时游戏内不可复用的资源数量会增加)
4. 基于现在的做法, 鱼组修改为新增一种独立轨迹, 鱼组内动画程序通过算法控制(例如: Boid算法, 或尝试其他算法). (工作量只在程序这边, 后续美术不再考虑相关的鱼组动画编辑问题, 也无法提出相关需求. 但是实现效果不可控, 最终游戏内展现效果也存在不确定性, 其方案本身可行性还需要尝试)

![](https://cdn.nlark.com/yuque/0/2024/gif/43288772/1725605382095-866ea41c-3659-4ff8-893a-16eebfbfc435.gif)



