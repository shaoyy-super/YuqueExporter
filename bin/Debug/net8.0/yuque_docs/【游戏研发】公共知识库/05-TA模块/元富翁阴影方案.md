## 大致思路：
中远景烘焙 + 近景（棋盘）实时

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724908463548-1d598a8a-b598-42db-8216-a0a5da0339c9.png)



## 具体设置：
### 中远景建筑 & 烘焙设置：
待烘焙建筑Static勾选 Contribute GI

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724908679700-56c43dd2-d632-4248-a2cd-02cc8f19b8f1.png)

优化项：远景建筑改成Unlit



平行光 Light Mode: Mixed

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724908640814-1b340259-137d-4113-a9de-25b8238510dd.png)

Window - Rendering - Lighting - Scene - Lighting Mode: ShadowMask 烘焙间接光和Shadowmap

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724909044071-8ba44474-ce1c-4b93-8b21-2e1934fb427c.png)

Edit - Project Settings - Quality - Shadowmask Mode: ShadowMask 默认Distance ShadowMask会根据距离切换实时阴影与烘焙阴影，我们不需要实时切换，使用shadowmask即可

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724909006115-bc7c2f91-c984-4a81-a63e-a003b6729986.png)



上述设置完成后调整参数烘焙即可



#### 现存问题：
1. 烘焙光照与实时光照效果不统一，或者说差别有点过大了

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724909333100-592a9ee6-6064-4cd1-9bf9-63cde5e5c984.png)

2. FASceneObject不支持烘焙阴影
3. FASceneObject在URP阴影范围外时有错误的阴影表现

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724909993315-d01b32e5-ae43-4e7d-b70c-530701a52e6b.png)



## 近景建筑（实时阴影）设置：
已知：近景建筑有升级机制，无法使用烘焙；游戏内视角可在一定范围内移动，且有抬升至近俯视角的机制

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724910165646-29621223-ebf1-45df-8aa3-d9a18d5e3297.png)![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724910210436-c565cbad-bc07-4b4b-b67e-1aa597831cc9.png)

方法：根据摄像机Y轴高度&与距离棋盘中心的距离动态调整Shadow Distance



#### 现存问题：
无法兼顾阴影范围与阴影精度

![](https://cdn.nlark.com/yuque/0/2024/png/45354151/1724911004231-34b72a2a-7ca1-47dd-9ee0-abad5216d5d0.png)

eg. Shadow Distance为15时，远处黄框建筑处在是否投影的交界处，但近处红框内的阴影精度已经明显不足了

（做软阴影？）

