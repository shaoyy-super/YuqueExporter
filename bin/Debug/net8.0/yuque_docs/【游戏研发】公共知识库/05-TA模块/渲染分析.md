## 前言
该技术方便美术解析游戏中特殊效果所用到的资源，便于美术反推效果的实现，适用于建模、UI、特效同学。

适用于PC游戏，模拟器如有需求，提给TA。

## 软件
下载路径：`\\192.168.0.231\AI及Web3游戏研发中心\公共资源\04_软件\TA工具\gpa_24.3.1725959380.msi`

## 步骤
### 截帧
打开Graphics Monitor，选择对应游戏的启动文件，然后点击 Run Application，启动游戏。

![](./assets/image-20250120182911622.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369419175-3bdb219e-66f5-48b1-a59e-a3a4012f933f.png)

找到当前要分析的画面，快捷键Ctrl+Shift+C，截取当前画面。

如果手动截取失败，按下面步骤点击。

![](./assets/image-20250120174936741.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369426278-247c1155-10b0-40ea-a550-024c55b77cce.png)

截取成功后，游戏会卡一下，正上方有提示：

![](./assets/image-20250120175022290.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369431951-1498b19a-b4fb-4664-8493-5e8ee4625a58.png)

返回软件查看截取记录：

![](./assets/image-20250120175053023.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369441161-d6106717-18ed-4ecb-bb4f-7464f9c9066c.png)

选择一个截取记录，双击打开。

### 分析
点击上方轨道，查看当前时序渲染画面，对应的左边API Log。

![](./assets/image-20250120175410533.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369447410-1d7ad1fe-6bae-4f3c-9679-e0409f6ca7cf.png)

画面的紫色区域就是当前时序在渲染的物体，如果没有出现该画面，选择右侧Output栏，找到输出画面。（如果Output栏中没有，或者画面全是紫色，则在上一步中，换个时序选择）

如果渲染的紫色区域，不是想要分析的物体，则换个时序，挨个排查，直到找到想要查看的渲染物体。

![](./assets/image-20250120183157993.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369453356-25d42426-1705-432a-abe1-196115032a84.png)

Input中包含了当前时序渲染用到的模型、贴图信息、输入数据，通过点击input不同的物体，进行查看。

![](./assets/image-20250120180515039.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369460082-191ab0f8-1284-4d5d-b4c9-779afee04b5f.png)

### 导出
点击右侧的导出按钮，将模型或贴图进行导出。注意，贴图存在多种导出格式，要进行人工判断，是否是Srgb、是否有A通道等。

![](./assets/image-20250120180652500.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369466000-6087d87a-f0fd-42e2-9ed4-bc2a4b26e40e.png)

> **<font style="color:#DF2A3F;">导出的资源，不要直接用于工程，律师函警告。</font>**
>

### 快速定位时序
当我们想快速定位到一个渲染物体时，除了一个一个点击轨道，还可以通过精确定位方式查找。

例如当前画面下，我们想要定位到鞋子粉色部分，则可以鼠标直接点击鞋子，左侧会列出当前点击像素的历史渲染过程。很明显，粉色的时序就是了。

![](./assets/image-20250120181409330.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369472481-5e7e826d-d7a9-4cab-8c0e-0d5050fa3c2d.png)

有时候，点击后，左侧没有显示历史帧，或是显示错误。这时候，点击API Log返回，然后在上方轨迹中重新选择一个时序，再重新执行上述操作。

![](./assets/image-20250120181712648.png)![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737369477364-6785fc2d-7fe4-4158-ae11-2b1d5bfe52a7.png)

> 为什么会出现点击后，无法定位到的情况。因为渲染划分多个环节，例如渲染不透明物体环节，透明物体环节，UI环节，每个环节会把上一个环节的结果（一张输出图）拿来继续使用，所以能看到不属于该环节的物体。如果想查找的物体正巧不在该环节，则需要重新定位一个环节，然后再进行精准定位。
>

## 更多文档
[英特尔Graphics Performance Analyzers（GPA）抓帧](https://snh48group.yuque.com/org-wiki-snh48group-ec9yge/wxfe39/plxl5ntle00kchft)

