## <font style="color:rgb(31, 9, 9);">前言</font>
<font style="color:rgb(31, 9, 9);">指定该方案的初衷，是在不同的场景中，相同角色存在不同的亮度表现，阴影亮度不同，后处理辉光设定参数过高等问题。使用该标准，可以保证物体材质产出的统一，出现画面问题，可以快速定位是场景、灯光、环境，还是后处理导致的。</font>

## <font style="color:rgb(31, 9, 9);">使用方法</font>
<font style="color:rgb(31, 9, 9);">针对不同的工种，有两种使用方式。</font>

### <font style="color:rgb(31, 9, 9);">物件</font>
<font style="color:rgb(31, 9, 9);">路径 </font>`<font style="color:rgb(31, 9, 9);background-color:rgb(218, 218, 218);">Assets/Art/Renderer/Calibration/Scene/None</font>`<font style="color:rgb(31, 9, 9);"> 下放有高中低三种不同光比的场景，选其一放进去调整物体的材质表现到最优即可，除了灯光方向外，不能调整任何其他参数，包括后处理，更不能增加灯光与其他后处理。如有额外灯光需求，提给TA，单独做个校准场景。另外，场景自带的Bloom后处理可以开启，但不能调整参数，用于校验自发光材质的画面表现。</font>

<font style="color:rgb(31, 9, 9);">三种不同光比，区别在于暗部光照效果不同。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109856669-ac71aa8b-562c-4433-bb68-618533e5ec36.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109862783-bc16d01e-171b-4d60-951e-40be16bcb5fc.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109870000-fd6ceb32-5bc1-412a-86d7-3862e716ccfa.png)

### <font style="color:rgb(31, 9, 9);">场景</font>
<font style="color:rgb(31, 9, 9);">校准顺序按文章顺序执行，顺序错误的校准是徒劳。</font>

#### <font style="color:rgb(31, 9, 9);">清除干扰元素</font>
<font style="color:rgb(31, 9, 9);">首先，需要清理当前制作场景中影响颜色校准的元素。首先，打开</font>`<font style="color:rgb(31, 9, 9);background-color:rgb(218, 218, 218);">Window->Rendering->Light Explorer</font>`<font style="color:rgb(31, 9, 9);">，检查关闭场景中的所有灯光，只保留一盏主光源（一般情况下，该光源为影响角色的光源，且是平行光）。再就是关闭场景中的所有后处理，通过在 Hierarchy 中输入 </font>`<font style="color:rgb(31, 9, 9);background-color:rgb(218, 218, 218);">t:Volume</font>`<font style="color:rgb(31, 9, 9);"> 进行查找。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109879600-239e3708-3721-4ae2-b90f-88c2a7b094f8.png)

#### <font style="color:rgb(31, 9, 9);">校准预制体</font>
<font style="color:rgb(31, 9, 9);">在工程路径下，有一个预制体</font>`<font style="color:rgb(31, 9, 9);background-color:rgb(218, 218, 218);">Assets/Art/Renderer/Calibration/Prefabs/ColorCalinrator.prefab</font>`<font style="color:rgb(31, 9, 9);">，将其拖放到当前正在制作的场景中。设置好灯光渲染Layer，确保能接收到光照。</font>

<font style="color:rgb(31, 9, 9);">预制体上有个脚本，把灯光拖入到 Lit中，这时候预制体会自动旋转朝向灯光。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109885854-e15a69e9-004d-4035-a3ca-8221dcdcec48.png)

#### <font style="color:rgb(31, 9, 9);">暗部校准</font>
<font style="color:rgb(31, 9, 9);">首先，我们看到最右边的方块，中间的黑色区域是暗部区域，周围是0.47的中灰颜色。通过该模块来确定光比（最亮部分与最暗部分的亮度差）。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109895409-6af33b65-3e79-4992-8d5e-4fc7e2a91b5e.png)

<font style="color:rgb(31, 9, 9);">我们需要调整环境光来让中间的黑色区域达到一个阈值，该阈值定义了场景中的物件暗部亮度。最简单的调整方式，可以通过将 Lighting 窗口中的 Environment Lighting 改成 Color Model，然后调整颜色亮度即可。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109901913-1ff4bd5e-fddf-404f-9286-dae2dcff75f6.png)

<font style="color:rgb(31, 9, 9);">更直观的方式，是观察中间颜色方块的背部区域。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109912040-7b8c86af-8fd4-46d6-87f9-9eb5e1d9be0f.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109928810-f2603e60-1e11-4ba4-bc44-d55639b65a05.png)

<font style="color:rgb(31, 9, 9);">暗部亮度确定后，接下来就是改善偏色。不同的场景，环境光多少都带有一点颜色。下图做参考，由于氛围光的存在，第二张图角色明显偏紫，其中的紫色就是由环境光传递的。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109940987-e84c8527-193e-4d12-8ee1-6c67f11509d2.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109953394-71b1d1b7-f50b-430c-8685-a08721c52389.png)

<font style="color:rgb(31, 9, 9);">在为环境光设置颜色时，要考量两个方面。一是考虑光线的合理性，不能一个粉色的房间，环境光为蓝色，这样子物件在场景中就会十分怪异。二是颜色饱和度不能过高，环境光偏色太强，会覆盖物体原来的颜色，一般情况下给一点点颜色就可以了。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109955953-aca990b2-c6e9-474f-9b1d-020a5c0c722e.png)

<font style="color:rgb(31, 9, 9);">预制体右侧有灰度色卡，可以方便我们观察偏色情况。中间的两张红色为实时渲染，两旁蓝色为对照组，不受光照影响。</font>

#### <font style="color:rgb(31, 9, 9);">进阶的环境校准</font>
<font style="color:rgb(31, 9, 9);">上面通过单色的方式来校准环境光，优点是快速直接，缺点是丢失细节。一个物体接收到的环境光是从四面八方打过来的，不同的方向，所传递的颜色也各不一样，正是这些细节决定了画面的品质。</font>

**<font style="color:rgb(31, 9, 9);">Skybox</font>**

<font style="color:rgb(31, 9, 9);">我们可以通过选定为SkyBox来进一步提升细节，这时候我们无法直接指定环境光的颜色，如果要设定，只能通过修改环境光贴图的方式实现。但环境光的亮度依旧是可以修改的，通过拉动Intensity Multiplier来调整环境光的强度，也能达到校准暗部亮度的目的。</font>

<font style="color:rgb(31, 9, 9);">正对于室内烘培场景，有一个方法简单实用。在场景中摆放一个反射探针，将其Bakery为 Cubemap 后，创建一个</font>`<font style="color:rgb(31, 9, 9);background-color:rgb(218, 218, 218);">Skybox\Cubamap</font>`<font style="color:rgb(31, 9, 9);"> 材质球，将贴图赋予材质球，然后将材质球赋予给环境光的SkyboxMaterial。通过该方式计算出来的环境光，基本上是准确可用的。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109969551-72dba651-390e-4762-8d40-699d008944ef.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109974171-2cf6d2e2-69f4-489f-bdaa-cbe3e218389f.png)

**<font style="color:rgb(31, 9, 9);">Gradient</font>**

<font style="color:rgb(31, 9, 9);">前面设置环境光是通过指定单一Color来设定的，我们可以通过选择为Gradient来将单一颜色扩展为三个方向。分别对应了天光，墙体\周围环境反射光，地面反射光。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109984188-fbb90f3f-c91b-4beb-9809-b92852f214dd.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737109991638-d6bd7922-ae90-49e5-a2f8-c9048a9be36f.png)

#### <font style="color:rgb(31, 9, 9);">亮部校准</font>
<font style="color:rgb(31, 9, 9);">亮部校准，通过调节直接光强度来进行修改。</font>

<font style="color:rgb(31, 9, 9);">严格的校准方式是找个颜色条，吸取屏幕颜色来进行校准。通过拾取周围的中灰区域来调整光照，确保中灰区域的亮度值为0.47；RGB能精确到(119,119,119)时则没有偏色、光照强度也正确。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110000591-be988432-025a-42ab-92c3-ed9808ac0dc5.png)

<font style="color:rgb(31, 9, 9);">快速校准方式，是直接观察灰度色卡，如果色阶丢失则是过曝，需要降低光照亮度。灰度不对等则是欠曝，需要提高亮度。</font>

<font style="color:rgb(31, 9, 9);">色阶丢失、过曝：</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110007990-6d7701ec-2ec2-4a36-b107-511324038660.png)

<font style="color:rgb(31, 9, 9);">灰度不对等、欠曝：</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110013144-a0891d3d-8e4a-41d7-ab0e-5e7d1b9d021a.png)

#### <font style="color:rgb(31, 9, 9);">艺术调整</font>
<font style="color:rgb(31, 9, 9);">完成以上流程，光照校准则才算是完成。接下来就是开启额外光源与后处理了，这些操作肯定会打乱前面的校准的光照，属于风格化调整，与颜色校准无关。这里只讲一下额外光源与后处理相关事项。</font>

<font style="color:rgb(31, 9, 9);">额外光源的标准，就是保证主光源与额外光源都开启的情况下，灰度色卡不会出现过曝现象（需要多次调整色卡朝向进行尝试）。出现过曝现象，则根据具体画面表现来判断是压低主光源，还是压低额外光源。PS：画面需求优先，如果画面需求就是要让物体过曝，则忽略这条标准。</font>

<font style="color:rgb(31, 9, 9);">后处理相关设定：</font>

<font style="color:rgb(31, 9, 9);">Bloom只能使用默认参数，另外阈值要从0.9改为1，如果使用0.9则校准的参考色卡都会出现色阶丢失的情况。（Bloom对特效影响特别大，搞不好特效就得从头来过）</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110022159-ef0b1171-5b23-441d-885d-0bcd9f4d7f80.png)

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110031320-a5bcfeac-06a9-495f-bbb3-66a928c5736b.png)

<font style="color:rgb(31, 9, 9);">其他后处理，例如曝光、Lut、对比度等，遵循一个原则，通过颜色条拾取参考色卡的屏幕颜色，参数差距在5以内都能接受，需要采样三次色卡：最亮与最暗减一级，中间灰度。如果差距较大的话，影响的就不仅仅是场景与物件了，特效以及其他美术工种都会受到影响。</font>

![](https://cdn.nlark.com/yuque/0/2025/png/51643373/1737110038641-5ef628be-00f1-49c6-b4f0-4181f2b76090.png)

## <font style="color:rgb(31, 9, 9);">方案搭建原理</font>
<font style="color:rgb(31, 9, 9);">参考：</font>[<font style="color:rgb(31, 9, 9);">关于建立资产统一审查预览环境的一些说明 - Unreal Engine</font>](https://www.unrealengine.com/zh-CN/tech-blog/a-few-tips-for-building-unified-assets-reviewing-enviroment)

<font style="color:rgb(31, 9, 9);">核心技术是通过环境光来调整背光面、阴影区域的亮度值，通过调整主光源强度，来控制面光区域的亮度值。由于直接使用白色，出现过曝现象无法检测出来，所以采用了(119,119,119)这个中灰度来作为校验值。该采用该值是考虑到显示器成色补偿。</font>

<font style="color:rgb(31, 9, 9);">创建一个Lit材质，使用(119,119,119)作为颜色值，光滑度金属度降为最低。</font>

<font style="color:rgb(31, 9, 9);">拟定一套光比，如1/4，定义亮光面是(119,119,119)，则背光面颜色值应该为(119,119,119)/4，然后调节环境光强度，同时用颜色吸管去检查颜色值，直到背光面的颜色值为(119,119,119)/4。先调节背光是因为，环境光也会影响亮光面，所以先校准背光。接下来用相同方式调整主光源强度，直到亮光面颜色为(119,119,119)。</font>

<font style="color:rgb(31, 9, 9);">通过上述方式，就能确定任何物体丢到场景中，不会出现过曝与欠曝现象，所呈现的颜色亮度也是标准的。</font>

