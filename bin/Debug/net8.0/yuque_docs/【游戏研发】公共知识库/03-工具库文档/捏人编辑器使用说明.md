## 一.设置基本数据
点击工具栏Customize/BodyDataEditWindow打开编辑窗口

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718888398543-ed1c1adb-9760-4408-a957-4167764213c8.png)



如下，需要设置两个基本项后，可以看到完整的编辑器界面：

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718888428806-d3742486-c343-4233-ae57-238625fdbed5.png)

标准模型：模板模型的预制体（非FBX），概念上可以理解为男模，女模等，一个合格的标准模型有以下的最低要求：

1.具有如图两个节点的命名和层次

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718888761111-0cd66328-01c8-449a-acaf-6a618112218c.png)

2.Model节点上需要有动画组件，同时需要有人形Avatar

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718888809712-a6551e90-f9a8-47ba-a999-b5ba7859eb0f.png)

数据对象：如图的资产文件

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718888919112-9e1f9c87-9dae-413a-b634-543e50380a6f.png)



## 二.窗口概览
如图：

区域1：模板模型和编辑数据对象，一旦选好后，不可更改，除非关闭窗口再打开

区域2：捏人部位，预设了23个部位，同时支持自定义添加新的部位。腿长和腹长作为身高坐高等部位的依赖，会被其他部位使用，不会直接交由用户调整。最下方有预览滑条，滑动后即可在场景中心点预览调整效果。

区域3：模板模型的所有骨骼，注意这里是自行绘制的TreeView，仅用于拖拽至骨骼名输入栏，代替字符串输入，不具备重命名，多选，改变层级等功能。

区域4：该区域分区域2中选中部位的数据列表，为上下两部分，<font style="background-color:#FBDE28;">上半部分是基本的修改数据，所有部位都具有</font>。下半部分是当前选中部位特有的数据。

区域5：显示内容和区域4的选中对象有关。

区域6：显示内容和区域5的选中对象有关。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718889198268-6fe704b1-e3f2-486e-91bb-1cb955c0ebc6.png)



## 三.基本的骨骼修改数据
基本的骨骼修改数据有以下两种，满足大多数部位的配置需求，以及自定义的新加部位。

### 1.Transform多帧修改
与unity的动画clip类似，支持配置多个骨骼节点的transform多个关键帧，根据滑条值在两个关键帧之间插值得出该部位对某骨骼的影响。

以”大臂粗细“为例，比如你想在调节大臂粗细的时候，双手的中指会跟着变化大小：

在区域2选中修改的部位

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718936616330-1172bd22-94b9-4d1f-ac6f-fc0a58e38583.png)

点击“添加Transform数据”按钮，生成一条数据

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718937102651-51e1bc88-d7de-46a2-8b51-58d3fea889e6.png)

选中任意一只手的中指骨骼节点，拖拽进蓝色输入框

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718937338900-d3da81f3-85c3-47af-948a-e319fb71b41d.png)

打开使用对称骨骼，当骨骼名字中有" R "或者"R_"时，会自动的为对应的L命名骨骼应用相同的帧，反之亦然

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718937372192-73e3bb75-ca9b-4af8-86ce-80060074038c.png)

在Mask里勾选要修改的分量，比如缩放的x和z分量，右侧会出现的修改项

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718937535739-5ac2fcf5-3dd2-478a-8204-a6b520f66519.png)

这里是关键帧列表，最多10帧，从0-1，对应该部位的滑条值，point0和point1为必需帧，point0.5是隐式存在的，point0.5的所有分量修改量都是0，如滑条值0.25时，将会在point0和point0.5之前线性插值确定修改量。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718937690818-8cec48d2-9531-4ad8-89f9-d1a754072757.png)

有时point0，1两个关键帧不满足使用，可以插入设定的帧，如下，现在滑条0.25时，会在point0.2和point0.5之间线性插值取变化量

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718938212292-fde72ed0-34b0-4c25-8b30-0345b2ac4120.png)

如下，在point1处，设顶该骨骼的两个轴的缩放值增加0.8，即从1.0变长1.8

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718938332427-646f1641-4014-4a19-ad20-8bd4fa6b1f0d.png)

无需启动游戏，滑动窗口左下角滑条，即可在场景中心位置，看到模型的形变效果。如下图，滑条值是0.75，那么就是在point0.5和point1之间插值，由于point0.5是隐式的全0，point1是0.8，所以插值结果是0.4，由于没有别的部位修改中指，所以双手中指的缩放值被修改为了1.4。旋转和位移是同样的规则。![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718942566208-c48eab3d-38b9-486a-80c6-14b09f378b07.png)



### 2.单骨骼长度修改
有些时候，希望骨骼沿着原来的方向变长或者缩短。这种情况使用上面的Transform多帧修改很难做到精确，且配置复杂。

以肩宽为例，点击"添加骨骼长度调整数据"即可创建一条骨骼长度修改数据，将肩膀骨骼的起点和终点拖入，并设置最大的减短量和增长量，单位为厘米。

如图骨骼长度增加了15厘米:

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718946595049-36da83ba-1ef3-4428-aaca-0441e61dd3db.png)



## 四.多段骨骼长度修改工具
### 1.直线骨骼组长度修改
如下图，算上大腿根节点和膝盖，大腿上一共有六个节点，组成了5个区间。可以看到右侧5个数字，代表了这个直线变长或者变短时，其中对应区间的变化权重。

如图右边数字权重配置，大腿长度变化时，只变化中间三段区间，防止大腿根和膝盖部分得到错误的拉伸。长度计算发生在世界坐标系下，下一个节点必须是上一个节点的子节点或者同级节点，变化机制为第一个点不动，其余骨骼点的坐标根据权重和长度变化量沿着原直线方向进行变化。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718946963006-2c2c0f94-c1f2-46eb-9a6f-efda925428c7.png)

### 2.折线骨骼组长度修改
如图，脊椎骨是几段折线，方向并不一致。在身高或坐高变化时，腿长和脊椎长度会一起变化，腿长按上面的直线机制变化，脊椎按折线机制变化，配置上没什么区别，但是折线的长度变化，是直接沿配置的轴，只改变单轴的位置值，不沿骨骼方向变化。目前只有脊椎这里使用。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718947379872-036eae3a-49b4-4ded-b9ec-8ab850f44064.png)

## 五.一些特殊的部位
大部分部位由"Transform多帧修改"和"单骨骼长度修改"组合而成，但有一些部位比较特殊，需要单独的配置数据。

### 1.身高
![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718948752387-12bee00b-af4b-4ea3-b217-f420cf6e25e7.png)

### 2.坐高
不可配置调整范围，与当前身高有关，身高越高，调整幅度得绝对值越大。可以配置如图的系数，来影响坐高的调整范围。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718948775668-8a4e1e23-5cef-44b3-8f4d-c55172afd4e8.png)

### 3.头部大小
由于身高不变的机制，当头变大时，上半身会缩短，需要配置头的y轴高度，用以计算上半身要缩短多少厘米才能保持身高不变

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718949010660-79b601c3-144b-470a-9657-76ea3c024d8e.png)

### 4.脖子长度
配置调整范围和一个直线修改数据

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718949151368-e828f354-0712-40a2-983c-c5821a4b85bc.png)

### 5.手臂长度
如图，配置变化范围，大小臂长度变化权重，大臂和小臂的直线长度变化数据。

同时，当手臂长度变化时，可能要修改其他骨骼节点来使体型变得不会太怪，就可以添加一些基本骨骼修改项。

这些都是同时生效的，不用担心控制同一部位多次控制同一个骨骼节点，或者多个部位控制同一骨骼节点而导致的冲突。

所有的变化量都会累加，最终应用给骨骼点。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718949267918-059416b9-a703-4508-a2b1-ecc03bfdfa8c.png)

## 六.自定义骨骼修改项
功能种预设了23种骨骼修改部位，如图可以控制该部位是否开启:

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718949640240-796a170a-226a-4f3a-baa0-cdceb65b3fb5.png)



如果这23种不满足使用，可以点击添加自定义部位，并修改命名配置数据，这些自定义的部位，具有基本骨骼修改的配置功能，满足大多数自定义部位的使用。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1718949755995-c3256b3c-6ca4-4660-b44c-bacd3dbfb846.png)

## 七.保存机制
为防止意外情况导致的数据丢失，当切换选中部位时和关闭窗口时，会进行数据保存。

