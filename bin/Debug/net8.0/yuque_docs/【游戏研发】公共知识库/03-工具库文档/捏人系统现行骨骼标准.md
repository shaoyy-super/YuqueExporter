## 一.捏人相关的基本概念
动画骨骼：在本功能中，指人的基本骨骼，可以参见Unity Human Avatar 相关文档，人形动画只能控制这些骨骼。



捏人骨骼：动画骨骼的子骨骼，分配顶点权重，通过修改蒙皮骨骼的Transform来局部的控制一些顶点的位置，从而影响局部的形状。



形象来说，人的骨架可以类比为树，人的皮肤可以类比为树的叶子，动画骨骼指一些大的树干，可能又有一些分叉，而捏人骨骼是顶端的长了叶子的树枝。（所有的捏人骨骼，都不会是动画骨骼的父级，即不会发生层级穿插）

![现行骨骼树层级分布（女模）](https://cdn.nlark.com/yuque/0/2024/png/43256925/1725599706280-3e43a49a-55b1-407e-94fc-798e3ad4cf61.png)

我们一般通过移动，旋转，缩放捏人骨骼（绿色节点）来控制局部蒙皮的胖瘦，粗细，大小，形状，长短。



但有一些特殊情况，需要同时移动动画骨骼（白色节点），比如身高/坐高/手臂长度等，因为它根本的影响了主干骨骼，如果不调整会影响动画的准确性。



## 二.常见的骨骼修改方式
1.长度改变。

比较长的骨骼，一般拆分为多个蒙皮子骨骼，平滑的过渡权重，来使蒙皮拉伸效果保持均匀。注意，缩放一般不会应用在长度改变上。

长度改变一般会影响其他多个骨骼，比如手臂变长，那就要动手的位置。腿变长，膝盖，脚的位置都要改。

这是为了模拟骨骼生长的方向，保证脚不会插在地下，手被穿在小臂上。



2.粗细改变

双臂，双腿，脖子的粗细是调整蒙皮骨骼两个轴的缩放值。注意通常粗细改变对关节的影响比较小，比如膝盖，肘部。



上面那种拆分方式还有另一个好处，可以在调整粗细时，灵活的控制每一段的缩放值。

比如当一个人的小腿变粗，腿肚一定粗的更为明显突出，小腿变细，腿肚就几乎没有。



3.大小改变

头部大小，脚部大小，直接改三个轴的缩放值。



4.形状改变

这种情况比较麻烦，比如臀部，当变大时是两个大的球形，变小时却不是小的球形，而是一个平板形状。为了维持形状合理的变化，通常需要通过旋转+位移的手段来影响肌肉线条。

为了实现合理的旋转变化，我们有些新增的捏人骨骼，并不参与蒙皮，而是通过作为父级，来间接的影响末端捏人骨骼的位置。



5.叠加

调研捏人时发现有两种做法，一种是用户的滑条直接对应几个骨骼，而这些滑条之间控制的骨骼是互斥的。基于我们特殊的效果需求，我们采用了另一种叠加骨骼Transform差异量的做法。

即下图中的不同调整项，很可能会同时控制同一个骨骼。

![调整项](https://cdn.nlark.com/yuque/0/2024/png/43256925/1725594368421-fb0689ba-8773-422a-928c-8071f43bbf32.png)

同时这带来一个问题，即两个调整项同时很大或很小时，一个骨骼的变化量可能会畸重。我们采用如下图这种方式，限制一个骨骼的Transform的变化范围。

![骨骼范围限制](https://cdn.nlark.com/yuque/0/2024/png/43256925/1725594584820-adeb974c-5779-4a0b-86ee-2f605e9e2df9.png)



## 三.骨骼命名约定
命名中需体现部位，肌肉命名要准确。放在中间。

需体现是否是捏人用的骨骼，可以用_K来标识。放在尾部

需体现：左，中，右。分别用L,C,R代指标识。放在头部

如R_Calf_03_K，其中03代表一组腿骨内的编号。



## 四.捏人用骨骼名字集合（女模）


下表中，绝大部分是新增的捏人骨骼。

但头/脚/手的大小，我们直接采用了对人体基本骨骼的缩放，因为其处于骨骼树的末端，不会对其他部分产生影响。

{LR}代表其为左右对称的两根骨骼。

| <font style="color:#000000;">以下仅整理了主要用途，有其他非主要调整项使用但未在下表中列出</font> | | | | | |
| --- | --- | --- | --- | --- | --- |
| | | | | | |
| <font style="color:#000000;">Bip001 Head</font> | <font style="color:#000000;">头部大小</font> | <font style="color:#000000;"></font> | <font style="color:#000000;"></font> | | |
| C_Neck_01_K | 颈部粗细 |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589796761-d3341aef-98a5-4dc2-a981-2eda87bfb5db.png) |
| C_Tmuscle_01_K | <font style="color:#000000;">上斜方肌大小</font> |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589846631-6b7c1dfd-315f-40ec-b999-7142fa4dda71.png) |
| {LR}_Spine2_01_K | 背阔肌大小 |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589864197-78142f92-04e4-4398-9633-98f0ff4b57b8.png) |
| C_Spine1_01_K | 腰围 | 腹部丰满度 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589902709-b3840897-5371-4fa1-ab0d-783c44ffb98a.png) |
| C_Spine1_02_K | 腹部大小 | 腹部丰满度 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589914259-de911d1d-7a82-4405-95bb-324f1627e91c.png) |
| C_Spine1_03_K | | 胸部丰满度 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589922669-0b78063c-3781-4135-9e20-f7c4effea250.png) |
| C_Spine1_04_K |  |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589935116-920deead-db70-4180-b82b-91a326a67907.png) |
| C_Spine2_01_K | 肩宽 | 胸部大小 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589946328-008ea307-f638-436c-b7f8-0f2b4fdcc2f1.png) |
| C_Spine2_02_K | 腹部大小 | 肩宽 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589954811-68a07947-1578-4c7b-a6ca-3729a7e57522.png) |
| C_Spine2_03_K | 胸部大小 | |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589961766-926ce545-7cdd-444d-9859-efcb8cf69794.png) |
| C_Spine2_04_K | 背阔肌大小 | |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589979238-942dd255-4eed-48ca-8cfa-2e62bd512491.png) |
| C_Spine_01_K | 腹部大小 | 腹部丰满度 | 腰围 |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725589999815-c13012d0-2506-4d3a-88b0-d8b04e9571fc.png) |
| C_Spine_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590007756-b1ec1050-608a-4d79-af61-7129657ce387.png) |
| C_Spine_03_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590016422-c4d44e61-7d4f-4fdd-8fea-e626d7b59885.png) |
| C_Spine_04_K | | | | | |
| {LR}_Clavicle_01_K | 肩膀大小<br/> | 肩宽 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590050996-bfa82109-6427-4c9c-b240-2f06dbe08ae1.png) |
| {LR}_Clavicle_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590071318-63efb1af-2a55-4053-a9c2-c38388688bea.png) |
| {LR}_Clavicle_03_K | 暂时未用到 |  | |  |  |
| {LR}_UpperArm_01_K | 大臂粗细 | 手臂长度 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590082967-f42bd965-70d0-4ed6-9986-e5bd52f1c240.png) |
| {LR}_UpperArm_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590101724-4d01f7ab-f8c8-4167-b8e0-245875d23038.png) |
| {LR}_Forearm_01_K | <font style="background-color:#000000;"></font>小臂粗细 | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590124544-617975fb-de02-451d-9147-2d5a26c4c3ec.png) |
| {LR}_Forearm_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590130550-e07c912d-38b0-4bca-a8a2-c104798b6981.png) |
| {LR}_Forearm_03_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590139110-1e3aa3ea-d052-4ca2-b412-3ca6702433bb.png) |
| {LR}_Forearm_04_K | | 手部大小 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590147001-7b97b586-92cd-4099-b980-c10962e702b7.png) |
| Bip001 {LR} Hand |  | | | | |
| C_Pelvis_01_K | 胯部宽度 | 腰围 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590175555-5e809e6a-25ca-4322-b4f8-bbbbf65ced89.png) |
| C_Pelvis_02_K | 腹部大小 |  | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590181668-cdbc0e6e-34be-4a74-83cc-33da81579624.png) |
| C_Pelvis_03_K | 胯部宽度 | 腰围 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590191585-d127e173-cc10-4b15-a51d-15c01de899a9.png) |
| C_Pelvis_04_K | 臀部大小 |  | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590205663-f545f916-6abe-4987-b51a-72b7127cea35.png) |
| {LR}_Pelvis_01_K | | 小腹丰满度 | | 不参与蒙皮 |  |
| {LR}_Pelvis_02_K | 胯部宽度 | 腹部大小 | 大腿粗细 | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590609315-02f1abd9-64a5-4519-bc8b-7dd86024340e.png) |
| {LR}_Pelvis_03_K | 臀部大小 | 小腹丰满度 | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590585115-121bc825-44d7-486c-b9fa-e8fd858f1072.png) |
| {LR}_Thigh_01_K | 大腿粗细 | 身高 | 坐高 |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590666154-599898f0-2260-4e16-ad34-8237e3b5435a.png) |
| {LR}_Thigh_02_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590673962-e06f5da1-5453-4725-8518-6426b6eb5a75.png) |
| {LR}_Thigh_03_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590680210-f10b9f28-d641-44c8-9d3c-4fe51abd7a28.png) |
| {LR}_Thigh_04_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590686286-e5d40240-4250-41bc-ab06-20df88b1eb3c.png) |
| {LR}_Calf_01_K | 小腿粗细 | | | 脚掌大小 | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590700141-f9bd419d-56fe-4f0a-b07f-8d48cefcc5e7.png) |
| {LR}_Calf_02_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590708275-69cf5b14-3fd1-48aa-a761-5e2ae821a914.png) | | | |
| {LR}_Calf_03_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590714447-97f258ad-994c-4beb-ae53-686ab1fd22f0.png) | | | |
| {LR}_Calf_04_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590725708-50d9a471-f910-498e-beec-d5eb776c9918.png) | | | |
| Bip001 {LR} Foot | 脚掌大小 |  |  | | |
| {LR}_Cup_01_K | 胸部丰满度 | 胸部大小 | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1725590749761-9c631c55-faf7-4776-8f2c-ecf5ee250974.png) |
|  C_Spine1_05_K        | 测试用的服装布料挂在点，暂未使用 | | | | |
|  C_Spine1_06_K  | | | | | |




## 五.捏人用骨骼名字集合（男模）
| <font style="color:#000000;">以下仅整理了主要用途，有其他非主要调整项使用但未在下表中列出</font> | | | | | |
| --- | --- | --- | --- | --- | --- |
| | | | | | |
| <font style="color:#000000;">Bip001 Head</font> | <font style="color:#000000;">头部大小</font> | <font style="color:#000000;"></font> | <font style="color:#000000;"></font> | | |
| C_Neck_01_K | 颈部粗细 |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648114022-5e183600-4573-4f83-8720-f779c3100458.png) |
| {LR}_Tmuscle_01_K | <font style="color:#000000;">上斜方肌大小</font> |  |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648182692-bfff9b7b-0c7a-4e26-a503-d80958e76e9c.png) |
| C_Spine1_01_K | 腰围 | 腹部丰满度 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648279758-5d3c1963-11b3-4721-8f3e-a123a5544709.png) |
| C_Spine1_02_K | 腹部大小 | 腹部丰满度 |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648330572-15dbd4b0-5c98-4669-a175-64cadfea5ee1.png) |
| C_Spine2_01_K | 肩宽 | 胸部大小<br/> |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648445708-f1c1e45c-846e-4519-90b1-ea745768ca8b.png) |
| C_Spine2_02_K | 胸部大小 | |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648506354-0db08f60-0ff1-4ba1-825f-642ee2e75012.png) |
| C_Spine2_03_K | 胸围 | |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648565141-33358b6c-e084-4272-9593-94cafca66511.png) |
| {LR}_latissimus_01_K | 背阔肌大小 | |  |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649098392-b1dfa193-3ae7-4880-b463-2420e90343da.png) |
| C_Spine_01_K | 腹部大小 | 腹部丰满度 | 腰围 |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649141971-3c490ea3-6b6d-4f1b-93d0-67077b26a6e8.png) |
| C_Spine_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649158355-d4faaba2-bb09-4c8d-bd62-204084420516.png) |
| {LR}_Clavicle_01_K | 肩膀大小<br/><br/> | 肩宽<br/> | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649315633-73a7dfc1-40cf-4e44-a603-d1a56746291d.png) |
| {LR}_Clavicle_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649330592-c955c996-ac37-46bf-9afe-e1db596cde3e.png) |
| {LR}_Clavicle_03_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649342144-24df952b-efd0-43ad-996a-a624f38373ef.png) |
| {LR}_UpperArm_01_K | 大臂粗细<br/><br/> | 手臂长度 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649366165-b0e3cb0e-37f7-46a2-94d6-5bf1d66c981a.png) |
| {LR}_UpperArm_02_01_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649389159-bf5fc816-72ec-4f66-803b-48e0e26b5ffd.png) |
| {LR}_UpperArm_02_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649460321-69cd3704-c700-4961-95f5-22b3905279f7.png) |
| {LR}_UpperArm_02_03_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649473614-da0ace30-b62a-42d4-b15f-df70daaf1de3.png) |
| {LR}_UpperArm_03_K |  | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649489381-44a533be-eaac-484a-b96b-575e8c1e8ca8.png) |
| {LR}_Forearm_01_K | <font style="background-color:#000000;"></font>小臂粗细 | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649511748-1d52390b-c5ce-457f-a3c5-c71bc9a91e9d.png) |
| {LR}_Forearm_02_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649527521-c0d1cede-2b5c-4999-929b-0a90d95ca9cd.png) |
| {LR}_Forearm_03_K | | | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649538616-aa5c258b-dbd4-496b-810a-cdec3e8a4fea.png) |
| {LR}_Forearm_04_K | | 手部大小<br/> | |  | ![]() |
| {LR}_Hand_01_K | <br/><br/> | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649628687-bdb0483a-b912-46e3-a017-3089b220863b.png) |
| {LR}_Finger_<font style="color:#DF2A3F;">XX</font>_<font style="color:#DF2A3F;">XX</font>_K | | | | |  |
| C_Pelvis_01_K | 胯部宽度 | 腰围 | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648909328-58ed4b7e-aea8-402b-9367-ef5b8bd4741b.png) |
| C_Pelvis_02_K | 小幅丰满度 |  | |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731648928148-e926d498-63d9-434d-a1ab-94182bd4bd9e.png) |
| {LR}_Pelvis_01_K | | 小腹丰满度 | | 不参与蒙皮 | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650006703-25373bc0-340e-41ce-bd3e-6b8c72bc2640.png) |
| {LR}_Pelvis_02_K | 胯部宽度 | 腹部大小 | 大腿粗细 | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650021341-d29d1f21-eaf1-40b5-8fe5-6f0a9743e8c6.png) |
| {LR}_Thigh_01_K | 大腿粗细 | 身高 | 坐高 |  | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650054011-17e095bd-862e-4cdb-9c81-19a8f5cc7b6b.png) |
| {LR}_Thigh_02_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650084453-3df27b19-f058-4788-840e-5f05bddf0161.png) |
| {LR}_Thigh_03_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650097017-360ceb69-b09f-439e-8c90-29c58aed6d58.png) |
| {LR}_Thigh_04_K | | | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731650112080-c6e42c6c-371b-4b2a-98a9-9e03d22c0721.png) |
| {LR}_Calf_01_K | 小腿粗细 | | | 脚掌大小 | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649768995-47ef2085-d62f-4944-90bb-34f55f5cf1e2.png) |
| {LR}_Calf_02_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649782145-40405768-b32d-40d7-aeb6-805c8a0de459.png) | | | |
| {LR}_Calf_03_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649796999-4cd01e09-5082-413f-9866-66fa441e49f9.png) | | | |
| {LR}_Calf_04_K | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649808952-980aa71c-adf8-4b90-b8c1-9a8c031bd744.png) | | | |
| {LR}_Calf_04_K |  |  |  | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649833901-80c83a99-a8af-48bd-9aa2-96992f0b7ec1.png) |
| Bip001 {LR} Foot | 脚掌大小 |  |  | | |
| {LR}_Cup_01_K<br/><font style="color:#2F4BDA;">{LR}_Cup_01_DK</font> | 胸部丰满度 | 胸部大小 | | | ![](https://cdn.nlark.com/yuque/0/2024/png/43256883/1731649885091-628d2354-bc08-4984-85eb-4d93a31aa123.png) |




为了保证协调连续，每一个骨骼，可能都参与了周边部位的调整，因此不可从命名简单推断其唯一用途，详细需参看捏人配置数据文件。下图中调节小臂粗细时，会改到大臂处的骨骼，就是一个很好的例子。

![](https://cdn.nlark.com/yuque/0/2024/png/43256925/1725590951738-05e5013f-2d7f-442d-82e7-52ca4fe3a1a5.png)















