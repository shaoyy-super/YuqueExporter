| 作者 | 时间 | 版本 |
| --- | --- | --- |
| 储景鹏 | 2024/08/12 | 0.1 |


# 捏脸模块说明
捏脸模块一共分成两部分，的分布和后期重新封装的控制器

1. 早期的演示部分（包含，素材数据结构，编辑器，分散的修改器，和控制器，演示场景的相关代码）
    1. 目录结构
        1. Customizer：捏脸模块目录
            1. Editor：编辑器相关代码
                1. Packages：插件编辑器部分
                    1. LocalicationTookit：临时写给捏脸编辑器的本地化语言模块的编辑器部分
                    2. MtToolkit：很久以前封装的输入控制模块的编辑器部分
            2. Plugins：插件目录
            3. Runtime：运行时代码目录
                1. Controller：控制器目录
                2. CustomizeParameter：自定义参数目录
                    1. CustomizeParameter.cs：定义捏脸保存数据的数据结构
                    2. PanData.cs：上下左右移动的修改数据结构
                    3. PigmentData.cs：颜色数据结构
                    4. SelectData.参数：选择数据结构
                    5. SliderData.参数：滑动数据结构
                3. Data：数据目录
                    1. Face：面部数据结构
                        1. EyeData.cs：眼睛数据结构（眼睛纹理数据的容器，缓存当前眼睛纹理数据，修改接口和对应的回调）
                        2. EyeTextureData.cs：眼睛纹理数据结构（眼睛所有参与修改属性的定义）
                        3. EyelashData.cs：睫毛数据结构（睫毛纹理数据的容器，缓存当前睫毛纹理数据，修改接口和对应的回调）
                        4. EyelashTextureData.cs：睫毛纹理数据（睫毛所有参与修改的属性定义）
                        5. FaceData.cs：面部数据（包含塑形，妆容，眼睛，睫毛数据的容器整合）
                        6. MakeupData.cs：妆容数据（定义妆容数据的类型，妆容纹理的容器，缓存当前妆容数据，修改妆容数据的结构和对应的回调）
                        7. ModifyDataBase.cs：修改数据基类
                        8. BlendShapePinchData.cs和PinchFaceData.cs：导入当时北京给的捏脸Excel表写的数据结构
                        9. SkinMeshData.cs：蒙皮对应的变形器数据结构
                        10. SliderModifyData.cs：滑动修改器数据（通过名称记录对应的每一个变形器）
                        11. TextureData.cs：妆容数据结构（记录妆容纹理需要参与设置的属性）
                    2. Hair：头发数据结构
                        1. HairData.cs：头发数据（头发模型的容器，缓存当前选择的头发数据）
                        2. HairModelData.cs：头发模型数据
                    3. ReferenceData：引用数据
                        1. ColorData.csL:颜色数据（目前没有用到）
                        2. VectorRange.cs（可以设置最小值和最大值的浮点数的滑动数据结构）
                        3. Vector2Range.cs（可以设置最小值和最大值的Vector2的滑动数据结构）
                        4. Vector3Range.cs（可以设置最小是和最大值的Vector3的滑动数据结构。未使用）
                    4. Skin：皮肤数据
                        1. SkinData.cs：皮肤数据结构（皮肤纹理数据的容器，缓存当前选择的皮肤纹理数据，皮肤数据的修改结构和对应的回调）
                        2. SkinTextureData.cs：皮肤纹理数据结构（定义所有参与皮肤属性修改的数据结构）
                4. Modifier：修改器目录
                    1. BlendshapeModifier.cs：变形器修改器（变形器和对应的蒙皮，已经变形器在蒙皮中的序号的容器，并提供变形器的修改接口和当前权重值的获取接口）
                    2. EyelashModifier.cs：睫毛修改器（睫毛数据选择和属性修改接口）
                    3. EyeModifier.cs：眼睛修改器（眼睛数据选择和属性修改接口）
                    4. FaceModifier.cs：面部塑形修改器（塑形数据初始化和设置接口）
                    5. HairModifier.cs：头发数据修改器
                    6. SkinModifier.cs：皮肤数据修改器
                    7. TextureModifier.cs：妆容数据修改器
                    8. CustomizeDataModifier.cs：自定义数据修改器（捏脸素材数据修改器）
                5. Utils：工具集合
                    1. CustomizeDataSerilizer.cs：捏脸素材数据的序列化和反序列化功能
                    2. CustomizePSDatSerilizer.cs：捏脸辅助数据的序列化和反序列化功能
                    3. DialogUtil.cs：封装Window下打开文件路径，打开文件夹路径等相关功能
                    4. MathUtil.cs：封装用到的数学函数
                    5. PathUtil.cs：封装Unity工程下目录工具
                    6. RenderTextureExtension.cs：渲染纹理扩展
                    7. SerilizerUtils.cs：封装使用MsgPack的常用数据结构的序列化和反序列化功能
                    8. Texture2DExtension.cs：Texture2D功能扩展
                    9. TextureUtil.cs：纹理工具（目前是渲染纹理转Texture2D的接口）
                    10. VersionInfo.cs：版本信息封装类
        2. CustomizerDemo：捏脸演示场景目录
            1. Config：捏脸素材数据，辅助数据，本地化数据， 菜单分组数据
            2. Editor：编辑器代码
                1. ChangeScriptEncodingFormat.cs：代码转UTF8工具
                2. CustomizeDataPopup.cs：捏脸素材数据右键菜单导出Excel和导入Excel工具
                3. CustomizePSDataEditor.cs：捏脸辅助数据编辑界面工具（目前应该只是用于序列化和显示菜单分组信息）
                4. CustomizePSDataInspector.cs：捏脸辅助数据的Inspector界面
                5. ModifyDataMultiListAdaptor.cs：可排序拖拽列表编辑器控件
            3. Prefab：预制件目录
                1. UI：演示场景使用的UI预制件目录
            4. Save：演示场景，捏脸数据保存目录
            5. Scene：场景文件目录（AssetEditor是编辑捏脸素材的场景，Demo是演示场景）
            6. Script：演示场景使用的脚本目录
                1. UI：演示场景使用的UI控制器和数据脚本
                2. Utils：演示场景工具脚本目录
                    1. CustomizeInfoSerilizer.cs：捏脸结果信息的序列化和反序列化工具
                    2. LocalicationUtil.cs演示场景使用的本地化工具
    2. 创建捏脸素材捏脸和素材编辑界面
        1. 在场景中拖入用于捏脸的角色模型
        2. 然后把CustomizeDataModifier.cs拖动到角色上，就会自动更具角色模型的名称生成对应的数据文件和配置信息
        3. ![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723443084576-40c451e1-1159-4ec9-8a6a-5f9eb8e01cba.png)
        4. ![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723443174374-527848bf-a32e-4658-9007-02553f96eb7c.png)
        5. ![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723443380662-f8502ed7-2def-44d1-ad49-05ee0eae5378.png)
        6. 表情动画，实时查看变形器带动的动画效果![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723443514325-ac2da3b2-8235-479f-b389-4f6d92ee25c8.png)
        7. 妆容素材编辑界面![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723444099932-c3bc5c9e-fcfd-4b31-9441-b5461af42d49.png)
        8. 睫毛素材编辑界面![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723444239631-cbe2b4d0-285c-4962-9b15-be07742ec351.png)
        9. 眼睛素材编辑界面![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723444529787-6c6cc9f5-78d4-4310-ad37-228b927e7f6c.png)
        10. 皮肤素材编辑界面![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723444687043-87d9f9ba-93fe-4af6-a16a-2e9cb474c0e8.png)
        11. 头发素材编辑界面（仅仅是演示使用，后期由换装系统提供头发）![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723444803730-54db26aa-b1d3-4fd6-91d4-c776016ca908.png)
    3. 捏脸数据Inspector界面![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445176808-55674616-6e74-4c09-ac76-fbfd4ddd2757.png)![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445226279-15870fe8-23f4-4905-b2fb-2db173450c86.png)
        1. 塑形使用的数据，可以直接修改，但是不能实时的查看下过![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445327658-4949e231-b0d9-44f1-ab02-778a883b876f.png)
        2. 表情动画的数据和范围，可以调整，但是没有实时的效果![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445370169-1fde375a-594a-4638-811c-092895d7490f.png)
        3. 妆容数据，可以调整默认值，最小值和最大值，但是没有效果，只有运行时才能看到![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445446950-53e1398e-56cc-4dad-99ea-43e2be14613f.png)
        4. 睫毛数据![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445492842-b9a95d68-4f27-42ec-be8c-c27f444a30a4.png)
        5. 眼睛数据，可以调整数据，最小值和最大值，不能实时看效果，只有运行时才能看效果![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445542446-9529ee09-682f-4f12-b5a0-39f05ecf9907.png)
        6. 皮肤数据，可以调整数据，最小值和最大值，至于运行时才能看效果![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445592640-34ac9f43-0199-4e48-bee7-f197ed266106.png)
        7. 头发数据![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445620173-5455dd1d-6153-42fb-a3aa-afd5d3f93167.png)
    4. 捏脸素材数据导出和导入Excel（在需要操作的数据上鼠标右键）![](https://cdn.nlark.com/yuque/0/2024/png/35803056/1723445834722-f2d5e3e8-e7a7-40e3-be53-9275a6e7685c.png)
2. 后期重新封装的捏脸控制器（除了变形修改器，其他的只有功能API）
    1. [捏脸控制器](https://snh48group.yuque.com/org-wiki-snh48group-ec9yge/rgqlf2/uqbweb7km8xxrabn)
    2. [皮肤材质属性快容器](https://snh48group.yuque.com/org-wiki-snh48group-ec9yge/rgqlf2/fyrfotgox5lr46fq)
    3. [Blendshape归属数据结构](https://snh48group.yuque.com/org-wiki-snh48group-ec9yge/rgqlf2/za01tr9gaul6uudt)
    4. [Blendshape修改器](https://snh48group.yuque.com/org-wiki-snh48group-ec9yge/rgqlf2/pdu6fgx708f9hivd)



