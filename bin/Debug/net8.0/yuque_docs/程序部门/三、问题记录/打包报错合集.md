## 问题1：
[IOS]打包报错，“Agreeing to the Xcode/iOS license requires admin privileges,”

## 解决方案
1、打开终端，输入  sudo xcodebuild -license

2、终端提示敲回车键（enter）打开许可协议，照做

3、终端提示 按下  “space” 键阅读许可协议，按“q” 不阅读

4、最终，终端会出现三个选项，agree 、print、cancel，不用想，能不是agree 吗！输入agree，然后enter

原文地址：[<u>https://blog.csdn.net/yabusai/article/details/37690783</u>](https://blog.csdn.net/yabusai/article/details/37690783)



## 问题2：
上传服务器报错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677861555-3423071f-969f-41c6-8132-b2835b4b23ee.png)

## 原因：
assets文件夹没有权限，root创建的文件夹，无法使用dev账户上传



## 问题3：
IOS出的补丁与之前的版本一致，ANDROID出的补丁正常

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677861766-6a0eba75-0e64-4871-8b04-59d1fe1537c3.png)

## 原因：
Unity打开工程失败，打开任何工程都会报错。

## 解决方案：
重新安装Unity



## 问题4：
打包失败，unknow error

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677862092-e0f13ec4-ebfa-4e1b-bd4e-917b243896f3.png)

## 原因：
Unity Cache Server挂了。

比如：cache server 224服务器缓存满了，或者由于其他原因直接崩了。

## 解决方案：
清缓存

## **备注：**
这个报错是Unity启动时报出的，Jenkins虽然显示打包失败，但其实包正常打出来了。版本可以直接用。



## 问题5：
Directory.Delete 内部报错

[Exception]Directory is not empty

IOException：Sharing Violation on Path

## 原因：
版本机Buildtarget目录下文件不为空

例如下述路径E:\JenkinsWork\ProjectDM_2.0_Debug_Publish\Buildtarget

## 解决方案：
删除该目录下的文件



## 问题6：
Directory.CreateDirectory报错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677862342-60cbd293-5363-419c-86df-d5b55ff3fcc7.png)

## 解决方案：
再运行一次即可



## 问题7：
[IOS]开启jenkins没有权限

## 解决方案：
执行桌面的脚本

1.打开terminal

2.输入bash

3.将脚本拖入terminal



## 问题8：
[Android]游戏启动闪退

## 原因：
为了兼容Android9.0，项目升级Android API Level到28；如果SDK不支持，启动游戏会闪退。



## 问题9：
[iOS] 打AB包失败，有如下报错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677862527-76573780-9aad-4efd-9b81-33db1a6912ed.png)

## 原因：
MAC打开目录的时候，系统会自动创建`.DS_Store`文件，当这个文件在可打包路径下时，会出错。

## 解决方案：
本地清理多余文件：

find . -name '.DS_Store'|xargs rm



## 问题10：
打AB包失败，有如下报错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677862822-92675842-5bb2-4fb5-b1be-802cede669e0.png)

## 原因：
多语言ab包中引用的非cn包的资源导致

## 解决方案：
找出错误引用的资源,改成对应的cn的相关资源引用



## 问题11:
打AB包失败,报错如下:

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677863127-19352bf9-e7da-49a5-a7fb-18d23f1e92fd.png)

## 原因:
修改了jenkins的环境变量导致

## 解决方案：
![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677863363-e6278121-9993-40c0-b0c9-65b5cbfdc2fb.png)![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677863584-13d19da5-9199-4333-bb17-64f80e2bb046.png)

去除环境变量设置:

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677863809-f08a94c9-9a33-455f-93ac-96648846ef69.png)



## 问题12：
Lua代码混淆出错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677864013-519773c5-84a7-4d29-8258-03e7e390a70a.png)

## 解决方案：
不知道具体原因是什么，把出错的单个Lua文件删掉，新建一个(把代码复制过去)就好了

### 查看哪个文件出错：
命令行执行混淆，出错前输出的最后一个文件名就是

lua D:/JenkinsWorkSpace/Pok_DevReview/Assets/../LuaEncoder/squish/squish_dict.lua D:\JenkinsWorkSpace\Pok_DevReview\Assets\LuaFramework\Presentation\UI\Controller\Guild D:/JenkinsWorkSpace/Pok_DevReview/Assets/../LuaConfusionTemp/lua_ui_controller_guild

## 问题13：
同时引用到不同语言版本的同名AB资源

报错：Inconsistent asset when sorting preload assets (Same path & file ID)

![](https://cdn.nlark.com/yuque/0/2024/jpeg/22817384/1715677864445-608e7629-09ef-457a-83c0-c5e10c63d500.jpeg)

定位方法：

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677864644-122c7bad-550f-4f2e-a0cc-b962920e9af6.png)

右键预制体-SelectDependence，查找引用

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677864852-db6b327b-de8e-4d10-9946-de422a428780.png)

有多个同名资源说明引用错误，需要修改引用到正确的语言版本资源

## 问题14：
现象：jenkins打包完毕后，包体无法上传到224

报错：

：/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- xcodeproj (LoadError)from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'from /Volumes/External1/JenkinsWorkspace1/ProjectDM_iOS_United/packtool/iOS/HLPack/rubyController.rb:2:in `<main>'$ /bin/sh -xe /var/folders/zq/xp2y1wy90zx3_w0trmd1ygq80000gn/T/jenkins4861812057858002797.sh

### 原因：Jenkins远程ssh连接子节点访问ruby无法require第三方库
Jenkins远程ssh连接操作为非交互式shell(non-interactive)与非登陆式shell(non-login)，这种方式在连接的时候不会执行权限文件 导致获取不到第三方库的路径

上方报错中 $ /bin/sh -xe/var/folders/zq/xp2y1wy90zx3_w0trmd1ygq80000gn/T/jenkins4861812057858002797.sh这段就是属于non-login+ non-interactive的方式

### 解决方案：
在pack.sh顶上加上#!/bin/bash –ilex

-i参数 和 -l参数让bash成为login shell and interactive shell，就可以读取**/etc/profile**和**~/.bash_profile**等文件，e参数表示一旦出错,就退出当前的shell,x参数表示可以显示所执行的每一条命令

同理：其他通过jenkins远程操作shell等无法访问第三方库可参考以上解决办法

[https://blog.csdn.net/qq_33873431/article/details/80348561](https://blog.csdn.net/qq_33873431/article/details/80348561)

## 问题15：
jenkins拷贝文件到ftp指定目录

报错：

cp: 目标"/DMBuildTarget/versions/test/" 不是目录

### 原因：
无权限访问

### 解决方案：
连接ftp上传

ftp -n -v 192.168.51.224 <<!

user $USER $PASSWARD

cd ${target}

binary



put server_${version}.patch.tar.gz

put server_${version}.tar.gz

quit



!

## 问题16：
gradle打包方式打包时,生成项目下的BuildTarget目录下的文件夹变成了一个文件，导致无法找到BuildTarget目录下的文件

**原因：**Unity的BuildSetting没有设置gradle打包方式

**解决方案：**将打包方式改为gradle即可

## 问题17：
删除配置文件导致的打包报错

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677865067-e7a60d38-64e2-4df1-93ce-9209aa27f7c7.png)

**解决方案：**

删除client/LuaConfusionTemp下所有文件

删除client/Assets/LuaTempA下所有文件

找到删除的配置的路径。查看是否有已经删除的配置文件或文件夹还存在，并且没有SVN版本管理。如果有，删除该文件或文件夹

## 问题18：
报错：Starting a Gradle Daemon, 2 incompatible and 4 stopped Daemons could not be reused, use --status for details

E:\JenkinsWork\ProjectDM_2.0_Debug_Publish\Buildtarget\PrjDM_11028\app\src\main\java\com\ifeery\long\sg\UnityPlayerActivity.java:1: 错误: 需要<标识符>

package com.ifeery.long.sg;

E:\JenkinsWork\ProjectDM_2.0_Debug_Publish\Buildtarget\PrjDM_11028\app\src\main\java\com\ifeery\long\sg\UnityPlayerActivity.java:1: 错误: 需要class, interface或enum

package com.ifeery.long.sg;

E:\JenkinsWork\ProjectDM_2.0_Debug_Publish\Buildtarget\PrjDM_11028\app\src\main\java\com\ifeery\long\sg\UnityPlayerActivity.java:1: 错误: 需要class, interface或enum

package com.ifeery.long.sg;

:app:compileReleaseJavaWithJavac FAILED

**原因：**包名中带了java关键字

**解决方案：**改包名

## 问题19：
报错：[Exception]E:\JenkinsWork\ProjectDM_2.0_Debug_Publish\Buildtarget\PrjDM_11013\Digital: Lost Evolution does not exist

**原因：**打包生成的BuildTarget下安卓工程文件夹名字无法匹配，文件夹名字中带有特殊符号

![](https://cdn.nlark.com/yuque/0/2024/jpeg/22817384/1715677865312-05101c1a-97ab-4aad-b1d7-e12226dbb179.jpeg)

还有另外一种可能，Unity里面的BuildSystem未设置成Gradle模式。会导致BuildTarget被生成一个文件

**解决方案：**不要带有特殊符号



## 问题20：gradle打包报错：数组越界
CommandInvokationFailure: Gradle build failed. F:\Unitys\2018.4.1f1\Unity\Editor\Data\PlaybackEngines\AndroidPlayer/Tools\OpenJDK\Windows\bin\java.exe -classpath "F:\Unitys\2018.4.1f1\Unity\Editor\Data\PlaybackEngines\AndroidPlayer\Tools\gradle\lib\gradle-launcher-4.6.jar" org.gradle.launcher.GradleMain "-Dorg.gradle.jvmargs=-Xmx4096m" "assembleRelease"stderr[FAILURE: Build failed with an exception.* Where:Build file 'E:\Pokemon\branch_dev\client\Temp\gradleOut\build.gradle'* What went wrong:Could not compile build file 'E:\Pokemon\branch_dev\client\Temp\gradleOut\build.gradle'.> startup failed:  General error during class generation: 332    java.lang.ArrayIndexOutOfBoundsException: 332    at org.codehaus.groovy.classgen.asm.CallSiteWriter.getCreateArraySignature(CallSiteWriter.java:58)

### 原因：StreamingAssets目录下的资源数量太多了，上的332就是文件数
参考：[<u>https://blog.csdn.net/liqing19850102/article/details/83143146</u>](https://blog.csdn.net/liqing19850102/article/details/83143146)

## 问题21：Gradle打包报错
![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677865591-2bad81ae-43db-4ba3-8186-ebf75aa2adff.png)

可能有多种原因导致：

1、需要使用gradle打包方式但是Build System 未选择Gradle方式

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677865879-853c1153-ba22-43d4-bdbe-3f7e8d97fb78.png)

2、需要gradle打包方式，但是sdk里并没有gradle设置，需要勾选Custom Gradle Template

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677866073-44296f75-a4bd-4a39-aa3c-a27403dfd949.png)

3、系统内存不足，android工程需要指定线程调整线程内存的，然而系统并没有这么多内存给你使用...

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677866277-7819351b-2a8a-4315-9a8e-cce3a9aba0d7.png)



## 问题 22：
![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1715677998413-4fd833a1-1e92-46d9-bdb9-550d9ae48545.png)

### 原因：
正在使用RenderDoc抓帧，同时去打包，会报这个错误

### 解决方案：
关闭RenderDoc，再重新打包即可



