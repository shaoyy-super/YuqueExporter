**流程**

补丁闪断

上传bug修复代码, 测试通过合并到publish分支即可

**重载 提供要重载的脚本文件和reload.lua 文件**

1.重载配置文件(配置文件按照在服务器的路径放到etc)

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655986013-ada6df63-9274-4cdb-b1d5-48e1a0f02383.png)

2.重载lua文件(lua文件按照在服务器的路径放到script下)

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655986378-5faff48b-d66b-4754-9348-8e706c5b385c.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655986699-ee589b43-0215-4c12-8bf6-52848ba99d17.png)

需要重载的方法发到Reload.lua中, 文件打包发给运维执行线上重载

**补偿**

PlayerOnlinePatch: 一般在玩家上线时执行一次处理函数

1. 添加重载枚举

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655987036-1b919736-a03d-4cba-a480-e29d740c73e8.png)

1. 添加重载函数

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655987374-cfa0512d-2024-45df-88c1-75473da9167b.png)![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655987715-5a036c70-9ad8-4550-9d13-fa44d7ccddf4.png)

**通过网页删除玩家数据邮件数码兽**

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655988056-af09395d-6a24-4dff-aede-8303899d737a.png)

玩家id,类型,参数1,参数2;玩家id,类型,参数1,参数2

类型1:删除物品, 类型2:删除数码兽, 类型3:删除邮件, 类型4:增加物品

**删除玩家物品**, 玩家:1000001, 类型:1,参数1:物品id,参数2: 物品数量

1000001,1,101,100;1000002,1,102,100

**删除数码兽**, 玩家id:1000001, 类型:2,参数1:数码兽id,参数2:0

1000001,2,101,0;1000002,2,102,0

**删除邮件**, 玩家id:1000001,类型:3,参数1:邮件名称,参数2:0

1000001,3,"邮件标题",0;1000002,3,"邮件标题",0

**增加物品**, 玩家id:1000001,类型:4,参数1:物品id,参数2:物品数量

1000001,4,101,100;1000002,4,102,100

**回滚单个玩家数据方案**

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712655988388-1890f92d-b66e-441d-8367-cd8024210018.png)

**运维流程**

[thoughts 文档](https://thoughts.teambition.com/workspaces/5dfb64dfdd03ff001360619e/docs/5ed709371bb9330001309116)

[thoughts 文档](https://thoughts.teambition.com/workspaces/5dfb64dfdd03ff001360619e/docs/5ed7092f1bb9330001309069)

