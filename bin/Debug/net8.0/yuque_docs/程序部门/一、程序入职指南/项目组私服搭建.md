**BIOS**:(新装~~的~~机器需要检查一下)

开启cpu虚拟化

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712657806333-ff49824a-f575-4a71-9000-fd1a805beb1a.png)

### _环境包_
_文件地址：_`\\192.168.0.231\AI及Web3游戏研发中心\公共资源\04_软件\引擎相关\vagrant_debian11.9`

_将文件都复制到本地纯英文路径下,如E：sf_

FA项目组私服搭建使用vagrant_debian10.12文件夹 不要使用同路径下的vagrant文件夹 拉取环境包时需要注意_安装_~~_镜_~~_像_

路径里不能~~有~~中文，不然 _安装_~~_镜_~~_像 会不成功_！！！

错误路径：E:\私服搭建

正确路径：E:\sf

### _安装步骤_
1. _点击安装_~~_”_~~_依赖软件” （安装过程中提示重启选否，等该步操作2个软件安装完成后手动重启）_
2. _点击安装插件（可能需要几分钟，请耐心等待）_
3. _点击安装_~~_镜_~~_像_

### 首次运行前需要操作
1.在项目工程文件夹/server/tools/ 点击运行linkdir.bat

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712657806807-5862b8ea-fa4d-41cb-b032-19015a747f98.png)

### 开服操作
1.在项目工程文件夹/server/ 按住shift键右键空白处，选择在此处打开powershell窗口

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712657807206-ad1bb99e-0193-4271-b593-4dd932b1f728.png)

2.依次键入命令

开启虚拟机（首次开启需要几分钟初始化环境）

vagrant up

进入虚拟机

vagrant ssh

3.服务器操作

+ 进入工具路径

cd /vagrant/tools

+ sh初始化**（首次运行/重置服务器使用）**

一般来说 sh init.sh -z 1 就可以满足自己私服的使用

**注意：**

1. **关服之后再清库    sh init.sh -z 1  **

       完整命令： sh init.sh -h 127.0.0.1 -u root -p 123456 -z 1 -i 192.168.5.222 -g 1

2. 



+ 开服/重~~启~~服务器

sh run.sh

+ 关服

sh run.sh stop

**注**：

1. 本机连接自己的服务器不需要额外配置，在区服列表选择”私服”即可
2. **<font style="color:#DF2A3F;">如有特殊需求 需要搭建自己的服务器 需要修改-z后的区服 使其与客户端所选区服id（私服对应1区）保持一致 本地区服与登录区服如果不一致 会导致游戏内部分功能出错 （如清库使用 -z 1 登录未选择私服 或清库使用了其他区服 例如 -z 10 登陆时在客户端选择私服）</font>**
3. <font style="color:#DF2A3F;">-</font>**<font style="color:#DF2A3F;">z 后面的数字表示区服，对应的是server_list.json配置文件中的</font>**

      ![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1729773503828-623f6940-ed29-4eb1-a127-1abae3ef4f26.png)

**<font style="color:#DF2A3F;">      自己的私服服务器id配置多少 -z后面就是多少</font>**

4. **<font style="color:#DF2A3F;">服务器初始化的配置是最后一次执行init.sh时指定的区服配置</font>**

      **<font style="color:#DF2A3F;">比如顺序执行两次</font>**<font style="color:#DF2A3F;"> </font>**<font style="color:#DF2A3F;">sh init.sh -z 1 ；sh init.sh -z 2 最终的配置是初始化区服2的配置信息</font>**

**<font style="color:#DF2A3F;">PS: 如果不是测试跨服相关功能，尽量不要用自己的私服服务器，尽量使用默认的私服</font>**

### 其他指令
+ 退出虚拟~~机~~（虚拟机状态键入）

exit

+ 关闭虚拟机（非虚拟机状态键入）

vagrant halt

+ 查看登录服务器日志（开服状态键入）（退出该状态按ctrl+c）

tailf -n 100 ~/log/loginserver.log

+ 查看游戏服务器日志（开服状态键入）（退出该状态按ctrl+c）

tailf -n 100 ~/log/sceneserver2.log

+ 清库（遇到问题时使用）

sh init.sh -h 127.0.0.1 -u root -p 123456 -z 1 -i 192.168.51.222 -g 1

+ 查看服务器开启时的错误,如没有配置表

tailf -n 100 ./../console.out

