功能模块的开发需要遵守一定的结构规范，包括文件结构、文件命名等规范，下面以邮件模块举例说明。

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656822482-0d155258-3640-4e15-adc7-99236abc1ca2.png)

## 文件结构
负责模块客户端代码的编写，包括发送请求、响应请求以及客户端独有逻辑。

文件以_C为后缀命名，如_Mail_C.lua。_

注:图形层逻辑仍然需要写在图形层代码文件中

+ **服务端**

负责模块服务端代码的编写，包括服务端逻辑、协议处理等。根据服务端构模块组成又可以拆分为场景逻辑（_GS结尾）、会话逻辑（_GC结尾）、跨服逻辑（_CROSS）以及公用服务端逻辑（_S结尾）等。

+ **定义**

负责模块全局表的定义，这是最基础的部分，其它部分都依赖于此。该模块主要编写该模块的枚举定义以及一些常量，以De<u>fine.lua结尾</u>

+ **公用**

负责客户端与服务端公用代码的编写，包括检查逻辑、处理逻辑、公用函数等。该部分代码无后缀。

+ **配置**

负责配置文件的加载以及配置接口的编写。以Config.lua为后缀

+ **数据**

负责数据的读取以及设置，根据功能定位又可划分为全局数据以及玩家数据，全局数据以GlobalData.lua为后缀，玩家数据以PlayerData.lua为后缀。

+ **其它**
1. 脚本重载，负责聚合模块脚本文件重载，方便调试，统一以DoScript.lua命名。
2. 脚本测试，负责该模块的接口测试，统一以Test.lua命名。
3. 机器人脚本，负责模拟机器人的脚本编写，用于压力测试，以_ROBOT.lua为后缀

**注：**

+ 除_C.lua以及无后缀的.lua文件，其余有下划线后缀的文件都不会进客户端包。

## GM指令
可以直接使用GM工具调用代码,需要登录后使用,不同符号前缀可以调用不同模块代码:(符号后需要有空格)

! 代表调用客户端代码

@ 代表调用scene服务器代码

@@ 代表调用所有scene服务器代码

#代表调用session服务器代码

