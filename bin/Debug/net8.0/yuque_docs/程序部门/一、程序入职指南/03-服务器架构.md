# 架构图
![](https://cdn.nlark.com/yuque/0/2024/jpeg/43288467/1712656051125-a424e57a-9288-4d8c-86ef-2bd4ceb96ed1.jpeg)

~~_单服架构图_~~

![](https://cdn.nlark.com/yuque/0/2024/jpeg/43288467/1712656051631-dc64bbe4-e811-4f17-bf20-16d275a765f9.jpeg)

_全服架构图_

# 架构组成
+ **网关服务器（GateServer）**
+ 负责处理客户端请求，担任客户端与游戏内服务器通信媒介的角色。
+ 负责通信的加密、压缩以及断线重连等
+ 服务器采用Linux 高效的 epoll 网络模型进行网络数据的收发
+ 可并行多开，采用客户端随机负载的机制解决高并发问题
+ 可设置最大连接数量以及最大角色数量，防止服务器过载
+ **场景服务器（SceneServer）**
+ 负责处理玩家几乎所有逻辑功能
+ 可并行多开，由会话服务器根据当前负载做均衡处理
+ **会话服务器（SessionServer）**
+ 负责处理游戏角色登录的总控以及GameServer的负载均衡
+ 负责公会、活动等全局功能
+ 为了满足高并发量的登陆不会出现登陆游戏没反应而影响用户体验，该服务器设计了一套角色登陆排队机制，在服务器网络拥堵的时候会提示玩家相关的排队进度信息，提高了用户的体验感
+ **存档服务器（RecordServer）**
+ 作为其它服务器与数据库交互的媒介，负责接收处理游戏数据的存档请求
+ 采用多队列并行机制提高数据处理的效率（根据玩家分发到不同队列处理）
+ **缓存服务器（Redis）**
+ 目的是减少服务器频繁地读写数据库，降低数据库的压力
+ 提供数据共享以及排行榜等功能
+ **管理服务器（SuperServer）**
+ 管理所有的区内服务器
+ 负责区服与跨服的连接通信
+ **登录服务器（LoginServer)**
+ 通过外部平台认证⽤户，为游戏服务器提供⽤户验证
+ 可并行多开，客户端随机负载
+ **跨服服务器（CrossServer）**
+ 负责游戏跨服逻辑以及各区服之间的通信
+ 可并行多开，根据功能划分或区服随机请求负载
+ **充值服务器（BIServer）**
+ 接入各渠道SDK充值相关功能，负责充值回调处理
+ **GM服务器（GMServer）**
+ 负责处理GM后台与游戏内通信

# 架构扩展
+ 区内增加服务器

目前暂不支持方便添加

+ 区外增加服务器
1. 分配服务器类型
2. 新建服务器进程

