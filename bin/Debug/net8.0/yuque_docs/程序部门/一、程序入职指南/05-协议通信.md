# 协议说明
1. 基于TCP
2. 包头（数据包长度【4字节】+协议头）

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656036878-18aa300a-fc9e-4e61-82ef-047d9364aeec.png)

1. 协议内容（Protobuff)

# 协议封装
## C++
+ 目录结构

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656037566-a54c606c-ea9e-4e1a-b82d-0b98a003a4f2.png)

+ 协议号

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656038000-6e67b82b-da26-43bc-be53-ee0ce36217ba.png)

+ 协议内容

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656038553-3506027a-f3cd-41ef-92e6-87f096846c99.png)

协议收发：

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656038976-265088ab-1ac5-4112-aef3-4bbdd4a316f6.png)

## Lua
+ 模块注册：

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656039320-c8af00fe-f390-4dae-97c2-891624082948.png)

注：用于模块协议开关

+ 客户端协议收取：

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656039793-943ba9e8-aa92-4daf-a2e8-25c47953817d.png)

+ 接口封装

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1712656040183-afda63d4-71ff-4e46-804f-1cc672b80e82.png)

# 断线重连
[thoughts 文档](https://thoughts.teambition.com/workspaces/5ef1a751f60ea9001bd606cc/docs/5dfdb717e8307b00012b875c)

