# 一、简介
在排除多人在同一房间内的同步方案之后, 定下一个房间内存在一个真人玩家以及多个AI玩家, AI玩家使用真实玩家数据, 不存在其他真实玩家数据时使用配置的AI表数据. 故需要具备一套完善的AI行为操作, 达到房间内的真人玩家感觉上是在和其他真人玩家一起玩的效果.

# 二、结构设计
内容：

:::info
UI_GameMain_Ctrl: 生成AI玩家, 向C#层传递AI玩家信息.

Scene_GameMain_Ctrl: 控制AI炮台的生成退出, 后续可能增加切换炮台等相关功能.

PlayerInfo: C#层处理AI玩家行为的类, 这一版暂定控制炮台朝向, 控制炮台射击间隔.

GunAttr: C#炮台相关底层实现, 这一版主要处理具体的炮台朝向目标(命中率与假装未命中的效果)

:::

# 三、详细结构设计
内容：

:::info
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1721031594853-9e25b8e8-9afd-47e6-be0d-27bf68d48c9f.png)

PlayerInfo负责接收从Lua层UI_GameMain_Ctrl接收数据, 在GunAttr里使用对应的数据展示实际行为. (套一层的原因是玩家及AI存在更换炮台的行为, 但更换了炮台本身行为依旧不会产生特殊变化).

Scene_GameMain_Ctrl完全控制GunAttr的生命周期, 以达到在Lua层控制AI的产生和销毁.

:::

# 四、流程设计
流程图: 

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1721033153132-c4be043b-06a4-473a-9d9d-e1dfa5edd2d1.png)

时序图:

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1721033984351-ceb1d798-c207-4d80-aabe-d5760525745c.png)



# 五、提出问题
目前第一版AI方案行为设计的不多, 暂时不考虑通过设计模式管理PlayerInfo和GunAttr. (不确定后续会往什么方向扩展).



---

# 六、总结整理（开发完成后撰写）
开发过程中，很可能产生跟上面方案不一致的地方。可能补充了更多的细节内容，可能由于某些未想到的原因推翻了方案中的一些设定。

所有开发完成后有价值的内容，都可以记录在这里。

