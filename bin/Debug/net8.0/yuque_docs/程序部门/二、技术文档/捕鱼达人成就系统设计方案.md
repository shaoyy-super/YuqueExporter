# 一、简介
成就系统的功能内容主要有三个方面，成就入口，成就主面板，达成成就弹窗![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1727157788481-932771f5-ce66-45ff-a295-9ee17ed87abf.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1125%2Climit_0)![](https://cdn.nlark.com/yuque/0/2024/png/26927517/1727158305673-4029e0fe-55d9-4572-bb3c-d0af217fb234.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1125%2Climit_0)



# 二、结构设计
内容：

:::tips
VM:

1. AchievementVM:负责获取处理所有成就的进度，数据刷新的事件派发,成就完成事件的派发

tip:

1. UI_AchievementTip_Ctrl:负责监听服务器的成就完成推送，并处理UI的点击跳转
2. UI_AchievementTip_Panel:负责显示成就达成的弹出框，处理按钮，道具图标的显示，多语言文本等

Panel:

1. UI_Achievement_Ctrl:奖励领取的推送，红点处理,跳转到成就页面的指定页签，向VM注册监听
2. UI_Achievement_Panel:负责成就页面的展示，集中管理一级页签、二级页签、页签条目
3. UI_AchievementTab_Item:负责处理成就页面的主页签的展示与交互
4. UI_AchievementSubTab_Item:负责处理成就页面的二级页签的展示与交互
5. UI_AchievementElement_Item:负责处理成就页面成就单元的展示与交互UI_AchievementTip_Ctrl:监听达成成就，对成就弹出框进行控制管理

资源：

1. 道具图标常驻，成就等级图标常驻，tip文本常驻，tip预制体常驻，成就文本打开时加载，成就页面预制打开时加载，成就页面条目打开成就页面时预加载，

通用：

1. ~~通用跳转中心，跳往指定页面指定页签的指定翻滚进度~~

:::



# 三、详细结构设计
类图:

:::info
![](https://cdn.nlark.com/yuque/0/2024/png/1580229/1729239290315-0bed04f1-d2b3-4766-b358-c289f7b90ad1.png)

:::

:::info
VM负责与服务器的通讯和缓存数据，ctrl向VM注册监听，并将数据传递给UI更新

:::



# 四、流程设计
tip时序图：

![](https://cdn.nlark.com/yuque/0/2024/png/1580229/1729240013462-7256a570-8625-46c2-ab0b-52a18e62e82b.png)

界面时序图：

![](https://cdn.nlark.com/yuque/0/2024/png/1580229/1729229595849-baea029e-b0e6-4598-adda-b8e871a4ae03.png)

tip流程图：![](https://cdn.nlark.com/yuque/0/2024/png/1580229/1729240063281-3ba88322-8710-4f0a-9215-e0957b00a92d.png)

界面流程图：

![](https://cdn.nlark.com/yuque/0/2024/png/1580229/1729228646106-a27b5336-4c9f-4aba-a3e3-a9016796cbbe.png)

# 五、提出问题
目前不知道后端是准备在我打开界面时传数据，还是登录时给数据，暂时还没跟后端详细对过



---

# 六、总结整理（开发完成后撰写）
在成就系统开始开发时没有和后端完全对清楚数据，开发中发现数据与自己的预期不符合导致了部分重构

在之前项目工作流程习惯中，前端也会去进行后端传来的数据的校验，这种思维方式不太适合现在，会影响产出效率，这一点是目前看到的适应上的一个问题，后续得多加注意

