### 上传文件
+ 补丁文件通常为etc和script两个目录
+ 使用ftp工具上传补丁文件至目录服的/data/salt/states/game/files/patch目录下

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713176885000-3ba874af-0ee3-49fc-851d-b506f887ee62.png)

### 分发文件
+ 分发文件

# 在目录服执行命令salt '*' state.apply game.patch pillar='{"zone": "*", "version": "0.0.0.0",  "env": "all"}'version： 线上当前版本号

### 重载服务
+ 重载服务

# 重载session服务salt '*' state.apply game.shell-cmd pillar='{"zone": "*", "cmd": "sh reloadserver.sh session"}'# 重载scene服务salt '*' state.apply game.shell-cmd pillar='{"zone": "*", "cmd": "sh reloadserver.sh scene"}'

### 清理文件
+ 删除 script/ReLoad.lua文件
+ 再次分发文件

# 执行命令salt '*' state.apply game.patch pillar='{"zone": "*", "version": "0.0.0.0",  "env": "all"}'

### CheckList检查事项
| 游戏版本检查 |
| :--- |
| 所有区服生效确认（已备、未备） |
| script/ReLoad.lua文件是否删除 |


