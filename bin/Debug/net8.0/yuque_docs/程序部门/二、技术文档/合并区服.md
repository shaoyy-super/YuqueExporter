![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713175024110-5303cb81-b50d-4aae-91f1-828be1cd7717.png)

合服举例，以10,11,12,13合服，10区作为主服

### 关闭服务
+ 关闭游戏服

salt '*' state.apply game.stop pillar='{"zone": "*"}'

### 备份数据
+ 备份游戏数据

salt '*' state.apply game.backupdb pillar='{"zone": "*"}'

### 合并数据
+ 切换到对应用户并进入主区合服脚本目录，，如下

su - dm10cd /data/zones/dm10/merge/

+ 执行合服命令（确保合服脚本是否为最新）

sh merge.sh -s 11@10.104.6.212 -t 10@10.104.131.214 -u root -p Dm2018Pwd123

sh merge.sh -s 12@10.104.6.212 -t 10@10.104.131.214 -u root -p Dm2018Pwd123

sh merge.sh -s 13@10.104.6.212 -t 10@10.104.131.214 -u root -p Dm2018Pwd123

### 配置合并
+ 配置区服合并到主区，切换目录至主区服config目录下，编辑文件config.xml，修改conzones和zones段，如下

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713175024328-eae21e55-465a-49fb-b0b4-651bef9a1695.png)

以下数码才需配置：

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713175024550-dbe34641-a9b6-4e38-b09e-4c3a54e76777.png)

+ 配置修改入口，使用对应用户登陆目录服，并进入所对应区组目录，server_list.json文件，将11,12,13区的入口，修改为10区的，如下

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713175024862-4ffd730e-396d-4467-a923-accc3621553c.png)

### 开启服务
+ 开启游戏服

salt '*' state.apply game.start pillar='{"zone": "*", "version": "0.0.0.0"}'

**注：**

1. 跨服操作都需要登录到跨服服务器指定目录，并切换到特定用户下

