# 一、简介
内容：[https://snh48group.yuque.com/zdlwma/kxyozs/ys5gkdol3v02t3zc](https://snh48group.yuque.com/zdlwma/kxyozs/ys5gkdol3v02t3zc)

# 二、结构设计
1. 匹配阶段

![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724381966532-52a49145-efae-40a2-b8ea-30f7191acae9.png)

2. 国家选择阶段

![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724382108719-95bc807e-499e-42c6-ba04-2a97ceb51652.png)

3. 选择建筑阶段

![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724382075025-693e891e-079b-461a-8e4b-35d31589cd2d.png)

# 三、详细结构设计
![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724381775863-2a6f4a87-d048-46cd-9abc-0f12c63fe553.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724724886862-d738422f-f5c5-48aa-a22f-430b08abfc88.png)

![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724377995916-9d13043c-beb8-410e-a612-a2a58715ed22.png)



# 四、流程设计
![](https://cdn.nlark.com/yuque/0/2024/png/44713460/1724324768956-8f358afe-fcdb-40ee-b23a-8c1cce5ad0ed.png)

# 五、提出问题
1. 匹配阶段，玩家加入匹配上报跨服时，因为跨服是多开的，匹配列表应该存放在哪个cross

      a.选择一个固定的cross作为匹配服,但一旦这个cross挂了，会导致后续玩家无法匹配

      b.跨服共享匹配数据，制定规则优先使用某一个跨服进行匹配，一旦该跨服挂了，立即切换下一个跨服作为匹          配服，增加复杂性

2. 对匹配队列进行匹配

       a.一次性把队列中的所有玩家匹配完成

       b.每次处理固定数量的组

3. 创建的房间需不需要同步到scene



---

# 六、总结整理（开发完成后撰写）
1. 创建房间cross直接指定一个scene作为战斗场景，房间id规则: 区服id+sceneid+自增索引
2. 

