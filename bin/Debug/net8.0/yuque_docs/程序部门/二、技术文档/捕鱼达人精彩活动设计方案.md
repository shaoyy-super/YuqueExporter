# 一、简介
内容：精彩活动主要内容是一系列模板活动的展示界面，将游戏中的大部分活动集中展示在该面板中，当活动开启时该活动会出现在主界面的快捷功能栏，同时也会出现在左侧页签中，选中页签后会展示这个活动的模板界面

主界面功能栏:

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1736491631931-5b6b456f-81fb-44a8-8504-b243c588fe81.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1280%2Climit_0)

精彩活动面板:

![](https://cdn.nlark.com/yuque/0/2025/png/1580229/1739958252823-d028ea3d-41a8-471b-b8c6-cfc1ebf9ecb5.png)

# 二、结构设计
### 结构分析
做为模板类的内容管理，从结构的角度我们可以将精彩活动大致分为两个方面：一个是内容，一个是管理

**内容：**

模板的制作这里有两种思路：

1. 一个通用模板预制体在代码中通过从表中读取资源为模板的资源容器进行填充，这种方式的优势是策划只需要在表中修改，美术更新图集就可以，劣势是表里是否配置错误不直观，增加资源索引的字段可能会导致表结构变的更复杂，对于预制体结构上的调整不支持界面特化需要代码逻辑处理
2. 将模板做成一个基础预制体通过制作预制体变体的方式将非动态资源预设进变体，这里考虑第二种

:::tips
1. 每种活动有自己的数据表结构
2. 表内配置尽量简洁为主，多以数据支撑结构
3. 能放在预制体里依赖加载的资源尽量不读表加载
4. 每个活动要有自己的数据类与界面类

:::

**管理：**

:::tips
1. 精彩活动表列出所有能够显示在精彩活动界面的活动的配置数据，配置活动的界面类型，模板预制，脚本名，活动表ID，排序优先级，入口样式，文本
2. 主界面活动展示表列出所有能够显示在主界面的活动的配置数据，配置活动的样式类型，活动表ID，文本，图标
3. 与服务器通讯，获取活动的状态，当前的时间，是否参与活动
4. 缓存活动的详细数据
5. 提供通用接口获取活动的状态、时间、图标、文本等数据
6. 链接模板的界面与数据，派发模板的生命周期

:::

### 结构拆解
结构上分为两个部分内容部分及管理部分，三个层级数据与通讯层、逻辑结构与资源层、表现设置层

| **** | **管理** | **内容** |
| :--- | --- | --- |
| **数据与通讯** | WonderfulActivityVM | WonderfulActivity_Basic<br/>WonderfulActivity_Detail_Base |
| **逻辑结构与资源** | UI_WonderfulActivity_Ctrl | WonderfulActivity_Ctrl_Base |
| **表现设置** |  | UI_WonderfulActivity_Panel<br/>UI_WonderfulActivityTab<br/>WonderfulActivity_Panel_Base |




:::tips
1. WonderfulActivityVM:负责缓存活动详细数据与基础数据类，与服务器通讯，提供获取数据接口
2. WonderfulActivity_Detail_Base:负责具体活动的详细数据存储
3. WonderfulActivity_Basic:活动的基础数据结构
4. UI_WonderfulActivity_Ctrl:负责链接对应的活动详细数据类与模板界面，具体界面的加载与销毁，派发界面生命周期，跳转，红点
5. UI_WonderfulActivity_Panel:负责处理精彩活动面板页签的创建，销毁
6. UI_WonderfulActivityTab:负责精彩活动面板页签的设置文本等具体逻辑
7. WonderfulActivity_Ctrl_Base:负责具体活动界面的生命周期，具体业务逻辑，具体数据处理，调用表现设置数据等
8. WonderfulActivity_Panel_Base:负责具体活动界面的显示表现逻辑

:::

# 三、详细结构设计
内容：



![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/1580229/1740474519132-471b0aff-73aa-4bcb-9d95-a18f913f7f83.jpeg)

:::info
1. WonderfulActivity_Ctrl_Base由配表唤出，做为控制脚本
2. WonderfulActivity_Panel_Base由预制体通过luabehaviour唤醒

:::

# 四、流程设计
内容：



![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/1580229/1740035510133-48a8a026-01a8-4192-8b31-0cd15f0505e9.jpeg)



# 五、提出问题
如果存在重点、难点问题的解决方案没想清楚，可提出问题在会上讨论



---

# 六、总结整理（开发完成后撰写）
开发过程中，很可能产生跟上面方案不一致的地方。可能补充了更多的细节内容，可能由于某些未想到的原因推翻了方案中的一些设定。

所有开发完成后有价值的内容，都可以记录在这里。

