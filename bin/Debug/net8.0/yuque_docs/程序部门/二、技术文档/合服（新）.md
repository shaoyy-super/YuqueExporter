

合服相关脚本链接：[<u>http://192.168.51.223/platform/om-operate/tree/develop/merge</u>](http://192.168.51.223/platform/om-operate/tree/develop/merge)

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713176940253-d61e0d90-3fe6-413e-841e-0c397ec47d75.png)

1.通过python脚本生成合服相关脚本及文件，脚本用法如下：

注：将原来server_list.json和pillar中的game.sls文件复制到python脚本工作目录,并将本次合服信息添加到merge_list.txt中，格式如下

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713176940502-6ca1a19f-d1bb-4ff0-8349-3a3e7a9e02aa.png)

python create_merge_script.py --proj [项目简称]  #如数码为dm，口袋1和口袋2均为pm

脚本生成文件如下：

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713176940714-228dd415-460a-45e1-ac85-c178013a3e9c.png)

2.依次执行上述脚本进行合服

合服完成后，用新生成的server_new.json替换原来的server_list.json,用test_new.sls替换原来的game.sls

3.检查server_list._jso_n中被合区的url是否和主区的一致，检查pillar中被合区的信息是否已被删除

4.检查无误后开服

