# 一、简介
为大奖模式-鱼潮模式开发的编辑器相关功能, 当前设计上分为方阵和队列.

方阵: prefab资源, 资源内放置挂队列的结点. 移动轨迹控制整个方阵行进

1. 具体什么轨迹视相关配置决定.
2. 生成与销毁方式待确认(根据方阵统一生成~~或销毁还是依据单个鱼位置处理~~)

队列: 美术提供的fbx, 一组鱼的统一设置, 控制鱼的类型id, 缩放, 鱼之间的间隔, 数量

1. 模型自身旋转走结点控制, 程序功能不做额外处理. 
2. 类似旋转的动画轨迹可以以一个队列一条鱼, 鱼跟着结点走实现.

# 二、结构设计
内容：

:::tips
FishMatrix: 鱼的方阵脚本, 存储方阵基础数据(如: 方阵间距以及该方阵下所有队列相关信息, 以及提供接口预览方阵效果, 同时提供一个信息概述面板, 统计对应类型下鱼的数量(视策划需求扩展).

FishQueue: 鱼的队列, 存储鱼的类型id, 缩放, 间隔(x, z), 数量等相关数据.

FishCreateSystem: 创建方阵系统

FishCreateComponent: 方阵相关数据存储

以上2脚本只处理相关编辑信息存储, 正式游戏内加载对应鱼潮的prefab获取其中信息, 动态加载对应的鱼生成在相关点位下. <font style="color:#DF2A3F;">(跟着方阵生命周期一同创建销毁</font>~~<font style="color:#DF2A3F;">, 还是单独计算鱼的生成点做加载销毁</font>~~<font style="color:#DF2A3F;">)</font>

方阵管理: 走配置, 开始方阵, 循环方阵, <font style="color:#DF2A3F;">结束方阵. 结束方阵待和美术确认</font>

:::

# 三、详细结构设计
内容：

:::info
![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1734078397378-4d25e91f-d0a7-4475-8ce5-28cc7d5cc0dc.png)

此处设计是鱼跟着方阵一同销毁, 如果每条鱼单独计算的话则不再需要GetAllFishNum()方法, 改为计算点位抛出事件(但这么处理实际上程序需要关注队列里每个具体鱼生成的点, 看着会比较奇怪)

:::



# 四、流程设计
流程图: 

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1734075334921-b4e8f714-ff9e-4ae4-bd74-5e2b5082625d.png)

时序图: 

![](https://cdn.nlark.com/yuque/0/2024/png/43288772/1734075032890-2984b0eb-2404-4e61-bcea-d7086d3fe72f.png)



# 五、提出问题
1. <font style="color:#DF2A3F;">鱼潮编辑器入口是新加一个场景编辑还是继续使用当前已有的测试场景?</font>

新加场景编辑

2. <font style="color:#DF2A3F;">方阵移动相关数据走轨迹配置还是直接存在prefab上?</font>

方阵是prefab, 队列是fbx, 主体使用动画轨迹效果



---

# 六、总结整理（开发完成后撰写）
开发过程中，很可能产生跟上面方案不一致的地方。可能补充了更多的细节内容，可能由于某些未想到的原因推翻了方案中的一些设定。

所有开发完成后有价值的内容，都可以记录在这里。

