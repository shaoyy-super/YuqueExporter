# 一、框架使用问题
## 1、场景配置
场景配置表没导出过，项目中用的json文件还是老的Box项目的数据，excel数据与json不一致

### 2、AB包配置
目前场景只加了Art/Scenes一个配置路径，具体看项目需求进行合理划分

### 3、多语言
现在项目中是切换多语言立马生效的，之前是重启生效，具体再看是否有问题；还有一些多语言AB包是在代码里写死的

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1728442304586-509a459f-65a8-4a84-9e5e-357038ae7b78.png)

### 4、Page划分
目前只分了主界面Page、渔场选择Page，Login对应的Page应该删掉，其他模块根据需求再划分

### 5、返回登陆
返回登陆，Lua注册的C#事件没有正确清空，造成C# Lua环境销毁失败

# 二、C#
### 1、鱼缺少生命周期状态（优先）
业务层要根据各种状态做逻辑处理，现在取不到这些状态

### 2、缺少渔场所有单位的管理（优先）
现在要么没进渔场的不受管理，要么死亡表演的鱼不受管理

### 3、控制鱼的各种C#脚本过于分散
比如移动、旋转，可能还有其他控制脚本

### 4、压扁脚本 FlattenController 需要优化
+ Update里频繁new Dictionary
+ 很多重复代码

### 5、GunAttr、ButtletAttr、 PlayerInfo
+ 频繁调用 GetComponentInChildren
+ 很多重复代码

### 6、FishMaker 鱼的创建接口需要优化，现在有20多个参数（优先）
### 7、鱼运动轨迹做法以及编辑器扩展 
### 8、Boss结算随机爆金币以及礼花逻辑待优化，需要考虑队列
### 9、TML动态生成的单位和特效，根据需求细化管理逻辑，现在是临时解决的各种需求
### 10、技能系统，确认一下需求和做法


其他的C#层业务逻辑没细看，应该还有很多需要优化的，比如下边这种写法，可以在GameController封装一个接口去调用，并且每次命中都会获取一次Component，可以结合问题3缓存起来

![](https://cdn.nlark.com/yuque/0/2024/png/22817384/1728441755904-844b1ba2-fc68-44b8-b4c5-f468ba78bbb3.png)

# 三、Lua 
等C#结构整理完，再处理Lua逻辑

### 1、鱼技能脚本使用问题，Boss通用的脚本，现在并不通用（已整理了一部分）
### 2、鱼的各种生命周期回调，结合C#对应脚本优化需要同步处理下
### 3、有了鱼的生命周期管理，以及渔场所有鱼的状态管理，需要处理各种表现队列
+ 死亡队列
+ 出场队列
+ 小结算队列 偏移
+ 变暗队列 变暗管理，加一个变暗层级，区分类型
+ 大结算队列

### 4、在Lua层也要有个鱼的统一管理
+ 用来控制不同鱼的位置刷新CD
+ 统一处理鱼的各种表现，比如出场、死亡、受击
+ 处理上一步说的队列问题



# 四、编辑器相关问题


### 1、压暗、压扁运行时非运行时保持逻辑一致、压扁添加非运行时开关
### 2、技能编辑器独立出来
### 3、测试场景渔场逻辑前后端一致
等多人分支结束，基于修改后结构再看方案，需要和后端一起讨论

### 4、鱼的轨迹相关编辑
可能也需要独立出来，当前版本跑不起来

+ 反弹（暂时不支持编辑），目前参数是程序写死的
+ 贝塞尔曲线（可编辑）
+ 往中心游（可编辑）
+ 动画轨迹（暂时不支持编辑），后续有需求





