# 一、简介
按照游戏内公会常有的功能做设计，引起舞团间竞争，增加成员间的交互性、凝聚性，使得游戏活跃

### 预期体验
①归属感：舞团的存在能让玩家在游戏里有个归属感，增加玩家粘性；舞团之间竞技的存在，激发团队荣誉感

<font style="color:#000000;">②社交性：玩家在舞团中和其他成员一起交流、合作或者竞技，增加喜爱社交的玩家的乐趣</font>

<font style="color:#000000;">③竞技性：舞团里的战斗增加可玩性，给喜欢竞技的玩家带来乐趣，提高他们的竞技欲望；也通过舞团排名等方式激起舞团间的比拼。</font>

<font style="color:#000000;">④可收集：玩家在舞团中可以得到一些他想要的衣服，增加收藏类玩家的乐趣</font>

### <font style="color:#000000;">舞团界面示意图如下</font>
舞团推荐：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023273488-463728f4-d3dc-4576-adb0-bdd8c900029b.png)

舞团详情：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023315273-3b08b2f2-1c49-4023-a463-a6490b8ba30c.png)

创建舞团：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023344317-430a78b0-c990-44cb-bb1c-8633ef1c4b3f.png)

标签搜索和标签过滤：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023410393-fb60329b-355d-44ab-88e9-2c15a0e4ed0b.png)

舞团排行：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023443422-e610536e-f1da-4fb1-89a9-372c83d8a28a.png)

我的舞团申请：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023505891-98dc5477-8b8b-49e1-a251-3c4cd1870042.png)

舞团主界面：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023538452-080d5271-ee7a-481d-ac2a-cb6a2f53a71d.png)

舞团改名：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023591081-52a44e4a-0d35-4d8a-b273-f84c66cd5348.png)

舞团事件：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023669179-2f7343b6-078a-4f40-9893-a66a5a485e4f.png)

舞团奖励：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023703399-5cd0f8c8-4c81-4a79-81c1-b826e1dd8042.png)

舞团任务：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023731745-1d5e064e-81f2-477b-b2d4-08a459953e33.png)

舞团捐献：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740023759013-5910bcc4-6342-46c2-8eb5-9fdafdb3097e.png)

舞团成员：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740028136671-849dd6f4-f760-4b37-9a75-80f74370375b.png)

舞团管理：

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740024037838-21b492eb-8d4f-40c4-a694-db2e0ea6bddb.png)![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740024038044-d6df9df3-c8a5-477f-b3bf-637b1021eecc.png)![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740024038346-6e328a7e-ecba-4841-9c2e-812048ceb362.png)![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1740024038438-901a07e8-06c2-4f80-b6d5-31f51f5d4c79.png)

# 二、结构设计
内容：

:::tips
1. 新增流程控制脚本
    1. Page_Guild_Ctrl.lua，负责舞团的流程控制
2. 新增VM脚本
    1. GuildVM.lua，负责舞团的数据管理和网络通信
3. 新增UI脚本
    1. UI_CreateGuild_Ctrl和UI_CreateGuild_Panel：创建舞团界面
    2. UI_GuildBriefInfo_Ctrl和UI_GuildBriefInfo_Panel：舞团详情界面
    3. UI_GuildDonate_Ctrl和UI_GuildDonate_Panel：舞团捐献界面
    4. UI_GuildEvent_Ctrl，UI_GuildEvent_Panel和UI_GuildEventItem：舞团事件界面
    5. UI_GuildLabel_Ctrl和UI_GuildLabel_Panel：舞团设置标签和标签筛选界面
    6. UI_GuildMain_Ctrl和UI_GuildMain_Panel：舞团主界面
    7. UI_GuildManage_Ctrl，UI_GuildManage_Panel和UI_GuildApplyItem：舞团管理界面
    8. UI_GuildMember_Ctrl，UI_GuildMember_Panel和UI_GuildMemberItem：舞团成员列表界面
    9. UI_GuildMyApply_Ctrl，UI_GuildMyApply_Panel和UI_GuildMyApplyItem：舞团我的申请界面
    10. UI_GuildRank_Ctrl，UI_GuildRank_Panel和UI_GuildRankItem：舞团排行界面
    11. UI_GuildRename_Ctrl和UI_GuildRename_Panel：舞团改名界面
    12. UI_GuildReward_Ctrl和UI_GuildReward_Panel：舞团奖励界面
    13. UI_GuildTask_Ctrl，UI_GuildTask_Panel和UI_GuildTaskItem：舞团任务界面
    14. UI_JoinGuild_Ctrl，UI_JoinGuild_Panel和UI_JoinGuildItem：舞团推荐界面
4. 新增数据枚举脚本

GuildDefine.lua，定义GuildApprovalType(加入舞团限制类型)、GuildStatus(舞团状态)、GuildRoleStatus(舞团角色状态)、GetGuildInfoType(获取舞团信息参数类型)、PostType(职位类型)、PowerType(权限类型)、EventType(事件类型)、ExitGuildType(退出舞团类型)、HonourType(舞团奖励类型)、DonationType(舞团捐献类型)

5. 使用的通用功能及组件
    1. 使用 UIMgr:Open(UIEnum.MoneyMenu)  显示顶部通用菜单
    2. 使用RoleMgr.lua根据id、role_type获取玩家信息
    3. 使用DressActor.lua显示玩家模型
    4. 使用RedMark.lua显示红点
6. 资源管理
    1. 在UI_GuildRank_Ctrl的舞团选择时加载模型，两种性别对应两个actor，退出排行后调用actor:Release()删除模型，清除对象。
    2. 舞团排行场景Sce_GuildRank。

:::

# 三、详细结构设计
内容：

:::info
1. 登录后拉取GDSGetRoleGuildInfoReq，获取我的舞团信息，值为空表示没有舞团，点击舞团按钮后进入舞团推荐界面，否则进入舞团主界面
2. 舞团解散设置冷静期和倒计时，期间可以取消解散舞团
3. 舞团排行场景预设

![](https://cdn.nlark.com/yuque/0/2025/png/44314719/1739959756603-590cc76d-c3f3-4597-b7d8-cbc2dcd5ca03.png)

RoleNode设置模型加载位置，缩放和旋转

VCM虚拟相机设置相机远近和位置

4. 类的依赖关系及重要方法  
 

:::

![画板](https://cdn.nlark.com/yuque/0/2025/jpeg/44314719/1740022256259-cfcbf7c5-60c6-441f-837b-fd785d92ef2e.jpeg)



# 四、流程设计
加入舞团流程：

![](https://cdn.nlark.com/yuque/0/2024/png/50704734/1734069573600-285bb30a-ad23-4bb6-b3e5-be093ea9bd64.png?x-oss-process=image%2Fformat%2Cwebp)



# 五、提出问题
如果存在重点、难点问题的解决方案没想清楚，可提出问题在会上讨论



---

# 六、总结整理（开发完成后撰写）
开发过程中，很可能产生跟上面方案不一致的地方。可能补充了更多的细节内容，可能由于某些未想到的原因推翻了方案中的一些设定。

所有开发完成后有价值的内容，都可以记录在这里。

