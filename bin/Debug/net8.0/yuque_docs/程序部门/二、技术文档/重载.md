重载即为在线更新游戏服务端内容，并重载脚本使其生效。期间线上玩家无感知。

![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713175124703-ecd95bbd-7319-4403-91f9-11a2f73cc39b.png)

### 服务器补丁安装
+ 上传服务器补丁至目录/data/salt/states/game/files/packages，并安装到所有区服

salt '*' state.apply game.patch pillar='{"zone": "*", "version": "0.0.0.0", "env": "all"}'

+ 注：## 其中env的参数有三个，分别为zones,wait,all，分别代表更新pillar文件中的zones段的游戏服，和zones_wait段的备服，以及所有服。

### 服务器脚本重载
脚本重载有两种执行方式，如下：

1. 上GM后台执行重载脚本命令
2. 把重载脚本发布到各区服下执行重载，但执行完后需要还原

# 根据需要选择需要重载的服务salt '*' state.apply game.shell-cmd pillar='{"zone": "*", "cmd": "sh reloadserver.sh scene"}'

salt '*' state.apply game.shell-cmd pillar='{"zone": "*", "cmd": "sh reloadserver.sh session"}'# 删除Reload.lua文件的内容，重新分发salt '*' state.apply game.patch pillar='{"zone": "*", "version": "0.0.0.0", "env": "all"}'

**注：**

+ 补丁需要应用到所有区服（包括已开以及未开）
+ 采用第2种方式重载需要还原重载脚本

