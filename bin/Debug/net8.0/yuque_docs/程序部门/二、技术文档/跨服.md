![](https://cdn.nlark.com/yuque/0/2024/png/43288467/1713176661704-5847c81d-7449-4233-818b-22ace371485f.png)

### 机器初始化
参考[thoughts 文档](https://thoughts.teambition.com/workspaces/5dfb64dfdd03ff001360619e/docs/5dfdbb0ae8307b00012b8809)

### 安装mariadb
注：口袋项目才需要安装，数码不需要

+ 安装Mariadb

yum install mariadb-server -y

+ 修改配置

vim /etc/my.cnf

# 替换下面字段datadir=/data/mysql

socket=/data/mysql/mysql.sock

innodb_file_per_table = 1log_bin=mysql-bin

log_bin_index=mysql-bin.index

expire_logs_days=7

binlog_format=mixed

max_binlog_size=100m

binlog_cache_size=4m

max_binlog_cache_size=512m

+ 创建数据目录

mkdir -p /data/mysqlchown -R mysql.root /data/mysql/

+ 链接sock文件

ln -s /data/mysql/mysql.sock  /var/lib/mysql/

+ 启动服务

systemctl start mariadb.servicesystemctl enable mariadb.service

+ 查看端口

netstat -tnlp | grep 3306

+ 设置密码

# 设置密码（Dm2018Pwd123）mysql_secure_installation

### 配置基础环境
_口_袋项目路径为/data/ProjectPok，用户是pok

数码项目路径为/data/ProjectDM，用户是dm

+ 创建目录和用户

useradd dmmkdir /data/ProjectDMchown dm.dm /data/ProjectDM

+ 链接目录

su - dmln -s /data/ProjectDM ./

+ 配置环境（数码）

git clone -b dm [http://192.168.51.223/platform/om-saltstack.gitcp](http://192.168.51.223/platform/om-saltstack.gitcp) -rf om-saltstack/devops-extern

/* /data/ProjectDM/

+ 配置环境（口袋）

git clone [http://192.168.51.223/platform/om-saltstack.gitcp](http://192.168.51.223/platform/om-saltstack.gitcp) -rf om-saltstack/devops-extern/*

  /data/ProjectPok/

