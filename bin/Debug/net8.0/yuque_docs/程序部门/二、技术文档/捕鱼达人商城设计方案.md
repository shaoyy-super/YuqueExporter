# 一、简介
主界面有对应的商城入口，货币栏后方加号也可以跳转，后续有其他跳转再增加

商城内目前支持消耗的资源如下：

a-1、钻石，充值购买，获得一定数量的钻石

a-2、金币，钻石购买，获得一定数量的金币

a-3、材料，钻石购买，获得一个随机给升炮材料的道具

a-4、道具，钻石购买，或者一定数量的道具

商品有限制条件，包括限定一定时间内的购买次数。可购买资格的条件

c、商品有优惠配置，可配置每个商品需要的优惠方式

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737365567556-70ffb3fe-5213-41c7-9a2a-5e97885e981a.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1406%2Climit_0)

![](https://cdn.nlark.com/yuque/0/2025/png/43733777/1737358133833-47fb8a38-9a98-45a3-9f54-244a0fadaefa.png?x-oss-process=image%2Fformat%2Cwebp%2Fresize%2Cw_1406%2Climit_0)

# 二、结构设计
:::info
UI_Shop_VM:注册事件处理购买逻辑，并派发对应结果

UI_Shop_Ctrl: 处理跳转到指定页签展示，处理初始化

UI_Shop_Tab: 处理页签选择，展示刷新内容

UI_Shop_Item: 处理物品展示，播报

UI_Shop_Top:暂时处理详情





:::



# 三、详细结构设计
内容：

:::info
![](https://cdn.nlark.com/yuque/0/2025/png/52134590/1740824960467-b9aea2a3-ac22-48b0-bb2c-e8e24acd8333.png)

VM负责与服务器交互，并处理整个商城的购买逻辑，Ctrl监听VM的逻辑处理结果，并将数据传给UI_Shop_Tab和UI_Shop_Top刷新

:::



# 四、流程设计
时序图:

![](https://cdn.nlark.com/yuque/0/2025/png/52134590/1740824612470-1505cd04-73ab-4815-bbb9-4a737a94684e.png)

流程图: 

![](https://cdn.nlark.com/yuque/0/2025/png/52134590/1740811344676-989d7fe6-17e8-4613-a8fd-7ba61ec38a82.png)



# 五、提出问题
需要和策划再详细对一下每种物品的购买优惠，及限制等



