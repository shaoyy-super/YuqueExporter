

Coder：[@韩超](undefined/hanchao-uoi0q)  
Reviewer：[@高岳雷](undefined/loading-mozdj)



# 问题记录


1、UnitAgentBase

- [ ] Update方法里status状态检测没有意义
- [ ] pause相关逻辑，看下是否放到AgentBase更合适

2、FileCustomManager

- [ ] 后续看如果没有扩展需求，直接调用LoadBehaviorTree即可，不需要额外加一个单例

3、BehaviacTool

- [ ] RunLuaFuntion 单词拼写错误

4、UIVirtualTouch

- [ ] public变量命名首字母要大写
- [ ] private变量要么首字母小写，要么以下划线开头，风格统一
- [ ] 外部完全不需要访问的变量，要使用private
- [ ] CameraRotation 把LockPosition检测放前边
- [ ] 去掉过度封装的函数，比如数值求反、设置gameObject可见性、设置坐标、坐标相减

5、CustomJoystick

- [ ] 同样的编码规范问题
- [ ] 删除不需要的debug逻辑
- [ ] 隐藏逻辑有问题，不应该在upadte里一直检测，应该参照基类的变量[@万一](undefined/ekfbmlaw)
- [ ] 箭头朝向计算需要优化[@万一](undefined/ekfbmlaw)

6、RaycastCheckCtrl

- [ ] 同样的编码规范问题
- [ ] StartOnRaycastCheckCall参数命名
- [ ] 检测tag是否相等，应该使用gameObject.CompareTag
- [ ] onRaycastCheckCall没有清空

7、UI_VirtualTouch_Panel

- [ ] SetTouch第一个参数 target本身就是gameObject，不需要再取target.gameObject

8、UI_Joystick_Panel

- [ ] UnRegisterJoystick 方法完全没用到，可以在C#里OnDestroy或者合适的时机清空回调

9、Scene_FieldMap_Ctrl

- [ ] actorid_monster_list、pointdata 命名不规范
- [ ] RegisterTimeRefresh 注册指定点位刷新计时器时，应该先检测是否有相同id的计时器，把已有点位的计时器关闭
- [ ] FollowCameraBind 函数里，检测到缺少必须的组件，需要把错误日志打出来，而不应该规避掉错误，没有任何提示
- [x] ChangeCamera 方法里调用SetTouch，传递的回调函数，不应该每次都创建新的函数
- [ ] RefreshMonster ，如果去不掉点位信息，创建的monster_ctrl就永远回收不了，应该检测有点位信息再从cache里取
- [ ] 注册的全局事件OnResponseCatchPet没有取消注册
- [ ] cache_monster_list 没有清理操作
- [x] SetMonsetrByCache、GetMonsetrByCache、 TounchCallBack 单词拼写错误

10、UI_CatchPet_Ctrl

- [ ] 变量 self.raycast_goid 命名不规范
- [ ] OnShowUI 里调用一次SetCatchState(false)，OnClickBtnCloseCatch也会调用一次
- [ ] SetRaycastCall 可以直接在OnAddEvent调用Panel的SetRaycastCall，没必要再额外封装一个函数
- [ ] self.ball_id 界面关闭时没有清空，当下次进来，如果列表为空，并不会刷新ball_id，造成逻辑错误
- [ ] InitBallView 绑定ScrollView刷新回调函数，不应该每次都创建新的函数
- [ ] OnFillBall 里边的逻辑应该使用通用道具的显示逻辑，而且需要缓存下来
- [ ] RefreshBallsViewCells 只是刷新一下选中状态，没必要重新刷新整个列表，根据上边缓存的道具对象刷新状态即可
- [ ] 本地临时测试代码 tempBall、 GetBallData、 GetBallCfg，如果联调结束可以删掉
- [ ] SetStarFollow 里边的坐标转换可以在C#里封装个接口给Lua调用
- [ ] OnClickBtnBackToTown 这里不应该指定回到主城，应该使用GoBack()
- [ ] OnRaycastCheck goid 命名不规范
- [ ] RefrshCatchShow 单词拼写错误
- [ ] RefrshProbability 单词拼写错误
- [ ] 多语言

11、PlayerActor_Ctrl

- [ ] SetPosition、SetRotation 已经检测了参数是否为空，后边的逻辑就不需要再用 or 检测了
- [x] PlayerStateEnum 如果只是自己内部使用，可以定义成local变量
- [ ] GetHightTran 这个方法完全可以使用 UnityActorCtrl.GetNode()代替
- [x] 玩家移动速度也可以和怪一样，配置到单位表里，直接读表
- [ ] SetMoveAgent 接口可以直接在构造函数里传入true或false，没必要所有属性都添加一个方法设置

12、Page_FieldMap_Ctrl

- [ ] 按照现在的逻辑，可以使用PageAdapter替换掉Page_FieldMap_Ctrl

